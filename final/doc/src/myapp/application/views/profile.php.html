<!DOCTYPE html>
<html>
<head>
  <title>profile.php</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "src\\myapp\\application\\views\\profile.php";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>profile.php</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">&lt;div class="container my-5"&gt;

    &lt;h2&gt;Profile&lt;/h2&gt;
    &lt;!-- main content --&gt;
    &lt;?php if ($this-&gt;session-&gt;flashdata('profile_no_login')) : ?&gt;
        &lt;div class="alert alert-danger mt-3"&gt;
            &lt;?php echo $this-&gt;session-&gt;flashdata('profile_no_login'); ?&gt;
        &lt;/div&gt;
    &lt;?php endif ?&gt;

    &lt;?php if ($this-&gt;session-&gt;flashdata('info not found')) : ?&gt;
        &lt;div class="alert alert-danger mt-3"&gt;
            &lt;?php echo $this-&gt;session-&gt;flashdata('info not found'); ?&gt;
        &lt;/div&gt;
    &lt;?php endif ?&gt;

    &lt;?php if ($this-&gt;session-&gt;flashdata('profile-message')) : ?&gt;
        &lt;div class="alert alert-danger mt-3"&gt;
            &lt;?php echo $this-&gt;session-&gt;flashdata('profile-message'); ?&gt;
        &lt;/div&gt;
    &lt;?php endif ?&gt;

    &lt;?php if (validation_errors()) : ?&gt;
        &lt;div class="alert alert-danger" role="alert"&gt;
            &lt;button type="button" class="close" data-dismiss="alert" aria-label="Close"&gt;
                &lt;span aria-hidden="true"&gt;&amp;times;&lt;/span&gt;
            &lt;/button&gt;
            &lt;?php echo validation_errors(); ?&gt;
        &lt;/div&gt;
    &lt;?php endif ?&gt;

    &lt;div class="mt-4"&gt;
        &lt;h4&gt;Username&lt;/h4&gt;
        &lt;?php echo $username; ?&gt;
    &lt;/div&gt;

    &lt;div class="mt-4"&gt;
        &lt;h4&gt;Email&lt;/h4&gt;
        &lt;?php echo $email; ?&gt;
    &lt;/div&gt;

    &lt;div class="mt-3"&gt;
        &lt;a href="&lt;?php echo base_url(); ?&gt;index.php?/profile/edit_profile" class="btn btn-primary"&gt;Edit&lt;/a&gt;
    &lt;/div&gt;

    &lt;h3 class="mt-5"&gt;Wishlist&lt;/h3&gt;

    &lt;div class="row my-5" id="cards"&gt;
        &lt;?php if ($allWishlist) :?&gt;
            &lt;?php foreach($allWishlist-&gt;result() as $row) :?&gt;
                &lt;div class="col-sm mb-3" id="&lt;?php echo $row-&gt;id; ?&gt;"&gt;
                    &lt;div class="card" style="width: 18rem;"&gt; 
                        &lt;div class="card-body"&gt; 
                            &lt;h5 class="card-title"&gt;&lt;?php echo $row-&gt;title;?&gt;&lt;/h5&gt;
                            &lt;p class="card-text"&gt;&lt;?php echo $row-&gt;description;?&gt;&lt;/p&gt;
                            &lt;a href="&lt;?php echo base_url(); ?&gt;index.php?/detail/getProductId?title=&lt;?php echo $row-&gt;title;?&gt;" class="btn btn-primary mr-3"&gt;Buy&lt;/a&gt;
                            &lt;button type="button" class="btn btn-danger delete" data-text="&lt;?php echo $row-&gt;title; ?&gt;" data-id="&lt;?php echo $row-&gt;id; ?&gt;"&gt;Delete&lt;/button&gt;
                        &lt;/div&gt;
                    &lt;/div&gt;
                &lt;/div&gt;
            &lt;?php endforeach;?&gt;
        &lt;?php else:?&gt;
            Wishlist is empty.
        &lt;?php endif;?&gt;
    &lt;/div&gt;

&lt;/div&gt;
&lt;script&gt;
    $(document).ready(function() {
        $('.delete').click(function() {
            var title = $(this).data('text');
            var id = $(this).data('id');
            $.ajax({
                url: "&lt;?php echo base_url(); ?&gt;index.php?/profile/deleteWishlist",
                method: 'POST',
                data: {
                    username: '&lt;?php echo $this-&gt;session-&gt;userdata('username'); ?&gt;',
                    title: title
                },
                success: function(response) {
                    if (response == 'success') {
                        console.log('#'+id);
                        $("#"+id).fadeOut('slow');
                    }
                }
            });
        });      
    });
&lt;/script&gt;

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
