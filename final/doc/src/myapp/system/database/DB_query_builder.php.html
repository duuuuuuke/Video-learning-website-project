<!DOCTYPE html>
<html>
<head>
  <title>DB_query_builder.php</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "src\\myapp\\system\\database\\DB_query_builder.php";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>DB_query_builder.php</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="php"><span class="hljs-meta">&lt;?php</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>CodeIgniter</p>
</div>
<div class="body">
<p>An open source application development framework for PHP</p>
<p>This content is released under the MIT License (MIT)</p>
<p>Copyright (c) 2014 - 2019, British Columbia Institute of Technology</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</p>
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">defined(<span class="hljs-string">'BASEPATH'</span>) <span class="hljs-keyword">OR</span> <span class="hljs-keyword">exit</span>(<span class="hljs-string">'No direct script access allowed'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>Query Builder Class</p>
</div>
<div class="body">
<p>This is the platform-independent base Query Builder implementation class.</p>
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CI_DB_query_builder</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CI_DB_driver</span> </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>Return DELETE SQL flag</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $return_delete_sql		= <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<div class="dox">
<div class="summary">
<p>Reset DELETE data flag</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $reset_delete_data		= <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB SELECT data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_select			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB DISTINCT flag</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_distinct			= <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB FROM data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_from			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB JOIN data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_join			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB WHERE data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_where			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB GROUP BY data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_groupby			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB HAVING data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_having			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB keys</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_keys			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB LIMIT data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_limit			= <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB OFFSET data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_offset			= <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB ORDER BY data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_orderby			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB data sets</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_set			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB data set for update_batch()</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_set_ub			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB aliased tables list</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_aliased_tables		= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB WHERE group started flag</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_where_group_started	= <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB WHERE group count</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_where_group_count		= <span class="hljs-number">0</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>Query Builder Caching variables</p>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB Caching flag</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_caching				= <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB Cache exists list</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_cache_exists			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB Cache SELECT data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_cache_select			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB Cache FROM data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_cache_from			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB Cache JOIN data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_cache_join			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB Cache aliased tables list</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_cache_aliased_tables			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB Cache WHERE data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_cache_where			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB Cache GROUP BY data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_cache_groupby			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB Cache HAVING data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_cache_having			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB Cache ORDER BY data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_cache_orderby			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB Cache data sets</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_cache_set				= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB No Escape data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_no_escape 			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<div class="dox">
<div class="summary">
<p>QB Cache No Escape data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $qb_cache_no_escape			= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<div class="dox">
<div class="summary">
<p>Select</p>
</div>
<div class="body">
<p>Generates the SELECT portion of the query</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">select</span><span class="hljs-params">($select = <span class="hljs-string">'*'</span>, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">if</span> (is_string($select))
		{
			$select = explode(<span class="hljs-string">','</span>, $select);
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<p>If the escape value was not set, we will base it on the global setting</p>

        </td>
        <td class="code highlight">
          <pre class="php">		is_bool($escape) <span class="hljs-keyword">OR</span> $escape = <span class="hljs-keyword">$this</span>-&gt;_protect_identifiers;

		<span class="hljs-keyword">foreach</span> ($select <span class="hljs-keyword">as</span> $val)
		{
			$val = trim($val);

			<span class="hljs-keyword">if</span> ($val !== <span class="hljs-string">''</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;qb_select[] = $val;
				<span class="hljs-keyword">$this</span>-&gt;qb_no_escape[] = $escape;

				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching === <span class="hljs-keyword">TRUE</span>)
				{
					<span class="hljs-keyword">$this</span>-&gt;qb_cache_select[] = $val;
					<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists[] = <span class="hljs-string">'select'</span>;
					<span class="hljs-keyword">$this</span>-&gt;qb_cache_no_escape[] = $escape;
				}
			}
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<div class="dox">
<div class="summary">
<p>Select Max</p>
</div>
<div class="body">
<p>Generates a SELECT MAX(field) portion of a query</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the field
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>an alias
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">select_max</span><span class="hljs-params">($select = <span class="hljs-string">''</span>, $alias = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_max_min_avg_sum($select, $alias, <span class="hljs-string">'MAX'</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<div class="dox">
<div class="summary">
<p>Select Min</p>
</div>
<div class="body">
<p>Generates a SELECT MIN(field) portion of a query</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the field
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>an alias
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">select_min</span><span class="hljs-params">($select = <span class="hljs-string">''</span>, $alias = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_max_min_avg_sum($select, $alias, <span class="hljs-string">'MIN'</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<div class="dox">
<div class="summary">
<p>Select Average</p>
</div>
<div class="body">
<p>Generates a SELECT AVG(field) portion of a query</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the field
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>an alias
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">select_avg</span><span class="hljs-params">($select = <span class="hljs-string">''</span>, $alias = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_max_min_avg_sum($select, $alias, <span class="hljs-string">'AVG'</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<div class="dox">
<div class="summary">
<p>Select Sum</p>
</div>
<div class="body">
<p>Generates a SELECT SUM(field) portion of a query</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the field
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>an alias
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">select_sum</span><span class="hljs-params">($select = <span class="hljs-string">''</span>, $alias = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_max_min_avg_sum($select, $alias, <span class="hljs-string">'SUM'</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<div class="dox">
<div class="summary">
<p>SELECT <a href=".html">MAX|MIN|AVG|SUM</a></p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$select Field name
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$alias
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$type
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_max_min_avg_sum</span><span class="hljs-params">($select = <span class="hljs-string">''</span>, $alias = <span class="hljs-string">''</span>, $type = <span class="hljs-string">'MAX'</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! is_string($select) <span class="hljs-keyword">OR</span> $select === <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_invalid_query'</span>);
		}

		$type = strtoupper($type);

		<span class="hljs-keyword">if</span> ( ! in_array($type, <span class="hljs-keyword">array</span>(<span class="hljs-string">'MAX'</span>, <span class="hljs-string">'MIN'</span>, <span class="hljs-string">'AVG'</span>, <span class="hljs-string">'SUM'</span>)))
		{
			show_error(<span class="hljs-string">'Invalid function type: '</span>.$type);
		}

		<span class="hljs-keyword">if</span> ($alias === <span class="hljs-string">''</span>)
		{
			$alias = <span class="hljs-keyword">$this</span>-&gt;_create_alias_from_table(trim($select));
		}

		$sql = $type.<span class="hljs-string">'('</span>.<span class="hljs-keyword">$this</span>-&gt;protect_identifiers(trim($select)).<span class="hljs-string">') AS '</span>.<span class="hljs-keyword">$this</span>-&gt;escape_identifiers(trim($alias));

		<span class="hljs-keyword">$this</span>-&gt;qb_select[] = $sql;
		<span class="hljs-keyword">$this</span>-&gt;qb_no_escape[] = <span class="hljs-keyword">NULL</span>;

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching === <span class="hljs-keyword">TRUE</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;qb_cache_select[] = $sql;
			<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists[] = <span class="hljs-string">'select'</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<div class="dox">
<div class="summary">
<p>Determines the alias name based on the table</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$item
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_create_alias_from_table</span><span class="hljs-params">($item)</span>
	</span>{
		<span class="hljs-keyword">if</span> (strpos($item, <span class="hljs-string">'.'</span>) !== <span class="hljs-keyword">FALSE</span>)
		{
			$item = explode(<span class="hljs-string">'.'</span>, $item);
			<span class="hljs-keyword">return</span> end($item);
		}

		<span class="hljs-keyword">return</span> $item;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<div class="dox">
<div class="summary">
<p>DISTINCT</p>
</div>
<div class="body">
<p>Sets a flag which tells the query string compiler to add DISTINCT</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$val
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">distinct</span><span class="hljs-params">($val = TRUE)</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;qb_distinct = is_bool($val) ? $val : <span class="hljs-keyword">TRUE</span>;
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54"></a>
</div>
<div class="dox">
<div class="summary">
<p>From</p>
</div>
<div class="body">
<p>Generates the FROM portion of the query</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$from can be a string or array
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">from</span><span class="hljs-params">($from)</span>
	</span>{
		<span class="hljs-keyword">foreach</span> ((<span class="hljs-keyword">array</span>) $from <span class="hljs-keyword">as</span> $val)
		{
			<span class="hljs-keyword">if</span> (strpos($val, <span class="hljs-string">','</span>) !== <span class="hljs-keyword">FALSE</span>)
			{
				<span class="hljs-keyword">foreach</span> (explode(<span class="hljs-string">','</span>, $val) <span class="hljs-keyword">as</span> $v)
				{
					$v = trim($v);
					<span class="hljs-keyword">$this</span>-&gt;_track_aliases($v);

					<span class="hljs-keyword">$this</span>-&gt;qb_from[] = $v = <span class="hljs-keyword">$this</span>-&gt;protect_identifiers($v, <span class="hljs-keyword">TRUE</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">FALSE</span>);

					<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching === <span class="hljs-keyword">TRUE</span>)
					{
						<span class="hljs-keyword">$this</span>-&gt;qb_cache_from[] = $v;
						<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists[] = <span class="hljs-string">'from'</span>;
					}
				}
			}
			<span class="hljs-keyword">else</span>
			{
				$val = trim($val);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55"></a>
</div>
<p>Extract any aliases that might exist. We use this information
in the protect_identifiers to know whether to add a table prefix</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">$this</span>-&gt;_track_aliases($val);

				<span class="hljs-keyword">$this</span>-&gt;qb_from[] = $val = <span class="hljs-keyword">$this</span>-&gt;protect_identifiers($val, <span class="hljs-keyword">TRUE</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">FALSE</span>);

				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching === <span class="hljs-keyword">TRUE</span>)
				{
					<span class="hljs-keyword">$this</span>-&gt;qb_cache_from[] = $val;
					<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists[] = <span class="hljs-string">'from'</span>;
				}
			}
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57"></a>
</div>
<div class="dox">
<div class="summary">
<p>JOIN</p>
</div>
<div class="body">
<p>Generates the JOIN portion of the query</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the join condition
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the type of join
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>whether not to try to escape identifiers
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">join</span><span class="hljs-params">($table, $cond, $type = <span class="hljs-string">''</span>, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($type !== <span class="hljs-string">''</span>)
		{
			$type = strtoupper(trim($type));

			<span class="hljs-keyword">if</span> ( ! in_array($type, <span class="hljs-keyword">array</span>(<span class="hljs-string">'LEFT'</span>, <span class="hljs-string">'RIGHT'</span>, <span class="hljs-string">'OUTER'</span>, <span class="hljs-string">'INNER'</span>, <span class="hljs-string">'LEFT OUTER'</span>, <span class="hljs-string">'RIGHT OUTER'</span>), <span class="hljs-keyword">TRUE</span>))
			{
				$type = <span class="hljs-string">''</span>;
			}
			<span class="hljs-keyword">else</span>
			{
				$type .= <span class="hljs-string">' '</span>;
			}
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58"></a>
</div>
<p>Extract any aliases that might exist. We use this information
in the protect_identifiers to know whether to add a table prefix</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">$this</span>-&gt;_track_aliases($table);

		is_bool($escape) <span class="hljs-keyword">OR</span> $escape = <span class="hljs-keyword">$this</span>-&gt;_protect_identifiers;

		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;_has_operator($cond))
		{
			$cond = <span class="hljs-string">' USING ('</span>.($escape ? <span class="hljs-keyword">$this</span>-&gt;escape_identifiers($cond) : $cond).<span class="hljs-string">')'</span>;
		}
		<span class="hljs-keyword">elseif</span> ($escape === <span class="hljs-keyword">FALSE</span>)
		{
			$cond = <span class="hljs-string">' ON '</span>.$cond;
		}
		<span class="hljs-keyword">else</span>
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59"></a>
</div>
<p>Split multiple conditions</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">if</span> (preg_match_all(<span class="hljs-string">'/\sAND\s|\sOR\s/i'</span>, $cond, $joints, PREG_OFFSET_CAPTURE))
			{
				$conditions = <span class="hljs-keyword">array</span>();
				$joints = $joints[<span class="hljs-number">0</span>];
				array_unshift($joints, <span class="hljs-keyword">array</span>(<span class="hljs-string">''</span>, <span class="hljs-number">0</span>));

				<span class="hljs-keyword">for</span> ($i = count($joints) - <span class="hljs-number">1</span>, $pos = strlen($cond); $i &gt;= <span class="hljs-number">0</span>; $i--)
				{
					$joints[$i][<span class="hljs-number">1</span>] += strlen($joints[$i][<span class="hljs-number">0</span>]); <span class="hljs-comment">// offset</span>
					$conditions[$i] = substr($cond, $joints[$i][<span class="hljs-number">1</span>], $pos - $joints[$i][<span class="hljs-number">1</span>]);
					$pos = $joints[$i][<span class="hljs-number">1</span>] - strlen($joints[$i][<span class="hljs-number">0</span>]);
					$joints[$i] = $joints[$i][<span class="hljs-number">0</span>];
				}
			}
			<span class="hljs-keyword">else</span>
			{
				$conditions = <span class="hljs-keyword">array</span>($cond);
				$joints = <span class="hljs-keyword">array</span>(<span class="hljs-string">''</span>);
			}

			$cond = <span class="hljs-string">' ON '</span>;
			<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count($conditions); $i &lt; $c; $i++)
			{
				$operator = <span class="hljs-keyword">$this</span>-&gt;_get_operator($conditions[$i]);
				$cond .= $joints[$i];
				$cond .= preg_match(<span class="hljs-string">"/(\(*)?([\[\]\w\.'-]+)"</span>.preg_quote($operator).<span class="hljs-string">"(.*)/i"</span>, $conditions[$i], $match)
					? $match[<span class="hljs-number">1</span>].<span class="hljs-keyword">$this</span>-&gt;protect_identifiers($match[<span class="hljs-number">2</span>]).$operator.<span class="hljs-keyword">$this</span>-&gt;protect_identifiers($match[<span class="hljs-number">3</span>])
					: $conditions[$i];
			}
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60"></a>
</div>
<p>Do we want to escape the table name?</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> ($escape === <span class="hljs-keyword">TRUE</span>)
		{
			$table = <span class="hljs-keyword">$this</span>-&gt;protect_identifiers($table, <span class="hljs-keyword">TRUE</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">FALSE</span>);
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61"></a>
</div>
<p>Assemble the JOIN statement</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">$this</span>-&gt;qb_join[] = $join = $type.<span class="hljs-string">'JOIN '</span>.$table.$cond;

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching === <span class="hljs-keyword">TRUE</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;qb_cache_join[] = $join;
			<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists[] = <span class="hljs-string">'join'</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63"></a>
</div>
<div class="dox">
<div class="summary">
<p>WHERE</p>
</div>
<div class="body">
<p>Generates the WHERE portion of the query.
Separates multiple calls with 'AND'.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">where</span><span class="hljs-params">($key, $value = NULL, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_wh(<span class="hljs-string">'qb_where'</span>, $key, $value, <span class="hljs-string">'AND '</span>, $escape);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65"></a>
</div>
<div class="dox">
<div class="summary">
<p>OR WHERE</p>
</div>
<div class="body">
<p>Generates the WHERE portion of the query.
Separates multiple calls with 'OR'.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">or_where</span><span class="hljs-params">($key, $value = NULL, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_wh(<span class="hljs-string">'qb_where'</span>, $key, $value, <span class="hljs-string">'OR '</span>, $escape);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67"></a>
</div>
<div class="dox">
<div class="summary">
<p>WHERE, HAVING</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$qb_key 'qb_where' or 'qb_having'
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$key
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$value
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$type
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_wh</span><span class="hljs-params">($qb_key, $key, $value = NULL, $type = <span class="hljs-string">'AND '</span>, $escape = NULL)</span>
	</span>{
		$qb_cache_key = ($qb_key === <span class="hljs-string">'qb_having'</span>) ? <span class="hljs-string">'qb_cache_having'</span> : <span class="hljs-string">'qb_cache_where'</span>;

		<span class="hljs-keyword">if</span> ( ! is_array($key))
		{
			$key = <span class="hljs-keyword">array</span>($key =&gt; $value);
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68"></a>
</div>
<p>If the escape value was not set will base it on the global setting</p>

        </td>
        <td class="code highlight">
          <pre class="php">		is_bool($escape) <span class="hljs-keyword">OR</span> $escape = <span class="hljs-keyword">$this</span>-&gt;_protect_identifiers;

		<span class="hljs-keyword">foreach</span> ($key <span class="hljs-keyword">as</span> $k =&gt; $v)
		{
			$prefix = (count(<span class="hljs-keyword">$this</span>-&gt;$qb_key) === <span class="hljs-number">0</span> &amp;&amp; count(<span class="hljs-keyword">$this</span>-&gt;$qb_cache_key) === <span class="hljs-number">0</span>)
				? <span class="hljs-keyword">$this</span>-&gt;_group_get_type(<span class="hljs-string">''</span>)
				: <span class="hljs-keyword">$this</span>-&gt;_group_get_type($type);

			<span class="hljs-keyword">if</span> ($v !== <span class="hljs-keyword">NULL</span>)
			{
				<span class="hljs-keyword">if</span> ($escape === <span class="hljs-keyword">TRUE</span>)
				{
					$v = <span class="hljs-keyword">$this</span>-&gt;escape($v);
				}

				<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;_has_operator($k))
				{
					$k .= <span class="hljs-string">' = '</span>;
				}
			}
			<span class="hljs-keyword">elseif</span> ( ! <span class="hljs-keyword">$this</span>-&gt;_has_operator($k))
			{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69"></a>
</div>
<p>value appears not to have been set, assign the test to IS NULL</p>

        </td>
        <td class="code highlight">
          <pre class="php">				$k .= <span class="hljs-string">' IS NULL'</span>;
			}
			<span class="hljs-keyword">elseif</span> (preg_match(<span class="hljs-string">'/\s*(!?=|&lt;&gt;|\sIS(?:\s+NOT)?\s)\s*$/i'</span>, $k, $match, PREG_OFFSET_CAPTURE))
			{
				$k = substr($k, <span class="hljs-number">0</span>, $match[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>]).($match[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>] === <span class="hljs-string">'='</span> ? <span class="hljs-string">' IS NULL'</span> : <span class="hljs-string">' IS NOT NULL'</span>);
			}

			${$qb_key} = <span class="hljs-keyword">array</span>(<span class="hljs-string">'condition'</span> =&gt; $prefix.$k, <span class="hljs-string">'value'</span> =&gt; $v, <span class="hljs-string">'escape'</span> =&gt; $escape);
			<span class="hljs-keyword">$this</span>-&gt;{$qb_key}[] = ${$qb_key};
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;{$qb_cache_key}[] = ${$qb_key};
				<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists[] = substr($qb_key, <span class="hljs-number">3</span>);
			}

		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71"></a>
</div>
<div class="dox">
<div class="summary">
<p>WHERE IN</p>
</div>
<div class="body">
<p>Generates a WHERE field IN('item', 'item') SQL query,
joined with 'AND' if appropriate.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$key The field to search
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$values The values searched on
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">where_in</span><span class="hljs-params">($key = NULL, $values = NULL, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_where_in($key, $values, <span class="hljs-keyword">FALSE</span>, <span class="hljs-string">'AND '</span>, $escape);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73"></a>
</div>
<div class="dox">
<div class="summary">
<p>OR WHERE IN</p>
</div>
<div class="body">
<p>Generates a WHERE field IN('item', 'item') SQL query,
joined with 'OR' if appropriate.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$key The field to search
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$values The values searched on
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">or_where_in</span><span class="hljs-params">($key = NULL, $values = NULL, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_where_in($key, $values, <span class="hljs-keyword">FALSE</span>, <span class="hljs-string">'OR '</span>, $escape);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75"></a>
</div>
<div class="dox">
<div class="summary">
<p>WHERE NOT IN</p>
</div>
<div class="body">
<p>Generates a WHERE field NOT IN('item', 'item') SQL query,
joined with 'AND' if appropriate.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$key The field to search
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$values The values searched on
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">where_not_in</span><span class="hljs-params">($key = NULL, $values = NULL, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_where_in($key, $values, <span class="hljs-keyword">TRUE</span>, <span class="hljs-string">'AND '</span>, $escape);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-77" id="section-77"></a>
</div>
<div class="dox">
<div class="summary">
<p>OR WHERE NOT IN</p>
</div>
<div class="body">
<p>Generates a WHERE field NOT IN('item', 'item') SQL query,
joined with 'OR' if appropriate.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$key The field to search
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$values The values searched on
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">or_where_not_in</span><span class="hljs-params">($key = NULL, $values = NULL, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_where_in($key, $values, <span class="hljs-keyword">TRUE</span>, <span class="hljs-string">'OR '</span>, $escape);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79"></a>
</div>
<div class="dox">
<div class="summary">
<p>Internal WHERE IN</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$key The field to search
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$values The values searched on
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$not If the statement would be IN or NOT IN
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$type
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_where_in</span><span class="hljs-params">($key = NULL, $values = NULL, $not = FALSE, $type = <span class="hljs-string">'AND '</span>, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($key === <span class="hljs-keyword">NULL</span> <span class="hljs-keyword">OR</span> $values === <span class="hljs-keyword">NULL</span>)
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
		}

		<span class="hljs-keyword">if</span> ( ! is_array($values))
		{
			$values = <span class="hljs-keyword">array</span>($values);
		}

		is_bool($escape) <span class="hljs-keyword">OR</span> $escape = <span class="hljs-keyword">$this</span>-&gt;_protect_identifiers;

		$not = ($not) ? <span class="hljs-string">' NOT'</span> : <span class="hljs-string">''</span>;

		<span class="hljs-keyword">if</span> ($escape === <span class="hljs-keyword">TRUE</span>)
		{
			$where_in = <span class="hljs-keyword">array</span>();
			<span class="hljs-keyword">foreach</span> ($values <span class="hljs-keyword">as</span> $value)
			{
				$where_in[] = <span class="hljs-keyword">$this</span>-&gt;escape($value);
			}
		}
		<span class="hljs-keyword">else</span>
		{
			$where_in = array_values($values);
		}

		$prefix = (count(<span class="hljs-keyword">$this</span>-&gt;qb_where) === <span class="hljs-number">0</span> &amp;&amp; count(<span class="hljs-keyword">$this</span>-&gt;qb_cache_where) === <span class="hljs-number">0</span>)
			? <span class="hljs-keyword">$this</span>-&gt;_group_get_type(<span class="hljs-string">''</span>)
			: <span class="hljs-keyword">$this</span>-&gt;_group_get_type($type);

		$where_in = <span class="hljs-keyword">array</span>(
			<span class="hljs-string">'condition'</span> =&gt; $prefix.$key.$not.<span class="hljs-string">' IN('</span>.implode(<span class="hljs-string">', '</span>, $where_in).<span class="hljs-string">')'</span>,
			<span class="hljs-string">'value'</span> =&gt; <span class="hljs-keyword">NULL</span>,
			<span class="hljs-string">'escape'</span> =&gt; $escape
		);

		<span class="hljs-keyword">$this</span>-&gt;qb_where[] = $where_in;
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching === <span class="hljs-keyword">TRUE</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;qb_cache_where[] = $where_in;
			<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists[] = <span class="hljs-string">'where'</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81"></a>
</div>
<div class="dox">
<div class="summary">
<p>LIKE</p>
</div>
<div class="body">
<p>Generates a %LIKE% portion of the query.
Separates multiple calls with 'AND'.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$field
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$match
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$side
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">like</span><span class="hljs-params">($field, $match = <span class="hljs-string">''</span>, $side = <span class="hljs-string">'both'</span>, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_like($field, $match, <span class="hljs-string">'AND '</span>, $side, <span class="hljs-string">''</span>, $escape);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83"></a>
</div>
<div class="dox">
<div class="summary">
<p>NOT LIKE</p>
</div>
<div class="body">
<p>Generates a NOT LIKE portion of the query.
Separates multiple calls with 'AND'.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$field
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$match
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$side
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">not_like</span><span class="hljs-params">($field, $match = <span class="hljs-string">''</span>, $side = <span class="hljs-string">'both'</span>, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_like($field, $match, <span class="hljs-string">'AND '</span>, $side, <span class="hljs-string">'NOT'</span>, $escape);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-84" id="section-84"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-85" id="section-85"></a>
</div>
<div class="dox">
<div class="summary">
<p>OR LIKE</p>
</div>
<div class="body">
<p>Generates a %LIKE% portion of the query.
Separates multiple calls with 'OR'.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$field
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$match
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$side
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">or_like</span><span class="hljs-params">($field, $match = <span class="hljs-string">''</span>, $side = <span class="hljs-string">'both'</span>, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_like($field, $match, <span class="hljs-string">'OR '</span>, $side, <span class="hljs-string">''</span>, $escape);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-86" id="section-86"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-87" id="section-87"></a>
</div>
<div class="dox">
<div class="summary">
<p>OR NOT LIKE</p>
</div>
<div class="body">
<p>Generates a NOT LIKE portion of the query.
Separates multiple calls with 'OR'.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$field
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$match
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$side
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">or_not_like</span><span class="hljs-params">($field, $match = <span class="hljs-string">''</span>, $side = <span class="hljs-string">'both'</span>, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_like($field, $match, <span class="hljs-string">'OR '</span>, $side, <span class="hljs-string">'NOT'</span>, $escape);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-88" id="section-88"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-89" id="section-89"></a>
</div>
<div class="dox">
<div class="summary">
<p>Internal LIKE</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$field
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$match
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$type
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$side
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$not
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_like</span><span class="hljs-params">($field, $match = <span class="hljs-string">''</span>, $type = <span class="hljs-string">'AND '</span>, $side = <span class="hljs-string">'both'</span>, $not = <span class="hljs-string">''</span>, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! is_array($field))
		{
			$field = <span class="hljs-keyword">array</span>($field =&gt; $match);
		}

		is_bool($escape) <span class="hljs-keyword">OR</span> $escape = <span class="hljs-keyword">$this</span>-&gt;_protect_identifiers;
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-90" id="section-90"></a>
</div>
<p>lowercase $side in case somebody writes e.g. 'BEFORE' instead of 'before' (doh)</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$side = strtolower($side);

		<span class="hljs-keyword">foreach</span> ($field <span class="hljs-keyword">as</span> $k =&gt; $v)
		{
			$prefix = (count(<span class="hljs-keyword">$this</span>-&gt;qb_where) === <span class="hljs-number">0</span> &amp;&amp; count(<span class="hljs-keyword">$this</span>-&gt;qb_cache_where) === <span class="hljs-number">0</span>)
				? <span class="hljs-keyword">$this</span>-&gt;_group_get_type(<span class="hljs-string">''</span>) : <span class="hljs-keyword">$this</span>-&gt;_group_get_type($type);

			<span class="hljs-keyword">if</span> ($escape === <span class="hljs-keyword">TRUE</span>)
			{
				$v = <span class="hljs-keyword">$this</span>-&gt;escape_like_str($v);
			}

			<span class="hljs-keyword">switch</span> ($side)
			{
				<span class="hljs-keyword">case</span> <span class="hljs-string">'none'</span>:
					$v = <span class="hljs-string">"'{$v}'"</span>;
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> <span class="hljs-string">'before'</span>:
					$v = <span class="hljs-string">"'%{$v}'"</span>;
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> <span class="hljs-string">'after'</span>:
					$v = <span class="hljs-string">"'{$v}%'"</span>;
					<span class="hljs-keyword">break</span>;
				<span class="hljs-keyword">case</span> <span class="hljs-string">'both'</span>:
				<span class="hljs-keyword">default</span>:
					$v = <span class="hljs-string">"'%{$v}%'"</span>;
					<span class="hljs-keyword">break</span>;
			}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-91" id="section-91"></a>
</div>
<p>some platforms require an escape sequence definition for LIKE wildcards</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">if</span> ($escape === <span class="hljs-keyword">TRUE</span> &amp;&amp; <span class="hljs-keyword">$this</span>-&gt;_like_escape_str !== <span class="hljs-string">''</span>)
			{
				$v .= sprintf(<span class="hljs-keyword">$this</span>-&gt;_like_escape_str, <span class="hljs-keyword">$this</span>-&gt;_like_escape_chr);
			}

			$qb_where = <span class="hljs-keyword">array</span>(<span class="hljs-string">'condition'</span> =&gt; <span class="hljs-string">"{$prefix} {$k} {$not} LIKE {$v}"</span>, <span class="hljs-string">'value'</span> =&gt; <span class="hljs-keyword">NULL</span>, <span class="hljs-string">'escape'</span> =&gt; $escape);
			<span class="hljs-keyword">$this</span>-&gt;qb_where[] = $qb_where;
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;qb_cache_where[] = $qb_where;
				<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists[] = <span class="hljs-string">'where'</span>;
			}
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-92" id="section-92"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-93" id="section-93"></a>
</div>
<div class="dox">
<div class="summary">
<p>Starts a query group.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$not (Internal use only)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$type (Internal use only)
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">group_start</span><span class="hljs-params">($not = <span class="hljs-string">''</span>, $type = <span class="hljs-string">'AND '</span>)</span>
	</span>{
		$type = <span class="hljs-keyword">$this</span>-&gt;_group_get_type($type);

		<span class="hljs-keyword">$this</span>-&gt;qb_where_group_started = <span class="hljs-keyword">TRUE</span>;
		$prefix = (count(<span class="hljs-keyword">$this</span>-&gt;qb_where) === <span class="hljs-number">0</span> &amp;&amp; count(<span class="hljs-keyword">$this</span>-&gt;qb_cache_where) === <span class="hljs-number">0</span>) ? <span class="hljs-string">''</span> : $type;
		$where = <span class="hljs-keyword">array</span>(
			<span class="hljs-string">'condition'</span> =&gt; $prefix.$not.str_repeat(<span class="hljs-string">' '</span>, ++<span class="hljs-keyword">$this</span>-&gt;qb_where_group_count).<span class="hljs-string">' ('</span>,
			<span class="hljs-string">'value'</span> =&gt; <span class="hljs-keyword">NULL</span>,
			<span class="hljs-string">'escape'</span> =&gt; <span class="hljs-keyword">FALSE</span>
		);

		<span class="hljs-keyword">$this</span>-&gt;qb_where[] = $where;
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching)
		{
			<span class="hljs-keyword">$this</span>-&gt;qb_cache_where[] = $where;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-94" id="section-94"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-95" id="section-95"></a>
</div>
<div class="dox">
<div class="summary">
<p>Starts a query group, but ORs the group</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">or_group_start</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;group_start(<span class="hljs-string">''</span>, <span class="hljs-string">'OR '</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-96" id="section-96"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-97" id="section-97"></a>
</div>
<div class="dox">
<div class="summary">
<p>Starts a query group, but NOTs the group</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">not_group_start</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;group_start(<span class="hljs-string">'NOT '</span>, <span class="hljs-string">'AND '</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-98" id="section-98"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-99" id="section-99"></a>
</div>
<div class="dox">
<div class="summary">
<p>Starts a query group, but OR NOTs the group</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">or_not_group_start</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;group_start(<span class="hljs-string">'NOT '</span>, <span class="hljs-string">'OR '</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-100" id="section-100"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-101" id="section-101"></a>
</div>
<div class="dox">
<div class="summary">
<p>Ends a query group</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">group_end</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;qb_where_group_started = <span class="hljs-keyword">FALSE</span>;
		$where = <span class="hljs-keyword">array</span>(
			<span class="hljs-string">'condition'</span> =&gt; str_repeat(<span class="hljs-string">' '</span>, <span class="hljs-keyword">$this</span>-&gt;qb_where_group_count--).<span class="hljs-string">')'</span>,
			<span class="hljs-string">'value'</span> =&gt; <span class="hljs-keyword">NULL</span>,
			<span class="hljs-string">'escape'</span> =&gt; <span class="hljs-keyword">FALSE</span>
		);

		<span class="hljs-keyword">$this</span>-&gt;qb_where[] = $where;
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching)
		{
			<span class="hljs-keyword">$this</span>-&gt;qb_cache_where[] = $where;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-102" id="section-102"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-103" id="section-103"></a>
</div>
<div class="dox">
<div class="summary">
<p>Group_get_type</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$type
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_group_get_type</span><span class="hljs-params">($type)</span>
	</span>{
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_where_group_started)
		{
			$type = <span class="hljs-string">''</span>;
			<span class="hljs-keyword">$this</span>-&gt;qb_where_group_started = <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">return</span> $type;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-104" id="section-104"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-105" id="section-105"></a>
</div>
<div class="dox">
<div class="summary">
<p>GROUP BY</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$by
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">group_by</span><span class="hljs-params">($by, $escape = NULL)</span>
	</span>{
		is_bool($escape) <span class="hljs-keyword">OR</span> $escape = <span class="hljs-keyword">$this</span>-&gt;_protect_identifiers;

		<span class="hljs-keyword">if</span> (is_string($by))
		{
			$by = ($escape === <span class="hljs-keyword">TRUE</span>)
				? explode(<span class="hljs-string">','</span>, $by)
				: <span class="hljs-keyword">array</span>($by);
		}

		<span class="hljs-keyword">foreach</span> ($by <span class="hljs-keyword">as</span> $val)
		{
			$val = trim($val);

			<span class="hljs-keyword">if</span> ($val !== <span class="hljs-string">''</span>)
			{
				$val = <span class="hljs-keyword">array</span>(<span class="hljs-string">'field'</span> =&gt; $val, <span class="hljs-string">'escape'</span> =&gt; $escape);

				<span class="hljs-keyword">$this</span>-&gt;qb_groupby[] = $val;
				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching === <span class="hljs-keyword">TRUE</span>)
				{
					<span class="hljs-keyword">$this</span>-&gt;qb_cache_groupby[] = $val;
					<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists[] = <span class="hljs-string">'groupby'</span>;
				}
			}
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-106" id="section-106"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-107" id="section-107"></a>
</div>
<div class="dox">
<div class="summary">
<p>HAVING</p>
</div>
<div class="body">
<p>Separates multiple calls with 'AND'.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$key
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$value
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">having</span><span class="hljs-params">($key, $value = NULL, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_wh(<span class="hljs-string">'qb_having'</span>, $key, $value, <span class="hljs-string">'AND '</span>, $escape);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-108" id="section-108"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-109" id="section-109"></a>
</div>
<div class="dox">
<div class="summary">
<p>OR HAVING</p>
</div>
<div class="body">
<p>Separates multiple calls with 'OR'.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$key
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$value
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">or_having</span><span class="hljs-params">($key, $value = NULL, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_wh(<span class="hljs-string">'qb_having'</span>, $key, $value, <span class="hljs-string">'OR '</span>, $escape);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-110" id="section-110"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-111" id="section-111"></a>
</div>
<div class="dox">
<div class="summary">
<p>ORDER BY</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$orderby
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$direction ASC, DESC or RANDOM
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">order_by</span><span class="hljs-params">($orderby, $direction = <span class="hljs-string">''</span>, $escape = NULL)</span>
	</span>{
		$direction = strtoupper(trim($direction));

		<span class="hljs-keyword">if</span> ($direction === <span class="hljs-string">'RANDOM'</span>)
		{
			$direction = <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-112" id="section-112"></a>
</div>
<p>Do we have a seed value?</p>

        </td>
        <td class="code highlight">
          <pre class="php">			$orderby = ctype_digit((string) $orderby)
				? sprintf(<span class="hljs-keyword">$this</span>-&gt;_random_keyword[<span class="hljs-number">1</span>], $orderby)
				: <span class="hljs-keyword">$this</span>-&gt;_random_keyword[<span class="hljs-number">0</span>];
		}
		<span class="hljs-keyword">elseif</span> (<span class="hljs-keyword">empty</span>($orderby))
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
		}
		<span class="hljs-keyword">elseif</span> ($direction !== <span class="hljs-string">''</span>)
		{
			$direction = in_array($direction, <span class="hljs-keyword">array</span>(<span class="hljs-string">'ASC'</span>, <span class="hljs-string">'DESC'</span>), <span class="hljs-keyword">TRUE</span>) ? <span class="hljs-string">' '</span>.$direction : <span class="hljs-string">''</span>;
		}

		is_bool($escape) <span class="hljs-keyword">OR</span> $escape = <span class="hljs-keyword">$this</span>-&gt;_protect_identifiers;

		<span class="hljs-keyword">if</span> ($escape === <span class="hljs-keyword">FALSE</span>)
		{
			$qb_orderby[] = <span class="hljs-keyword">array</span>(<span class="hljs-string">'field'</span> =&gt; $orderby, <span class="hljs-string">'direction'</span> =&gt; $direction, <span class="hljs-string">'escape'</span> =&gt; <span class="hljs-keyword">FALSE</span>);
		}
		<span class="hljs-keyword">else</span>
		{
			$qb_orderby = <span class="hljs-keyword">array</span>();
			<span class="hljs-keyword">foreach</span> (explode(<span class="hljs-string">','</span>, $orderby) <span class="hljs-keyword">as</span> $field)
			{
				$qb_orderby[] = ($direction === <span class="hljs-string">''</span> &amp;&amp; preg_match(<span class="hljs-string">'/\s+(ASC|DESC)$/i'</span>, rtrim($field), $match, PREG_OFFSET_CAPTURE))
					? <span class="hljs-keyword">array</span>(<span class="hljs-string">'field'</span> =&gt; ltrim(substr($field, <span class="hljs-number">0</span>, $match[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>])), <span class="hljs-string">'direction'</span> =&gt; <span class="hljs-string">' '</span>.$match[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>], <span class="hljs-string">'escape'</span> =&gt; <span class="hljs-keyword">TRUE</span>)
					: <span class="hljs-keyword">array</span>(<span class="hljs-string">'field'</span> =&gt; trim($field), <span class="hljs-string">'direction'</span> =&gt; $direction, <span class="hljs-string">'escape'</span> =&gt; <span class="hljs-keyword">TRUE</span>);
			}
		}

		<span class="hljs-keyword">$this</span>-&gt;qb_orderby = array_merge(<span class="hljs-keyword">$this</span>-&gt;qb_orderby, $qb_orderby);
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching === <span class="hljs-keyword">TRUE</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;qb_cache_orderby = array_merge(<span class="hljs-keyword">$this</span>-&gt;qb_cache_orderby, $qb_orderby);
			<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists[] = <span class="hljs-string">'orderby'</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-113" id="section-113"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-114" id="section-114"></a>
</div>
<div class="dox">
<div class="summary">
<p>LIMIT</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$value LIMIT value
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$offset OFFSET value
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">limit</span><span class="hljs-params">($value, $offset = <span class="hljs-number">0</span>)</span>
	</span>{
		is_null($value) <span class="hljs-keyword">OR</span> <span class="hljs-keyword">$this</span>-&gt;qb_limit = (int) $value;
		<span class="hljs-keyword">empty</span>($offset) <span class="hljs-keyword">OR</span> <span class="hljs-keyword">$this</span>-&gt;qb_offset = (int) $offset;

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-115" id="section-115"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-116" id="section-116"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sets the OFFSET value</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$offset OFFSET value
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">offset</span><span class="hljs-params">($offset)</span>
	</span>{
		<span class="hljs-keyword">empty</span>($offset) <span class="hljs-keyword">OR</span> <span class="hljs-keyword">$this</span>-&gt;qb_offset = (int) $offset;
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-117" id="section-117"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-118" id="section-118"></a>
</div>
<div class="dox">
<div class="summary">
<p>LIMIT string</p>
</div>
<div class="body">
<p>Generates a platform-specific LIMIT clause.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$sql SQL Query
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_limit</span><span class="hljs-params">($sql)</span>
	</span>{
		<span class="hljs-keyword">return</span> $sql.<span class="hljs-string">' LIMIT '</span>.(<span class="hljs-keyword">$this</span>-&gt;qb_offset ? <span class="hljs-keyword">$this</span>-&gt;qb_offset.<span class="hljs-string">', '</span> : <span class="hljs-string">''</span>).(int) <span class="hljs-keyword">$this</span>-&gt;qb_limit;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-119" id="section-119"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-120" id="section-120"></a>
</div>
<div class="dox">
<div class="summary">
<p>The &quot;set&quot; function.</p>
</div>
<div class="body">
<p>Allows key/value pairs to be set for inserting or updating</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">set</span><span class="hljs-params">($key, $value = <span class="hljs-string">''</span>, $escape = NULL)</span>
	</span>{
		$key = <span class="hljs-keyword">$this</span>-&gt;_object_to_array($key);

		<span class="hljs-keyword">if</span> ( ! is_array($key))
		{
			$key = <span class="hljs-keyword">array</span>($key =&gt; $value);
		}

		is_bool($escape) <span class="hljs-keyword">OR</span> $escape = <span class="hljs-keyword">$this</span>-&gt;_protect_identifiers;

		<span class="hljs-keyword">foreach</span> ($key <span class="hljs-keyword">as</span> $k =&gt; $v)
		{
			<span class="hljs-keyword">$this</span>-&gt;qb_set[<span class="hljs-keyword">$this</span>-&gt;protect_identifiers($k, <span class="hljs-keyword">FALSE</span>, $escape)] = ($escape)
				? <span class="hljs-keyword">$this</span>-&gt;escape($v) : $v;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-121" id="section-121"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-122" id="section-122"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get SELECT query string</p>
</div>
<div class="body">
<p>Compiles a SELECT query string and returns the sql.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table name to select from (optional)
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>TRUE: resets QB values; FALSE: leave QB values alone
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_compiled_select</span><span class="hljs-params">($table = <span class="hljs-string">''</span>, $reset = TRUE)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($table !== <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;_track_aliases($table);
			<span class="hljs-keyword">$this</span>-&gt;from($table);
		}

		$select = <span class="hljs-keyword">$this</span>-&gt;_compile_select();

		<span class="hljs-keyword">if</span> ($reset === <span class="hljs-keyword">TRUE</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;_reset_select();
		}

		<span class="hljs-keyword">return</span> $select;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-123" id="section-123"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-124" id="section-124"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get</p>
</div>
<div class="body">
<p>Compiles the select statement based on the other functions called
and runs the query</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the limit clause
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the offset clause
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_result
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get</span><span class="hljs-params">($table = <span class="hljs-string">''</span>, $limit = NULL, $offset = NULL)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($table !== <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;_track_aliases($table);
			<span class="hljs-keyword">$this</span>-&gt;from($table);
		}

		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">empty</span>($limit))
		{
			<span class="hljs-keyword">$this</span>-&gt;limit($limit, $offset);
		}

		$result = <span class="hljs-keyword">$this</span>-&gt;query(<span class="hljs-keyword">$this</span>-&gt;_compile_select());
		<span class="hljs-keyword">$this</span>-&gt;_reset_select();
		<span class="hljs-keyword">return</span> $result;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-125" id="section-125"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-126" id="section-126"></a>
</div>
<div class="dox">
<div class="summary">
<p>&quot;Count All Results&quot; query</p>
</div>
<div class="body">
<p>Generates a platform-specific query string that counts all records
returned by an Query Builder query.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>the reset clause
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>int
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">count_all_results</span><span class="hljs-params">($table = <span class="hljs-string">''</span>, $reset = TRUE)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($table !== <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;_track_aliases($table);
			<span class="hljs-keyword">$this</span>-&gt;from($table);
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-127" id="section-127"></a>
</div>
<p>ORDER BY usage is often problematic here (most notably
on Microsoft SQL Server) and ultimately unnecessary
for selecting COUNT(*) ...</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$qb_orderby       = <span class="hljs-keyword">$this</span>-&gt;qb_orderby;
		$qb_cache_orderby = <span class="hljs-keyword">$this</span>-&gt;qb_cache_orderby;
		<span class="hljs-keyword">$this</span>-&gt;qb_orderby = <span class="hljs-keyword">$this</span>-&gt;qb_cache_orderby = <span class="hljs-keyword">array</span>();

		$result = (<span class="hljs-keyword">$this</span>-&gt;qb_distinct === <span class="hljs-keyword">TRUE</span> <span class="hljs-keyword">OR</span> ! <span class="hljs-keyword">empty</span>(<span class="hljs-keyword">$this</span>-&gt;qb_groupby) <span class="hljs-keyword">OR</span> ! <span class="hljs-keyword">empty</span>(<span class="hljs-keyword">$this</span>-&gt;qb_cache_groupby) <span class="hljs-keyword">OR</span> <span class="hljs-keyword">$this</span>-&gt;qb_limit <span class="hljs-keyword">OR</span> <span class="hljs-keyword">$this</span>-&gt;qb_offset)
			? <span class="hljs-keyword">$this</span>-&gt;query(<span class="hljs-keyword">$this</span>-&gt;_count_string.<span class="hljs-keyword">$this</span>-&gt;protect_identifiers(<span class="hljs-string">'numrows'</span>).<span class="hljs-string">"\nFROM (\n"</span>.<span class="hljs-keyword">$this</span>-&gt;_compile_select().<span class="hljs-string">"\n) CI_count_all_results"</span>)
			: <span class="hljs-keyword">$this</span>-&gt;query(<span class="hljs-keyword">$this</span>-&gt;_compile_select(<span class="hljs-keyword">$this</span>-&gt;_count_string.<span class="hljs-keyword">$this</span>-&gt;protect_identifiers(<span class="hljs-string">'numrows'</span>)));

		<span class="hljs-keyword">if</span> ($reset === <span class="hljs-keyword">TRUE</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;_reset_select();
		}
		<span class="hljs-keyword">else</span>
		{
			<span class="hljs-keyword">$this</span>-&gt;qb_orderby       = $qb_orderby;
			<span class="hljs-keyword">$this</span>-&gt;qb_cache_orderby = $qb_cache_orderby;
		}

		<span class="hljs-keyword">if</span> ($result-&gt;num_rows() === <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
		}

		$row = $result-&gt;row();
		<span class="hljs-keyword">return</span> (int) $row-&gt;numrows;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-128" id="section-128"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-129" id="section-129"></a>
</div>
<div class="dox">
<div class="summary">
<p>get_where()</p>
</div>
<div class="body">
<p>Allows the where clause, limit and offset to be added directly</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$table
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$where
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$limit
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$offset
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_result
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_where</span><span class="hljs-params">($table = <span class="hljs-string">''</span>, $where = NULL, $limit = NULL, $offset = NULL)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($table !== <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;from($table);
		}

		<span class="hljs-keyword">if</span> ($where !== <span class="hljs-keyword">NULL</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;where($where);
		}

		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">empty</span>($limit))
		{
			<span class="hljs-keyword">$this</span>-&gt;limit($limit, $offset);
		}

		$result = <span class="hljs-keyword">$this</span>-&gt;query(<span class="hljs-keyword">$this</span>-&gt;_compile_select());
		<span class="hljs-keyword">$this</span>-&gt;_reset_select();
		<span class="hljs-keyword">return</span> $result;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-130" id="section-130"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-131" id="section-131"></a>
</div>
<div class="dox">
<div class="summary">
<p>Insert_Batch</p>
</div>
<div class="body">
<p>Compiles batch insert strings and runs the queries</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$table Table to insert into
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$set An associative array of insert values
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape Whether to escape values and identifiers
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>int Number of rows inserted or FALSE on failure
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">insert_batch</span><span class="hljs-params">($table, $set = NULL, $escape = NULL, $batch_size = <span class="hljs-number">100</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($set === <span class="hljs-keyword">NULL</span>)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>(<span class="hljs-keyword">$this</span>-&gt;qb_set))
			{
				<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_use_set'</span>) : <span class="hljs-keyword">FALSE</span>;
			}
		}
		<span class="hljs-keyword">else</span>
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>($set))
			{
				<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'insert_batch() called with no data'</span>) : <span class="hljs-keyword">FALSE</span>;
			}

			<span class="hljs-keyword">$this</span>-&gt;set_insert_batch($set, <span class="hljs-string">''</span>, $escape);
		}

		<span class="hljs-keyword">if</span> (strlen($table) === <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>]))
			{
				<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_set_table'</span>) : <span class="hljs-keyword">FALSE</span>;
			}

			$table = <span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>];
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-132" id="section-132"></a>
</div>
<p>Batch this baby</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$affected_rows = <span class="hljs-number">0</span>;
		<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $total = count(<span class="hljs-keyword">$this</span>-&gt;qb_set); $i &lt; $total; $i += $batch_size)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;query(<span class="hljs-keyword">$this</span>-&gt;_insert_batch(<span class="hljs-keyword">$this</span>-&gt;protect_identifiers($table, <span class="hljs-keyword">TRUE</span>, $escape, <span class="hljs-keyword">FALSE</span>), <span class="hljs-keyword">$this</span>-&gt;qb_keys, array_slice(<span class="hljs-keyword">$this</span>-&gt;qb_set, $i, $batch_size))))
			{
				$affected_rows += <span class="hljs-keyword">$this</span>-&gt;affected_rows();
			}
		}

		<span class="hljs-keyword">$this</span>-&gt;_reset_write();
		<span class="hljs-keyword">return</span> $affected_rows;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-133" id="section-133"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-134" id="section-134"></a>
</div>
<div class="dox">
<div class="summary">
<p>Insert batch statement</p>
</div>
<div class="body">
<p>Generates a platform-specific insert string from the supplied data.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$table Table name
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$keys INSERT keys
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$values INSERT values
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_insert_batch</span><span class="hljs-params">($table, $keys, $values)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">'INSERT INTO '</span>.$table.<span class="hljs-string">' ('</span>.implode(<span class="hljs-string">', '</span>, $keys).<span class="hljs-string">') VALUES '</span>.implode(<span class="hljs-string">', '</span>, $values);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-135" id="section-135"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-136" id="section-136"></a>
</div>
<div class="dox">
<div class="summary">
<p>The &quot;set_insert_batch&quot; function.  Allows key/value pairs to be set for batch inserts</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">set_insert_batch</span><span class="hljs-params">($key, $value = <span class="hljs-string">''</span>, $escape = NULL)</span>
	</span>{
		$key = <span class="hljs-keyword">$this</span>-&gt;_object_to_array_batch($key);

		<span class="hljs-keyword">if</span> ( ! is_array($key))
		{
			$key = <span class="hljs-keyword">array</span>($key =&gt; $value);
		}

		is_bool($escape) <span class="hljs-keyword">OR</span> $escape = <span class="hljs-keyword">$this</span>-&gt;_protect_identifiers;

		$keys = array_keys(<span class="hljs-keyword">$this</span>-&gt;_object_to_array(reset($key)));
		sort($keys);

		<span class="hljs-keyword">foreach</span> ($key <span class="hljs-keyword">as</span> $row)
		{
			$row = <span class="hljs-keyword">$this</span>-&gt;_object_to_array($row);
			<span class="hljs-keyword">if</span> (count(array_diff($keys, array_keys($row))) &gt; <span class="hljs-number">0</span> <span class="hljs-keyword">OR</span> count(array_diff(array_keys($row), $keys)) &gt; <span class="hljs-number">0</span>)
			{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-137" id="section-137"></a>
</div>
<p>batch function above returns an error on an empty array</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">$this</span>-&gt;qb_set[] = <span class="hljs-keyword">array</span>();
				<span class="hljs-keyword">return</span>;
			}

			ksort($row); <span class="hljs-comment">// puts $row in the same order as our keys</span>

			<span class="hljs-keyword">if</span> ($escape !== <span class="hljs-keyword">FALSE</span>)
			{
				$clean = <span class="hljs-keyword">array</span>();
				<span class="hljs-keyword">foreach</span> ($row <span class="hljs-keyword">as</span> $value)
				{
					$clean[] = <span class="hljs-keyword">$this</span>-&gt;escape($value);
				}

				$row = $clean;
			}

			<span class="hljs-keyword">$this</span>-&gt;qb_set[] = <span class="hljs-string">'('</span>.implode(<span class="hljs-string">','</span>, $row).<span class="hljs-string">')'</span>;
		}

		<span class="hljs-keyword">foreach</span> ($keys <span class="hljs-keyword">as</span> $k)
		{
			<span class="hljs-keyword">$this</span>-&gt;qb_keys[] = <span class="hljs-keyword">$this</span>-&gt;protect_identifiers($k, <span class="hljs-keyword">FALSE</span>, $escape);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-138" id="section-138"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-139" id="section-139"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get INSERT query string</p>
</div>
<div class="body">
<p>Compiles an insert query and returns the sql</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table to insert into
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>TRUE: reset QB values; FALSE: leave QB values alone
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_compiled_insert</span><span class="hljs-params">($table = <span class="hljs-string">''</span>, $reset = TRUE)</span>
	</span>{
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;_validate_insert($table) === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		$sql = <span class="hljs-keyword">$this</span>-&gt;_insert(
			<span class="hljs-keyword">$this</span>-&gt;protect_identifiers(
				<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>], <span class="hljs-keyword">TRUE</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">FALSE</span>
			),
			array_keys(<span class="hljs-keyword">$this</span>-&gt;qb_set),
			array_values(<span class="hljs-keyword">$this</span>-&gt;qb_set)
		);

		<span class="hljs-keyword">if</span> ($reset === <span class="hljs-keyword">TRUE</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;_reset_write();
		}

		<span class="hljs-keyword">return</span> $sql;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-140" id="section-140"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-141" id="section-141"></a>
</div>
<div class="dox">
<div class="summary">
<p>Insert</p>
</div>
<div class="body">
<p>Compiles an insert string and runs the query</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table to insert data into
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>an associative array of insert values
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$escape Whether to escape values and identifiers
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool TRUE on success, FALSE on failure
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">insert</span><span class="hljs-params">($table = <span class="hljs-string">''</span>, $set = NULL, $escape = NULL)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($set !== <span class="hljs-keyword">NULL</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;set($set, <span class="hljs-string">''</span>, $escape);
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;_validate_insert($table) === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		$sql = <span class="hljs-keyword">$this</span>-&gt;_insert(
			<span class="hljs-keyword">$this</span>-&gt;protect_identifiers(
				<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>], <span class="hljs-keyword">TRUE</span>, $escape, <span class="hljs-keyword">FALSE</span>
			),
			array_keys(<span class="hljs-keyword">$this</span>-&gt;qb_set),
			array_values(<span class="hljs-keyword">$this</span>-&gt;qb_set)
		);

		<span class="hljs-keyword">$this</span>-&gt;_reset_write();
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;query($sql);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-142" id="section-142"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-143" id="section-143"></a>
</div>
<div class="dox">
<div class="summary">
<p>Validate Insert</p>
</div>
<div class="body">
<p>This method is used by both insert() and get_compiled_insert() to
validate that the there data is actually being set and that table
has been chosen to be inserted into.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table to insert data into
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_validate_insert</span><span class="hljs-params">($table = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;qb_set) === <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_use_set'</span>) : <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">if</span> ($table !== <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>] = $table;
		}
		<span class="hljs-keyword">elseif</span> ( ! <span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>]))
		{
			<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_set_table'</span>) : <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-144" id="section-144"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-145" id="section-145"></a>
</div>
<div class="dox">
<div class="summary">
<p>Replace</p>
</div>
<div class="body">
<p>Compiles an replace into string and runs the query</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table to replace data into
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>an associative array of insert values
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool TRUE on success, FALSE on failure
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">replace</span><span class="hljs-params">($table = <span class="hljs-string">''</span>, $set = NULL)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($set !== <span class="hljs-keyword">NULL</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;set($set);
		}

		<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;qb_set) === <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_use_set'</span>) : <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">if</span> ($table === <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>]))
			{
				<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_set_table'</span>) : <span class="hljs-keyword">FALSE</span>;
			}

			$table = <span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>];
		}

		$sql = <span class="hljs-keyword">$this</span>-&gt;_replace(<span class="hljs-keyword">$this</span>-&gt;protect_identifiers($table, <span class="hljs-keyword">TRUE</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">FALSE</span>), array_keys(<span class="hljs-keyword">$this</span>-&gt;qb_set), array_values(<span class="hljs-keyword">$this</span>-&gt;qb_set));

		<span class="hljs-keyword">$this</span>-&gt;_reset_write();
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;query($sql);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-146" id="section-146"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-147" id="section-147"></a>
</div>
<div class="dox">
<div class="summary">
<p>Replace statement</p>
</div>
<div class="body">
<p>Generates a platform-specific replace string from the supplied data</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table name
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>the insert keys
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>the insert values
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_replace</span><span class="hljs-params">($table, $keys, $values)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">'REPLACE INTO '</span>.$table.<span class="hljs-string">' ('</span>.implode(<span class="hljs-string">', '</span>, $keys).<span class="hljs-string">') VALUES ('</span>.implode(<span class="hljs-string">', '</span>, $values).<span class="hljs-string">')'</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-148" id="section-148"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-149" id="section-149"></a>
</div>
<div class="dox">
<div class="summary">
<p>FROM tables</p>
</div>
<div class="body">
<p>Groups tables in FROM clauses if needed, so there is no confusion
about operator precedence.</p>
<p>Note: This is only used (and overridden) by MySQL and CUBRID.</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_from_tables</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> implode(<span class="hljs-string">', '</span>, <span class="hljs-keyword">$this</span>-&gt;qb_from);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-150" id="section-150"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-151" id="section-151"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get UPDATE query string</p>
</div>
<div class="body">
<p>Compiles an update query and returns the sql</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table to update
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>TRUE: reset QB values; FALSE: leave QB values alone
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_compiled_update</span><span class="hljs-params">($table = <span class="hljs-string">''</span>, $reset = TRUE)</span>
	</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-152" id="section-152"></a>
</div>
<p>Combine any cached components with the current statements</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">$this</span>-&gt;_merge_cache();

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;_validate_update($table) === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		$sql = <span class="hljs-keyword">$this</span>-&gt;_update(<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>], <span class="hljs-keyword">$this</span>-&gt;qb_set);

		<span class="hljs-keyword">if</span> ($reset === <span class="hljs-keyword">TRUE</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;_reset_write();
		}

		<span class="hljs-keyword">return</span> $sql;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-153" id="section-153"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-154" id="section-154"></a>
</div>
<div class="dox">
<div class="summary">
<p>UPDATE</p>
</div>
<div class="body">
<p>Compiles an update string and runs the query.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$table
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$set An associative array of update values
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$where
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$limit
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool TRUE on success, FALSE on failure
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">update</span><span class="hljs-params">($table = <span class="hljs-string">''</span>, $set = NULL, $where = NULL, $limit = NULL)</span>
	</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-155" id="section-155"></a>
</div>
<p>Combine any cached components with the current statements</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">$this</span>-&gt;_merge_cache();

		<span class="hljs-keyword">if</span> ($set !== <span class="hljs-keyword">NULL</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;set($set);
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;_validate_update($table) === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">if</span> ($where !== <span class="hljs-keyword">NULL</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;where($where);
		}

		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">empty</span>($limit))
		{
			<span class="hljs-keyword">$this</span>-&gt;limit($limit);
		}

		$sql = <span class="hljs-keyword">$this</span>-&gt;_update(<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>], <span class="hljs-keyword">$this</span>-&gt;qb_set);
		<span class="hljs-keyword">$this</span>-&gt;_reset_write();
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;query($sql);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-156" id="section-156"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-157" id="section-157"></a>
</div>
<div class="dox">
<div class="summary">
<p>Validate Update</p>
</div>
<div class="body">
<p>This method is used by both update() and get_compiled_update() to
validate that data is actually being set and that a table has been
chosen to be update.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table to update data on
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_validate_update</span><span class="hljs-params">($table)</span>
	</span>{
		<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;qb_set) === <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_use_set'</span>) : <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">if</span> ($table !== <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;qb_from = <span class="hljs-keyword">array</span>(<span class="hljs-keyword">$this</span>-&gt;protect_identifiers($table, <span class="hljs-keyword">TRUE</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">FALSE</span>));
		}
		<span class="hljs-keyword">elseif</span> ( ! <span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>]))
		{
			<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_set_table'</span>) : <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-158" id="section-158"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-159" id="section-159"></a>
</div>
<div class="dox">
<div class="summary">
<p>Update_Batch</p>
</div>
<div class="body">
<p>Compiles an update string and runs the query</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table to retrieve the results from
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>an associative array of update values
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the where key
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>int number of rows affected or FALSE on failure
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">update_batch</span><span class="hljs-params">($table, $set = NULL, $index = NULL, $batch_size = <span class="hljs-number">100</span>)</span>
	</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-160" id="section-160"></a>
</div>
<p>Combine any cached components with the current statements</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">$this</span>-&gt;_merge_cache();

		<span class="hljs-keyword">if</span> ($index === <span class="hljs-keyword">NULL</span>)
		{
			<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_use_index'</span>) : <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">if</span> ($set === <span class="hljs-keyword">NULL</span>)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>(<span class="hljs-keyword">$this</span>-&gt;qb_set_ub))
			{
				<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_use_set'</span>) : <span class="hljs-keyword">FALSE</span>;
			}
		}
		<span class="hljs-keyword">else</span>
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>($set))
			{
				<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'update_batch() called with no data'</span>) : <span class="hljs-keyword">FALSE</span>;
			}

			<span class="hljs-keyword">$this</span>-&gt;set_update_batch($set, $index);
		}

		<span class="hljs-keyword">if</span> (strlen($table) === <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>]))
			{
				<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_set_table'</span>) : <span class="hljs-keyword">FALSE</span>;
			}

			$table = <span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>];
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-161" id="section-161"></a>
</div>
<p>Batch this baby</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$affected_rows = <span class="hljs-number">0</span>;
		<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $total = count(<span class="hljs-keyword">$this</span>-&gt;qb_set_ub); $i &lt; $total; $i += $batch_size)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;query(<span class="hljs-keyword">$this</span>-&gt;_update_batch(<span class="hljs-keyword">$this</span>-&gt;protect_identifiers($table, <span class="hljs-keyword">TRUE</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">FALSE</span>), array_slice(<span class="hljs-keyword">$this</span>-&gt;qb_set_ub, $i, $batch_size), $index)))
			{
				$affected_rows += <span class="hljs-keyword">$this</span>-&gt;affected_rows();
			}

			<span class="hljs-keyword">$this</span>-&gt;qb_where = <span class="hljs-keyword">array</span>();
		}

		<span class="hljs-keyword">$this</span>-&gt;_reset_write();
		<span class="hljs-keyword">return</span> $affected_rows;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-162" id="section-162"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-163" id="section-163"></a>
</div>
<div class="dox">
<div class="summary">
<p>Update_Batch statement</p>
</div>
<div class="body">
<p>Generates a platform-specific batch update string from the supplied data</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$table Table name
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$values Update data
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$index WHERE key
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_update_batch</span><span class="hljs-params">($table, $values, $index)</span>
	</span>{
		$ids = <span class="hljs-keyword">array</span>();
		<span class="hljs-keyword">foreach</span> ($values <span class="hljs-keyword">as</span> $key =&gt; $val)
		{
			$ids[] = $val[$index][<span class="hljs-string">'value'</span>];

			<span class="hljs-keyword">foreach</span> (array_keys($val) <span class="hljs-keyword">as</span> $field)
			{
				<span class="hljs-keyword">if</span> ($field !== $index)
				{
					$final[$val[$field][<span class="hljs-string">'field'</span>]][] = <span class="hljs-string">'WHEN '</span>.$val[$index][<span class="hljs-string">'field'</span>].<span class="hljs-string">' = '</span>.$val[$index][<span class="hljs-string">'value'</span>].<span class="hljs-string">' THEN '</span>.$val[$field][<span class="hljs-string">'value'</span>];
				}
			}
		}

		$cases = <span class="hljs-string">''</span>;
		<span class="hljs-keyword">foreach</span> ($final <span class="hljs-keyword">as</span> $k =&gt; $v)
		{
			$cases .= $k.<span class="hljs-string">" = CASE \n"</span>
				.implode(<span class="hljs-string">"\n"</span>, $v).<span class="hljs-string">"\n"</span>
				.<span class="hljs-string">'ELSE '</span>.$k.<span class="hljs-string">' END, '</span>;
		}

		<span class="hljs-keyword">$this</span>-&gt;where($val[$index][<span class="hljs-string">'field'</span>].<span class="hljs-string">' IN('</span>.implode(<span class="hljs-string">','</span>, $ids).<span class="hljs-string">')'</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">FALSE</span>);

		<span class="hljs-keyword">return</span> <span class="hljs-string">'UPDATE '</span>.$table.<span class="hljs-string">' SET '</span>.substr($cases, <span class="hljs-number">0</span>, <span class="hljs-number">-2</span>).<span class="hljs-keyword">$this</span>-&gt;_compile_wh(<span class="hljs-string">'qb_where'</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-164" id="section-164"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-165" id="section-165"></a>
</div>
<div class="dox">
<div class="summary">
<p>The &quot;set_update_batch&quot; function.  Allows key/value pairs to be set for batch updating</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">set_update_batch</span><span class="hljs-params">($key, $index = <span class="hljs-string">''</span>, $escape = NULL)</span>
	</span>{
		$key = <span class="hljs-keyword">$this</span>-&gt;_object_to_array_batch($key);

		<span class="hljs-keyword">if</span> ( ! is_array($key))
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-166" id="section-166"></a>
</div>
<p>@todo error</p>

        </td>
        <td class="code highlight">
          <pre class="php">		}

		is_bool($escape) <span class="hljs-keyword">OR</span> $escape = <span class="hljs-keyword">$this</span>-&gt;_protect_identifiers;

		<span class="hljs-keyword">foreach</span> ($key <span class="hljs-keyword">as</span> $k =&gt; $v)
		{
			$index_set = <span class="hljs-keyword">FALSE</span>;
			$clean = <span class="hljs-keyword">array</span>();
			<span class="hljs-keyword">foreach</span> ($v <span class="hljs-keyword">as</span> $k2 =&gt; $v2)
			{
				<span class="hljs-keyword">if</span> ($k2 === $index)
				{
					$index_set = <span class="hljs-keyword">TRUE</span>;
				}

				$clean[$k2] = <span class="hljs-keyword">array</span>(
					<span class="hljs-string">'field'</span>  =&gt; <span class="hljs-keyword">$this</span>-&gt;protect_identifiers($k2, <span class="hljs-keyword">FALSE</span>, $escape),
					<span class="hljs-string">'value'</span>  =&gt; ($escape === <span class="hljs-keyword">FALSE</span> ? $v2 : <span class="hljs-keyword">$this</span>-&gt;escape($v2))
				);
			}

			<span class="hljs-keyword">if</span> ($index_set === <span class="hljs-keyword">FALSE</span>)
			{
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_batch_missing_index'</span>);
			}

			<span class="hljs-keyword">$this</span>-&gt;qb_set_ub[] = $clean;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-167" id="section-167"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-168" id="section-168"></a>
</div>
<div class="dox">
<div class="summary">
<p>Empty Table</p>
</div>
<div class="body">
<p>Compiles a delete string and runs &quot;DELETE FROM table&quot;</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table to empty
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool TRUE on success, FALSE on failure
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">empty_table</span><span class="hljs-params">($table = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($table === <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>]))
			{
				<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_set_table'</span>) : <span class="hljs-keyword">FALSE</span>;
			}

			$table = <span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>];
		}
		<span class="hljs-keyword">else</span>
		{
			$table = <span class="hljs-keyword">$this</span>-&gt;protect_identifiers($table, <span class="hljs-keyword">TRUE</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">FALSE</span>);
		}

		$sql = <span class="hljs-keyword">$this</span>-&gt;_delete($table);
		<span class="hljs-keyword">$this</span>-&gt;_reset_write();
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;query($sql);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-169" id="section-169"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-170" id="section-170"></a>
</div>
<div class="dox">
<div class="summary">
<p>Truncate</p>
</div>
<div class="body">
<p>Compiles a truncate string and runs the query
If the database does not support the truncate() command
This function maps to &quot;DELETE FROM table&quot;</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table to truncate
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool TRUE on success, FALSE on failure
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">truncate</span><span class="hljs-params">($table = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($table === <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>]))
			{
				<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_set_table'</span>) : <span class="hljs-keyword">FALSE</span>;
			}

			$table = <span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>];
		}
		<span class="hljs-keyword">else</span>
		{
			$table = <span class="hljs-keyword">$this</span>-&gt;protect_identifiers($table, <span class="hljs-keyword">TRUE</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">FALSE</span>);
		}

		$sql = <span class="hljs-keyword">$this</span>-&gt;_truncate($table);
		<span class="hljs-keyword">$this</span>-&gt;_reset_write();
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;query($sql);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-171" id="section-171"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-172" id="section-172"></a>
</div>
<div class="dox">
<div class="summary">
<p>Truncate statement</p>
</div>
<div class="body">
<p>Generates a platform-specific truncate string from the supplied data</p>
<p>If the database does not support the truncate() command,
then this method maps to 'DELETE FROM table'</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table name
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_truncate</span><span class="hljs-params">($table)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">'TRUNCATE '</span>.$table;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-173" id="section-173"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-174" id="section-174"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get DELETE query string</p>
</div>
<div class="body">
<p>Compiles a delete query string and returns the sql</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table to delete from
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>TRUE: reset QB values; FALSE: leave QB values alone
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_compiled_delete</span><span class="hljs-params">($table = <span class="hljs-string">''</span>, $reset = TRUE)</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;return_delete_sql = <span class="hljs-keyword">TRUE</span>;
		$sql = <span class="hljs-keyword">$this</span>-&gt;delete($table, <span class="hljs-string">''</span>, <span class="hljs-keyword">NULL</span>, $reset);
		<span class="hljs-keyword">$this</span>-&gt;return_delete_sql = <span class="hljs-keyword">FALSE</span>;
		<span class="hljs-keyword">return</span> $sql;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-175" id="section-175"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-176" id="section-176"></a>
</div>
<div class="dox">
<div class="summary">
<p>Delete</p>
</div>
<div class="body">
<p>Compiles a delete string and runs the query</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>the table(s) to delete from. String or array
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>the where clause
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>the limit clause
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>mixed
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delete</span><span class="hljs-params">($table = <span class="hljs-string">''</span>, $where = <span class="hljs-string">''</span>, $limit = NULL, $reset_data = TRUE)</span>
	</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-177" id="section-177"></a>
</div>
<p>Combine any cached components with the current statements</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">$this</span>-&gt;_merge_cache();

		<span class="hljs-keyword">if</span> ($table === <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>]))
			{
				<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_must_set_table'</span>) : <span class="hljs-keyword">FALSE</span>;
			}

			$table = <span class="hljs-keyword">$this</span>-&gt;qb_from[<span class="hljs-number">0</span>];
		}
		<span class="hljs-keyword">elseif</span> (is_array($table))
		{
			<span class="hljs-keyword">empty</span>($where) &amp;&amp; $reset_data = <span class="hljs-keyword">FALSE</span>;

			<span class="hljs-keyword">foreach</span> ($table <span class="hljs-keyword">as</span> $single_table)
			{
				<span class="hljs-keyword">$this</span>-&gt;delete($single_table, $where, $limit, $reset_data);
			}

			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">else</span>
		{
			$table = <span class="hljs-keyword">$this</span>-&gt;protect_identifiers($table, <span class="hljs-keyword">TRUE</span>, <span class="hljs-keyword">NULL</span>, <span class="hljs-keyword">FALSE</span>);
		}

		<span class="hljs-keyword">if</span> ($where !== <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;where($where);
		}

		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">empty</span>($limit))
		{
			<span class="hljs-keyword">$this</span>-&gt;limit($limit);
		}

		<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;qb_where) === <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;db_debug) ? <span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_del_must_use_where'</span>) : <span class="hljs-keyword">FALSE</span>;
		}

		$sql = <span class="hljs-keyword">$this</span>-&gt;_delete($table);
		<span class="hljs-keyword">if</span> ($reset_data)
		{
			<span class="hljs-keyword">$this</span>-&gt;_reset_write();
		}

		<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;return_delete_sql === <span class="hljs-keyword">TRUE</span>) ? $sql : <span class="hljs-keyword">$this</span>-&gt;query($sql);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-178" id="section-178"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-179" id="section-179"></a>
</div>
<div class="dox">
<div class="summary">
<p>Delete statement</p>
</div>
<div class="body">
<p>Generates a platform-specific delete string from the supplied data</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table name
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_delete</span><span class="hljs-params">($table)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">'DELETE FROM '</span>.$table.<span class="hljs-keyword">$this</span>-&gt;_compile_wh(<span class="hljs-string">'qb_where'</span>)
			.(<span class="hljs-keyword">$this</span>-&gt;qb_limit !== <span class="hljs-keyword">FALSE</span> ? <span class="hljs-string">' LIMIT '</span>.<span class="hljs-keyword">$this</span>-&gt;qb_limit : <span class="hljs-string">''</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-180" id="section-180"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-181" id="section-181"></a>
</div>
<div class="dox">
<div class="summary">
<p>DB Prefix</p>
</div>
<div class="body">
<p>Prepends a database prefix if one exists in configuration</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the table
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">dbprefix</span><span class="hljs-params">($table = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($table === <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;display_error(<span class="hljs-string">'db_table_name_required'</span>);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;dbprefix.$table;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-182" id="section-182"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-183" id="section-183"></a>
</div>
<div class="dox">
<div class="summary">
<p>Set DB Prefix</p>
</div>
<div class="body">
<p>Set's the DB Prefix to something new without needing to reconnect</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the prefix
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">set_dbprefix</span><span class="hljs-params">($prefix = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;dbprefix = $prefix;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-184" id="section-184"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-185" id="section-185"></a>
</div>
<div class="dox">
<div class="summary">
<p>Track Aliases</p>
</div>
<div class="body">
<p>Used to track SQL statements written with aliased tables.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>The table to inspect
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_track_aliases</span><span class="hljs-params">($table)</span>
	</span>{
		<span class="hljs-keyword">if</span> (is_array($table))
		{
			<span class="hljs-keyword">foreach</span> ($table <span class="hljs-keyword">as</span> $t)
			{
				<span class="hljs-keyword">$this</span>-&gt;_track_aliases($t);
			}
			<span class="hljs-keyword">return</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-186" id="section-186"></a>
</div>
<p>Does the string contain a comma?  If so, we need to separate
the string into discreet statements</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (strpos($table, <span class="hljs-string">','</span>) !== <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_track_aliases(explode(<span class="hljs-string">','</span>, $table));
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-187" id="section-187"></a>
</div>
<p>if a table alias is used we can recognize it by a space</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (strpos($table, <span class="hljs-string">' '</span>) !== <span class="hljs-keyword">FALSE</span>)
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-188" id="section-188"></a>
</div>
<p>if the alias is written with the AS keyword, remove it</p>

        </td>
        <td class="code highlight">
          <pre class="php">			$table = preg_replace(<span class="hljs-string">'/\s+AS\s+/i'</span>, <span class="hljs-string">' '</span>, $table);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-189" id="section-189"></a>
</div>
<p>Grab the alias</p>

        </td>
        <td class="code highlight">
          <pre class="php">			$table = trim(strrchr($table, <span class="hljs-string">' '</span>));

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-190" id="section-190"></a>
</div>
<p>Store the alias, if it doesn't already exist</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">if</span> ( ! in_array($table, <span class="hljs-keyword">$this</span>-&gt;qb_aliased_tables, <span class="hljs-keyword">TRUE</span>))
			{
				<span class="hljs-keyword">$this</span>-&gt;qb_aliased_tables[] = $table;
				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_caching === <span class="hljs-keyword">TRUE</span> &amp;&amp; ! in_array($table, <span class="hljs-keyword">$this</span>-&gt;qb_cache_aliased_tables, <span class="hljs-keyword">TRUE</span>))
				{
					<span class="hljs-keyword">$this</span>-&gt;qb_cache_aliased_tables[] = $table;
					<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists[] = <span class="hljs-string">'aliased_tables'</span>;
				}
			}
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-191" id="section-191"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-192" id="section-192"></a>
</div>
<div class="dox">
<div class="summary">
<p>Compile the SELECT statement</p>
</div>
<div class="body">
<p>Generates a query string based on which functions were used.
Should not be called directly.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$select_override
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_compile_select</span><span class="hljs-params">($select_override = FALSE)</span>
	</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-193" id="section-193"></a>
</div>
<p>Combine any cached components with the current statements</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">$this</span>-&gt;_merge_cache();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-194" id="section-194"></a>
</div>
<p>Write the &quot;select&quot; portion of the query</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> ($select_override !== <span class="hljs-keyword">FALSE</span>)
		{
			$sql = $select_override;
		}
		<span class="hljs-keyword">else</span>
		{
			$sql = ( ! <span class="hljs-keyword">$this</span>-&gt;qb_distinct) ? <span class="hljs-string">'SELECT '</span> : <span class="hljs-string">'SELECT DISTINCT '</span>;

			<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;qb_select) === <span class="hljs-number">0</span>)
			{
				$sql .= <span class="hljs-string">'*'</span>;
			}
			<span class="hljs-keyword">else</span>
			{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-195" id="section-195"></a>
</div>
<p>Cycle through the &quot;select&quot; portion of the query and prep each column name.
The reason we protect identifiers here rather than in the select() function
is because until the user calls the from() function we don't know if there are aliases</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">$this</span>-&gt;qb_select <span class="hljs-keyword">as</span> $key =&gt; $val)
				{
					$no_escape = <span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;qb_no_escape[$key]) ? <span class="hljs-keyword">$this</span>-&gt;qb_no_escape[$key] : <span class="hljs-keyword">NULL</span>;
					<span class="hljs-keyword">$this</span>-&gt;qb_select[$key] = <span class="hljs-keyword">$this</span>-&gt;protect_identifiers($val, <span class="hljs-keyword">FALSE</span>, $no_escape);
				}

				$sql .= implode(<span class="hljs-string">', '</span>, <span class="hljs-keyword">$this</span>-&gt;qb_select);
			}
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-196" id="section-196"></a>
</div>
<p>Write the &quot;FROM&quot; portion of the query</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;qb_from) &gt; <span class="hljs-number">0</span>)
		{
			$sql .= <span class="hljs-string">"\nFROM "</span>.<span class="hljs-keyword">$this</span>-&gt;_from_tables();
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-197" id="section-197"></a>
</div>
<p>Write the &quot;JOIN&quot; portion of the query</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;qb_join) &gt; <span class="hljs-number">0</span>)
		{
			$sql .= <span class="hljs-string">"\n"</span>.implode(<span class="hljs-string">"\n"</span>, <span class="hljs-keyword">$this</span>-&gt;qb_join);
		}

		$sql .= <span class="hljs-keyword">$this</span>-&gt;_compile_wh(<span class="hljs-string">'qb_where'</span>)
			.<span class="hljs-keyword">$this</span>-&gt;_compile_group_by()
			.<span class="hljs-keyword">$this</span>-&gt;_compile_wh(<span class="hljs-string">'qb_having'</span>)
			.<span class="hljs-keyword">$this</span>-&gt;_compile_order_by(); <span class="hljs-comment">// ORDER BY</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-198" id="section-198"></a>
</div>
<p>LIMIT</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_limit !== <span class="hljs-keyword">FALSE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">$this</span>-&gt;qb_offset)
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_limit($sql.<span class="hljs-string">"\n"</span>);
		}

		<span class="hljs-keyword">return</span> $sql;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-199" id="section-199"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-200" id="section-200"></a>
</div>
<div class="dox">
<div class="summary">
<p>Compile WHERE, HAVING statements</p>
</div>
<div class="body">
<p>Escapes identifiers in WHERE and HAVING statements at execution time.</p>
<p>Required so that aliases are tracked properly, regardless of whether
where(), or_where(), having(), or_having are called prior to from(),
join() and dbprefix is added only if needed.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$qb_key 'qb_where' or 'qb_having'
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string SQL statement
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_compile_wh</span><span class="hljs-params">($qb_key)</span>
	</span>{
		<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;$qb_key) &gt; <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count(<span class="hljs-keyword">$this</span>-&gt;$qb_key); $i &lt; $c; $i++)
			{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-201" id="section-201"></a>
</div>
<p>Is this condition already compiled?</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">if</span> (is_string(<span class="hljs-keyword">$this</span>-&gt;{$qb_key}[$i]))
				{
					<span class="hljs-keyword">continue</span>;
				}
				<span class="hljs-keyword">elseif</span> (<span class="hljs-keyword">$this</span>-&gt;{$qb_key}[$i][<span class="hljs-string">'escape'</span>] === <span class="hljs-keyword">FALSE</span>)
				{
					<span class="hljs-keyword">$this</span>-&gt;{$qb_key}[$i] = <span class="hljs-keyword">$this</span>-&gt;{$qb_key}[$i][<span class="hljs-string">'condition'</span>].(<span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;{$qb_key}[$i][<span class="hljs-string">'value'</span>]) ? <span class="hljs-string">' '</span>.<span class="hljs-keyword">$this</span>-&gt;{$qb_key}[$i][<span class="hljs-string">'value'</span>] : <span class="hljs-string">''</span>);
					<span class="hljs-keyword">continue</span>;
				}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-202" id="section-202"></a>
</div>
<p>Split multiple conditions</p>

        </td>
        <td class="code highlight">
          <pre class="php">				$conditions = preg_split(
					<span class="hljs-string">'/((?:^|\s+)AND\s+|(?:^|\s+)OR\s+)/i'</span>,
					<span class="hljs-keyword">$this</span>-&gt;{$qb_key}[$i][<span class="hljs-string">'condition'</span>],
					<span class="hljs-number">-1</span>,
					PREG_SPLIT_DELIM_CAPTURE | PREG_SPLIT_NO_EMPTY
				);

				<span class="hljs-keyword">for</span> ($ci = <span class="hljs-number">0</span>, $cc = count($conditions); $ci &lt; $cc; $ci++)
				{
					<span class="hljs-keyword">if</span> (($op = <span class="hljs-keyword">$this</span>-&gt;_get_operator($conditions[$ci])) === <span class="hljs-keyword">FALSE</span>
						<span class="hljs-keyword">OR</span> ! preg_match(<span class="hljs-string">'/^(\(?)(.*)('</span>.preg_quote($op, <span class="hljs-string">'/'</span>).<span class="hljs-string">')\s*(.*(?&lt;!\)))?(\)?)$/i'</span>, $conditions[$ci], $matches))
					{
						<span class="hljs-keyword">continue</span>;
					}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-203" id="section-203"></a>
</div>
<p>$matches = array(
0 =&gt; '(test &lt;= foo)',	/* the whole thing <em>/
1 =&gt; '(',		/</em> optional <em>/
2 =&gt; 'test',		/</em> the field name <em>/
3 =&gt; ' &lt;= ',		/</em> $op <em>/
4 =&gt; 'foo',		/</em> optional, if $op is e.g. 'IS NULL' <em>/
5 =&gt; ')'		/</em> optional */
);</p>

        </td>
        <td class="code highlight">
          <pre class="php">
					<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">empty</span>($matches[<span class="hljs-number">4</span>]))
					{
						<span class="hljs-keyword">$this</span>-&gt;_is_literal($matches[<span class="hljs-number">4</span>]) <span class="hljs-keyword">OR</span> $matches[<span class="hljs-number">4</span>] = <span class="hljs-keyword">$this</span>-&gt;protect_identifiers(trim($matches[<span class="hljs-number">4</span>]));
						$matches[<span class="hljs-number">4</span>] = <span class="hljs-string">' '</span>.$matches[<span class="hljs-number">4</span>];
					}

					$conditions[$ci] = $matches[<span class="hljs-number">1</span>].<span class="hljs-keyword">$this</span>-&gt;protect_identifiers(trim($matches[<span class="hljs-number">2</span>]))
						.<span class="hljs-string">' '</span>.trim($matches[<span class="hljs-number">3</span>]).$matches[<span class="hljs-number">4</span>].$matches[<span class="hljs-number">5</span>];
				}

				<span class="hljs-keyword">$this</span>-&gt;{$qb_key}[$i] = implode(<span class="hljs-string">''</span>, $conditions).(<span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;{$qb_key}[$i][<span class="hljs-string">'value'</span>]) ? <span class="hljs-string">' '</span>.<span class="hljs-keyword">$this</span>-&gt;{$qb_key}[$i][<span class="hljs-string">'value'</span>] : <span class="hljs-string">''</span>);
			}

			<span class="hljs-keyword">return</span> ($qb_key === <span class="hljs-string">'qb_having'</span> ? <span class="hljs-string">"\nHAVING "</span> : <span class="hljs-string">"\nWHERE "</span>)
				.implode(<span class="hljs-string">"\n"</span>, <span class="hljs-keyword">$this</span>-&gt;$qb_key);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-204" id="section-204"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-205" id="section-205"></a>
</div>
<div class="dox">
<div class="summary">
<p>Compile GROUP BY</p>
</div>
<div class="body">
<p>Escapes identifiers in GROUP BY statements at execution time.</p>
<p>Required so that aliases are tracked properly, regardless of whether
group_by() is called prior to from(), join() and dbprefix is added
only if needed.</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string SQL statement
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_compile_group_by</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;qb_groupby) &gt; <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count(<span class="hljs-keyword">$this</span>-&gt;qb_groupby); $i &lt; $c; $i++)
			{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-206" id="section-206"></a>
</div>
<p>Is it already compiled?</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">if</span> (is_string(<span class="hljs-keyword">$this</span>-&gt;qb_groupby[$i]))
				{
					<span class="hljs-keyword">continue</span>;
				}

				<span class="hljs-keyword">$this</span>-&gt;qb_groupby[$i] = (<span class="hljs-keyword">$this</span>-&gt;qb_groupby[$i][<span class="hljs-string">'escape'</span>] === <span class="hljs-keyword">FALSE</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">$this</span>-&gt;_is_literal(<span class="hljs-keyword">$this</span>-&gt;qb_groupby[$i][<span class="hljs-string">'field'</span>]))
					? <span class="hljs-keyword">$this</span>-&gt;qb_groupby[$i][<span class="hljs-string">'field'</span>]
					: <span class="hljs-keyword">$this</span>-&gt;protect_identifiers(<span class="hljs-keyword">$this</span>-&gt;qb_groupby[$i][<span class="hljs-string">'field'</span>]);
			}

			<span class="hljs-keyword">return</span> <span class="hljs-string">"\nGROUP BY "</span>.implode(<span class="hljs-string">', '</span>, <span class="hljs-keyword">$this</span>-&gt;qb_groupby);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-207" id="section-207"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-208" id="section-208"></a>
</div>
<div class="dox">
<div class="summary">
<p>Compile ORDER BY</p>
</div>
<div class="body">
<p>Escapes identifiers in ORDER BY statements at execution time.</p>
<p>Required so that aliases are tracked properly, regardless of whether
order_by() is called prior to from(), join() and dbprefix is added
only if needed.</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string SQL statement
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_compile_order_by</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>(<span class="hljs-keyword">$this</span>-&gt;qb_orderby))
		{
			<span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
		}

		<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count(<span class="hljs-keyword">$this</span>-&gt;qb_orderby); $i &lt; $c; $i++)
		{
			<span class="hljs-keyword">if</span> (is_string(<span class="hljs-keyword">$this</span>-&gt;qb_orderby[$i]))
			{
				<span class="hljs-keyword">continue</span>;
			}

			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;qb_orderby[$i][<span class="hljs-string">'escape'</span>] !== <span class="hljs-keyword">FALSE</span> &amp;&amp; ! <span class="hljs-keyword">$this</span>-&gt;_is_literal(<span class="hljs-keyword">$this</span>-&gt;qb_orderby[$i][<span class="hljs-string">'field'</span>]))
			{
				<span class="hljs-keyword">$this</span>-&gt;qb_orderby[$i][<span class="hljs-string">'field'</span>] = <span class="hljs-keyword">$this</span>-&gt;protect_identifiers(<span class="hljs-keyword">$this</span>-&gt;qb_orderby[$i][<span class="hljs-string">'field'</span>]);
			}

			<span class="hljs-keyword">$this</span>-&gt;qb_orderby[$i] = <span class="hljs-keyword">$this</span>-&gt;qb_orderby[$i][<span class="hljs-string">'field'</span>].<span class="hljs-keyword">$this</span>-&gt;qb_orderby[$i][<span class="hljs-string">'direction'</span>];
		}

		<span class="hljs-keyword">return</span> <span class="hljs-string">"\nORDER BY "</span>.implode(<span class="hljs-string">', '</span>, <span class="hljs-keyword">$this</span>-&gt;qb_orderby);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-209" id="section-209"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-210" id="section-210"></a>
</div>
<div class="dox">
<div class="summary">
<p>Object to Array</p>
</div>
<div class="body">
<p>Takes an object as input and converts the class variables to array key/vals</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>array
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_object_to_array</span><span class="hljs-params">($object)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! is_object($object))
		{
			<span class="hljs-keyword">return</span> $object;
		}

		$array = <span class="hljs-keyword">array</span>();
		<span class="hljs-keyword">foreach</span> (get_object_vars($object) <span class="hljs-keyword">as</span> $key =&gt; $val)
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-211" id="section-211"></a>
</div>
<p>There are some built in keys we need to ignore for this conversion</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">if</span> ( ! is_object($val) &amp;&amp; ! is_array($val) &amp;&amp; $key !== <span class="hljs-string">'_parent_name'</span>)
			{
				$array[$key] = $val;
			}
		}

		<span class="hljs-keyword">return</span> $array;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-212" id="section-212"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-213" id="section-213"></a>
</div>
<div class="dox">
<div class="summary">
<p>Object to Array</p>
</div>
<div class="body">
<p>Takes an object as input and converts the class variables to array key/vals</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>array
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_object_to_array_batch</span><span class="hljs-params">($object)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! is_object($object))
		{
			<span class="hljs-keyword">return</span> $object;
		}

		$array = <span class="hljs-keyword">array</span>();
		$out = get_object_vars($object);
		$fields = array_keys($out);

		<span class="hljs-keyword">foreach</span> ($fields <span class="hljs-keyword">as</span> $val)
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-214" id="section-214"></a>
</div>
<p>There are some built in keys we need to ignore for this conversion</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">if</span> ($val !== <span class="hljs-string">'_parent_name'</span>)
			{
				$i = <span class="hljs-number">0</span>;
				<span class="hljs-keyword">foreach</span> ($out[$val] <span class="hljs-keyword">as</span> $data)
				{
					$array[$i++][$val] = $data;
				}
			}
		}

		<span class="hljs-keyword">return</span> $array;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-215" id="section-215"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-216" id="section-216"></a>
</div>
<div class="dox">
<div class="summary">
<p>Start Cache</p>
</div>
<div class="body">
<p>Starts QB caching</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">start_cache</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;qb_caching = <span class="hljs-keyword">TRUE</span>;
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-217" id="section-217"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-218" id="section-218"></a>
</div>
<div class="dox">
<div class="summary">
<p>Stop Cache</p>
</div>
<div class="body">
<p>Stops QB caching</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">stop_cache</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;qb_caching = <span class="hljs-keyword">FALSE</span>;
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-219" id="section-219"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-220" id="section-220"></a>
</div>
<div class="dox">
<div class="summary">
<p>Flush Cache</p>
</div>
<div class="body">
<p>Empties the QB cache</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">flush_cache</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;_reset_run(<span class="hljs-keyword">array</span>(
			<span class="hljs-string">'qb_cache_select'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_cache_from'</span>			=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_cache_join'</span>			=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_cache_where'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_cache_groupby'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_cache_having'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_cache_orderby'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_cache_set'</span>			=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_cache_exists'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_cache_no_escape'</span>	=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_cache_aliased_tables'</span>	=&gt; <span class="hljs-keyword">array</span>()
		));

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-221" id="section-221"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-222" id="section-222"></a>
</div>
<div class="dox">
<div class="summary">
<p>Merge Cache</p>
</div>
<div class="body">
<p>When called, this function merges any cached QB arrays with
locally called ones.</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_merge_cache</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists) === <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">return</span>;
		}
		<span class="hljs-keyword">elseif</span> (in_array(<span class="hljs-string">'select'</span>, <span class="hljs-keyword">$this</span>-&gt;qb_cache_exists, <span class="hljs-keyword">TRUE</span>))
		{
			$qb_no_escape = <span class="hljs-keyword">$this</span>-&gt;qb_cache_no_escape;
		}

		<span class="hljs-keyword">foreach</span> (array_unique(<span class="hljs-keyword">$this</span>-&gt;qb_cache_exists) <span class="hljs-keyword">as</span> $val) <span class="hljs-comment">// select, from, etc.</span>
		{
			$qb_variable	= <span class="hljs-string">'qb_'</span>.$val;
			$qb_cache_var	= <span class="hljs-string">'qb_cache_'</span>.$val;
			$qb_new 	= <span class="hljs-keyword">$this</span>-&gt;$qb_cache_var;

			<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count(<span class="hljs-keyword">$this</span>-&gt;$qb_variable); $i &lt; $c; $i++)
			{
				<span class="hljs-keyword">if</span> ( ! in_array(<span class="hljs-keyword">$this</span>-&gt;{$qb_variable}[$i], $qb_new, <span class="hljs-keyword">TRUE</span>))
				{
					$qb_new[] = <span class="hljs-keyword">$this</span>-&gt;{$qb_variable}[$i];
					<span class="hljs-keyword">if</span> ($val === <span class="hljs-string">'select'</span>)
					{
						$qb_no_escape[] = <span class="hljs-keyword">$this</span>-&gt;qb_no_escape[$i];
					}
				}
			}

			<span class="hljs-keyword">$this</span>-&gt;$qb_variable = $qb_new;
			<span class="hljs-keyword">if</span> ($val === <span class="hljs-string">'select'</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;qb_no_escape = $qb_no_escape;
			}
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-223" id="section-223"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-224" id="section-224"></a>
</div>
<div class="dox">
<div class="summary">
<p>Is literal</p>
</div>
<div class="body">
<p>Determines if a string represents a literal value or a field name</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$str
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_is_literal</span><span class="hljs-params">($str)</span>
	</span>{
		$str = trim($str);

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>($str) <span class="hljs-keyword">OR</span> ctype_digit($str) <span class="hljs-keyword">OR</span> (string) (float) $str === $str <span class="hljs-keyword">OR</span> in_array(strtoupper($str), <span class="hljs-keyword">array</span>(<span class="hljs-string">'TRUE'</span>, <span class="hljs-string">'FALSE'</span>), <span class="hljs-keyword">TRUE</span>))
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
		}

		<span class="hljs-keyword">static</span> $_str;

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>($_str))
		{
			$_str = (<span class="hljs-keyword">$this</span>-&gt;_escape_char !== <span class="hljs-string">'"'</span>)
				? <span class="hljs-keyword">array</span>(<span class="hljs-string">'"'</span>, <span class="hljs-string">"'"</span>) : <span class="hljs-keyword">array</span>(<span class="hljs-string">"'"</span>);
		}

		<span class="hljs-keyword">return</span> in_array($str[<span class="hljs-number">0</span>], $_str, <span class="hljs-keyword">TRUE</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-225" id="section-225"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-226" id="section-226"></a>
</div>
<div class="dox">
<div class="summary">
<p>Reset Query Builder values.</p>
</div>
<div class="body">
<p>Publicly-visible method to reset the QB values.</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_DB_query_builder
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">reset_query</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;_reset_select();
		<span class="hljs-keyword">$this</span>-&gt;_reset_write();
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-227" id="section-227"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-228" id="section-228"></a>
</div>
<div class="dox">
<div class="summary">
<p>Resets the query builder values.  Called by the get() function</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>An array of fields to reset
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_reset_run</span><span class="hljs-params">($qb_reset_items)</span>
	</span>{
		<span class="hljs-keyword">foreach</span> ($qb_reset_items <span class="hljs-keyword">as</span> $item =&gt; $default_value)
		{
			<span class="hljs-keyword">$this</span>-&gt;$item = $default_value;
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-229" id="section-229"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-230" id="section-230"></a>
</div>
<div class="dox">
<div class="summary">
<p>Resets the query builder values.  Called by the get() function</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_reset_select</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;_reset_run(<span class="hljs-keyword">array</span>(
			<span class="hljs-string">'qb_select'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_from'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_join'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_where'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_groupby'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_having'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_orderby'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_aliased_tables'</span>	=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_no_escape'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_distinct'</span>		=&gt; <span class="hljs-keyword">FALSE</span>,
			<span class="hljs-string">'qb_limit'</span>		=&gt; <span class="hljs-keyword">FALSE</span>,
			<span class="hljs-string">'qb_offset'</span>		=&gt; <span class="hljs-keyword">FALSE</span>
		));
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-231" id="section-231"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-232" id="section-232"></a>
</div>
<div class="dox">
<div class="summary">
<p>Resets the query builder &quot;write&quot; values.</p>
</div>
<div class="body">
<p>Called by the insert() update() insert_batch() update_batch() and delete() functions</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_reset_write</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;_reset_run(<span class="hljs-keyword">array</span>(
			<span class="hljs-string">'qb_set'</span>	=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_set_ub'</span>	=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_from'</span>	=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_join'</span>	=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_where'</span>	=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_orderby'</span>	=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_keys'</span>	=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'qb_limit'</span>	=&gt; <span class="hljs-keyword">FALSE</span>
		));
	}

}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
