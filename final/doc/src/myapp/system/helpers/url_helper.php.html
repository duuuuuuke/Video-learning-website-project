<!DOCTYPE html>
<html>
<head>
  <title>url_helper.php</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "src\\myapp\\system\\helpers\\url_helper.php";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>url_helper.php</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="php"><span class="hljs-meta">&lt;?php</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>CodeIgniter</p>
</div>
<div class="body">
<p>An open source application development framework for PHP</p>
<p>This content is released under the MIT License (MIT)</p>
<p>Copyright (c) 2014 - 2019, British Columbia Institute of Technology</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</p>
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">defined(<span class="hljs-string">'BASEPATH'</span>) <span class="hljs-keyword">OR</span> <span class="hljs-keyword">exit</span>(<span class="hljs-string">'No direct script access allowed'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>CodeIgniter URL Helpers</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'site_url'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<div class="dox">
<div class="summary">
<p>Site URL</p>
</div>
<div class="body">
<p>Create a local URL based on your basepath. Segments can be passed via the
first parameter either as a string or an array.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$uri
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$protocol
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">site_url</span><span class="hljs-params">($uri = <span class="hljs-string">''</span>, $protocol = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> get_instance()-&gt;config-&gt;site_url($uri, $protocol);
	}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'base_url'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
<p>Base URL</p>
</div>
<div class="body">
<p>Create a local URL based on your basepath.
Segments can be passed in as a string or an array, same as site_url
or a URL to a file can be passed in, e.g. to an image file.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$uri
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$protocol
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">base_url</span><span class="hljs-params">($uri = <span class="hljs-string">''</span>, $protocol = NULL)</span>
	</span>{
		<span class="hljs-keyword">return</span> get_instance()-&gt;config-&gt;base_url($uri, $protocol);
	}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'current_url'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<div class="dox">
<div class="summary">
<p>Current URL</p>
</div>
<div class="body">
<p>Returns the full URL (including segments) of the page where this
function is placed</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">current_url</span><span class="hljs-params">()</span>
	</span>{
		$CI =&amp; get_instance();
		<span class="hljs-keyword">return</span> $CI-&gt;config-&gt;site_url($CI-&gt;uri-&gt;uri_string());
	}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'uri_string'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
<p>URL String</p>
</div>
<div class="body">
<p>Returns the URI segments.</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">uri_string</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> get_instance()-&gt;uri-&gt;uri_string();
	}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'index_page'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<div class="dox">
<div class="summary">
<p>Index page</p>
</div>
<div class="body">
<p>Returns the &quot;index_page&quot; from your config file</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">index_page</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> get_instance()-&gt;config-&gt;item(<span class="hljs-string">'index_page'</span>);
	}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'anchor'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<div class="dox">
<div class="summary">
<p>Anchor Link</p>
</div>
<div class="body">
<p>Creates an anchor based on the local URL.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the URL
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the link title
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>any attributes
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">anchor</span><span class="hljs-params">($uri = <span class="hljs-string">''</span>, $title = <span class="hljs-string">''</span>, $attributes = <span class="hljs-string">''</span>)</span>
	</span>{
		$title = (string) $title;

		$site_url = is_array($uri)
			? site_url($uri)
			: (preg_match(<span class="hljs-string">'#^(\w+:)?//#i'</span>, $uri) ? $uri : site_url($uri));

		<span class="hljs-keyword">if</span> ($title === <span class="hljs-string">''</span>)
		{
			$title = $site_url;
		}

		<span class="hljs-keyword">if</span> ($attributes !== <span class="hljs-string">''</span>)
		{
			$attributes = _stringify_attributes($attributes);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;a href="'</span>.$site_url.<span class="hljs-string">'"'</span>.$attributes.<span class="hljs-string">'&gt;'</span>.$title.<span class="hljs-string">'&lt;/a&gt;'</span>;
	}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'anchor_popup'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<div class="dox">
<div class="summary">
<p>Anchor Link - Pop-up version</p>
</div>
<div class="body">
<p>Creates an anchor based on the local URL. The link
opens a new window based on the attributes specified.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the URL
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the link title
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>any attributes
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">anchor_popup</span><span class="hljs-params">($uri = <span class="hljs-string">''</span>, $title = <span class="hljs-string">''</span>, $attributes = FALSE)</span>
	</span>{
		$title = (string) $title;
		$site_url = preg_match(<span class="hljs-string">'#^(\w+:)?//#i'</span>, $uri) ? $uri : site_url($uri);

		<span class="hljs-keyword">if</span> ($title === <span class="hljs-string">''</span>)
		{
			$title = $site_url;
		}

		<span class="hljs-keyword">if</span> ($attributes === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;a href="'</span>.$site_url.<span class="hljs-string">'" onclick="window.open(\''</span>.$site_url.<span class="hljs-string">"', '_blank'); return false;\"&gt;"</span>.$title.<span class="hljs-string">'&lt;/a&gt;'</span>;
		}

		<span class="hljs-keyword">if</span> ( ! is_array($attributes))
		{
			$attributes = <span class="hljs-keyword">array</span>($attributes);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>Ref: http://www.w3schools.com/jsref/met_win_open.asp</p>

        </td>
        <td class="code highlight">
          <pre class="php">			$window_name = <span class="hljs-string">'_blank'</span>;
		}
		<span class="hljs-keyword">elseif</span> ( ! <span class="hljs-keyword">empty</span>($attributes[<span class="hljs-string">'window_name'</span>]))
		{
			$window_name = $attributes[<span class="hljs-string">'window_name'</span>];
			<span class="hljs-keyword">unset</span>($attributes[<span class="hljs-string">'window_name'</span>]);
		}
		<span class="hljs-keyword">else</span>
		{
			$window_name = <span class="hljs-string">'_blank'</span>;
		}

		<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">array</span>(<span class="hljs-string">'width'</span> =&gt; <span class="hljs-string">'800'</span>, <span class="hljs-string">'height'</span> =&gt; <span class="hljs-string">'600'</span>, <span class="hljs-string">'scrollbars'</span> =&gt; <span class="hljs-string">'yes'</span>, <span class="hljs-string">'menubar'</span> =&gt; <span class="hljs-string">'no'</span>, <span class="hljs-string">'status'</span> =&gt; <span class="hljs-string">'yes'</span>, <span class="hljs-string">'resizable'</span> =&gt; <span class="hljs-string">'yes'</span>, <span class="hljs-string">'screenx'</span> =&gt; <span class="hljs-string">'0'</span>, <span class="hljs-string">'screeny'</span> =&gt; <span class="hljs-string">'0'</span>) <span class="hljs-keyword">as</span> $key =&gt; $val)
		{
			$atts[$key] = <span class="hljs-keyword">isset</span>($attributes[$key]) ? $attributes[$key] : $val;
			<span class="hljs-keyword">unset</span>($attributes[$key]);
		}

		$attributes = _stringify_attributes($attributes);

		<span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;a href="'</span>.$site_url
			.<span class="hljs-string">'" onclick="window.open(\''</span>.$site_url.<span class="hljs-string">"', '"</span>.$window_name.<span class="hljs-string">"', '"</span>._stringify_attributes($atts, <span class="hljs-keyword">TRUE</span>).<span class="hljs-string">"'); return false;\""</span>
			.$attributes.<span class="hljs-string">'&gt;'</span>.$title.<span class="hljs-string">'&lt;/a&gt;'</span>;
	}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'mailto'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<div class="dox">
<div class="summary">
<p>Mailto Link</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the email address
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the link title
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>any attributes
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mailto</span><span class="hljs-params">($email, $title = <span class="hljs-string">''</span>, $attributes = <span class="hljs-string">''</span>)</span>
	</span>{
		$title = (string) $title;

		<span class="hljs-keyword">if</span> ($title === <span class="hljs-string">''</span>)
		{
			$title = $email;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-string">'&lt;a href="mailto:'</span>.$email.<span class="hljs-string">'"'</span>._stringify_attributes($attributes).<span class="hljs-string">'&gt;'</span>.$title.<span class="hljs-string">'&lt;/a&gt;'</span>;
	}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'safe_mailto'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encoded Mailto Link</p>
</div>
<div class="body">
<p>Create a spam-protected mailto link written in Javascript</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the email address
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the link title
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>any attributes
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">safe_mailto</span><span class="hljs-params">($email, $title = <span class="hljs-string">''</span>, $attributes = <span class="hljs-string">''</span>)</span>
	</span>{
		$title = (string) $title;

		<span class="hljs-keyword">if</span> ($title === <span class="hljs-string">''</span>)
		{
			$title = $email;
		}

		$x = str_split(<span class="hljs-string">'&lt;a href="mailto:'</span>, <span class="hljs-number">1</span>);

		<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $l = strlen($email); $i &lt; $l; $i++)
		{
			$x[] = <span class="hljs-string">'|'</span>.ord($email[$i]);
		}

		$x[] = <span class="hljs-string">'"'</span>;

		<span class="hljs-keyword">if</span> ($attributes !== <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">if</span> (is_array($attributes))
			{
				<span class="hljs-keyword">foreach</span> ($attributes <span class="hljs-keyword">as</span> $key =&gt; $val)
				{
					$x[] = <span class="hljs-string">' '</span>.$key.<span class="hljs-string">'="'</span>;
					<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $l = strlen($val); $i &lt; $l; $i++)
					{
						$x[] = <span class="hljs-string">'|'</span>.ord($val[$i]);
					}
					$x[] = <span class="hljs-string">'"'</span>;
				}
			}
			<span class="hljs-keyword">else</span>
			{
				<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $l = strlen($attributes); $i &lt; $l; $i++)
				{
					$x[] = $attributes[$i];
				}
			}
		}

		$x[] = <span class="hljs-string">'&gt;'</span>;

		$temp = <span class="hljs-keyword">array</span>();
		<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $l = strlen($title); $i &lt; $l; $i++)
		{
			$ordinal = ord($title[$i]);

			<span class="hljs-keyword">if</span> ($ordinal &lt; <span class="hljs-number">128</span>)
			{
				$x[] = <span class="hljs-string">'|'</span>.$ordinal;
			}
			<span class="hljs-keyword">else</span>
			{
				<span class="hljs-keyword">if</span> (count($temp) === <span class="hljs-number">0</span>)
				{
					$count = ($ordinal &lt; <span class="hljs-number">224</span>) ? <span class="hljs-number">2</span> : <span class="hljs-number">3</span>;
				}

				$temp[] = $ordinal;
				<span class="hljs-keyword">if</span> (count($temp) === $count)
				{
					$number = ($count === <span class="hljs-number">3</span>)
							? (($temp[<span class="hljs-number">0</span>] % <span class="hljs-number">16</span>) * <span class="hljs-number">4096</span>) + (($temp[<span class="hljs-number">1</span>] % <span class="hljs-number">64</span>) * <span class="hljs-number">64</span>) + ($temp[<span class="hljs-number">2</span>] % <span class="hljs-number">64</span>)
							: (($temp[<span class="hljs-number">0</span>] % <span class="hljs-number">32</span>) * <span class="hljs-number">64</span>) + ($temp[<span class="hljs-number">1</span>] % <span class="hljs-number">64</span>);
					$x[] = <span class="hljs-string">'|'</span>.$number;
					$count = <span class="hljs-number">1</span>;
					$temp = <span class="hljs-keyword">array</span>();
				}
			}
		}

		$x[] = <span class="hljs-string">'&lt;'</span>; $x[] = <span class="hljs-string">'/'</span>; $x[] = <span class="hljs-string">'a'</span>; $x[] = <span class="hljs-string">'&gt;'</span>;

		$x = array_reverse($x);

		$output = <span class="hljs-string">"&lt;script type=\"text/javascript\"&gt;\n"</span>
			.<span class="hljs-string">"\t//&lt;![CDATA[\n"</span>
			.<span class="hljs-string">"\tvar l=new Array();\n"</span>;

		<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count($x); $i &lt; $c; $i++)
		{
			$output .= <span class="hljs-string">"\tl["</span>.$i.<span class="hljs-string">"] = '"</span>.$x[$i].<span class="hljs-string">"';\n"</span>;
		}

		$output .= <span class="hljs-string">"\n\tfor (var i = l.length-1; i &gt;= 0; i=i-1) {\n"</span>
			.<span class="hljs-string">"\t\tif (l[i].substring(0, 1) === '|') document.write(\"&amp;#\"+unescape(l[i].substring(1))+\";\");\n"</span>
			.<span class="hljs-string">"\t\telse document.write(unescape(l[i]));\n"</span>
			.<span class="hljs-string">"\t}\n"</span>
			.<span class="hljs-string">"\t//]]&gt;\n"</span>
			.<span class="hljs-string">'&lt;/script&gt;'</span>;

		<span class="hljs-keyword">return</span> $output;
	}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'auto_link'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<div class="dox">
<div class="summary">
<p>Auto-linker</p>
</div>
<div class="body">
<p>Automatically links URL and Email addresses.
Note: There's a bit of extra code here to deal with
URLs or emails that end in a period. We'll strip these
off and add them after the link.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the string
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the type: email, url, or both
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>whether to create pop-up links
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">auto_link</span><span class="hljs-params">($str, $type = <span class="hljs-string">'both'</span>, $popup = FALSE)</span>
	</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<p>Find and replace any URLs.</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> ($type !== <span class="hljs-string">'email'</span> &amp;&amp; preg_match_all(<span class="hljs-string">'#(\w*://|www\.)[a-z0-9]+(-+[a-z0-9]+)*(\.[a-z0-9]+(-+[a-z0-9]+)*)+(/([^\s()&lt;&gt;;]+\w)?/?)?#i'</span>, $str, $matches, PREG_OFFSET_CAPTURE | PREG_SET_ORDER))
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>Set our target HTML if using popup links.</p>

        </td>
        <td class="code highlight">
          <pre class="php">			$target = ($popup) ? <span class="hljs-string">' target="_blank" rel="noopener"'</span> : <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>We process the links in reverse order (last -&gt; first) so that
the returned string offsets from preg_match_all() are not
moved as we add more HTML.</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">foreach</span> (array_reverse($matches) <span class="hljs-keyword">as</span> $match)
			{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<p>$match[0] is the matched string/link
$match[1] is either a protocol prefix or 'www.'</p>
<p>With PREG_OFFSET_CAPTURE, both of the above is an array,
where the actual value is held in [0] and its offset at the [1] index.</p>

        </td>
        <td class="code highlight">
          <pre class="php">				$a = <span class="hljs-string">'&lt;a href="'</span>.(strpos($match[<span class="hljs-number">1</span>][<span class="hljs-number">0</span>], <span class="hljs-string">'/'</span>) ? <span class="hljs-string">''</span> : <span class="hljs-string">'http://'</span>).$match[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].<span class="hljs-string">'"'</span>.$target.<span class="hljs-string">'&gt;'</span>.$match[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>].<span class="hljs-string">'&lt;/a&gt;'</span>;
				$str = substr_replace($str, $a, $match[<span class="hljs-number">0</span>][<span class="hljs-number">1</span>], strlen($match[<span class="hljs-number">0</span>][<span class="hljs-number">0</span>]));
			}
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<p>Find and replace any emails.</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> ($type !== <span class="hljs-string">'url'</span> &amp;&amp; preg_match_all(<span class="hljs-string">'#([\w\.\-\+]+@[a-z0-9\-]+\.[a-z0-9\-\.]+[^[:punct:]\s])#i'</span>, $str, $matches, PREG_OFFSET_CAPTURE))
		{
			<span class="hljs-keyword">foreach</span> (array_reverse($matches[<span class="hljs-number">0</span>]) <span class="hljs-keyword">as</span> $match)
			{
				<span class="hljs-keyword">if</span> (filter_var($match[<span class="hljs-number">0</span>], FILTER_VALIDATE_EMAIL) !== <span class="hljs-keyword">FALSE</span>)
				{
					$str = substr_replace($str, safe_mailto($match[<span class="hljs-number">0</span>]), $match[<span class="hljs-number">1</span>], strlen($match[<span class="hljs-number">0</span>]));
				}
			}
		}

		<span class="hljs-keyword">return</span> $str;
	}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'prep_url'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<div class="dox">
<div class="summary">
<p>Prep URL</p>
</div>
<div class="body">
<p>Simply adds the http:// part if no scheme is included</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>the URL
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prep_url</span><span class="hljs-params">($str = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($str === <span class="hljs-string">'http://'</span> <span class="hljs-keyword">OR</span> $str === <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">return</span> <span class="hljs-string">''</span>;
		}

		$url = parse_url($str);

		<span class="hljs-keyword">if</span> ( ! $url <span class="hljs-keyword">OR</span> ! <span class="hljs-keyword">isset</span>($url[<span class="hljs-string">'scheme'</span>]))
		{
			<span class="hljs-keyword">return</span> <span class="hljs-string">'http://'</span>.$str;
		}

		<span class="hljs-keyword">return</span> $str;
	}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'url_title'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<div class="dox">
<div class="summary">
<p>Create URL Title</p>
</div>
<div class="body">
<p>Takes a &quot;title&quot; string as input and creates a
human-friendly URL string with a &quot;separator&quot; string
as the word separator.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$str Input string
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$separator Word separator 			(usually '-' or '_')
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$lowercase Whether to transform the output string to lowercase
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">url_title</span><span class="hljs-params">($str, $separator = <span class="hljs-string">'-'</span>, $lowercase = FALSE)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($separator === <span class="hljs-string">'dash'</span>)
		{
			$separator = <span class="hljs-string">'-'</span>;
		}
		<span class="hljs-keyword">elseif</span> ($separator === <span class="hljs-string">'underscore'</span>)
		{
			$separator = <span class="hljs-string">'_'</span>;
		}

		$q_separator = preg_quote($separator, <span class="hljs-string">'#'</span>);

		$trans = <span class="hljs-keyword">array</span>(
			<span class="hljs-string">'&amp;.+?;'</span>			=&gt; <span class="hljs-string">''</span>,
			<span class="hljs-string">'[^\w\d _-]'</span>		=&gt; <span class="hljs-string">''</span>,
			<span class="hljs-string">'\s+'</span>			=&gt; $separator,
			<span class="hljs-string">'('</span>.$q_separator.<span class="hljs-string">')+'</span>	=&gt; $separator
		);

		$str = strip_tags($str);
		<span class="hljs-keyword">foreach</span> ($trans <span class="hljs-keyword">as</span> $key =&gt; $val)
		{
			$str = preg_replace(<span class="hljs-string">'#'</span>.$key.<span class="hljs-string">'#i'</span>.(UTF8_ENABLED ? <span class="hljs-string">'u'</span> : <span class="hljs-string">''</span>), $val, $str);
		}

		<span class="hljs-keyword">if</span> ($lowercase === <span class="hljs-keyword">TRUE</span>)
		{
			$str = strtolower($str);
		}

		<span class="hljs-keyword">return</span> trim(trim($str, $separator));
	}
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'redirect'</span>))
{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<div class="dox">
<div class="summary">
<p>Header Redirect</p>
</div>
<div class="body">
<p>Header redirect in two flavors
For very fine grained control over headers, you could use the Output
Library's set_header() function.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$uri URL
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$method Redirect method 			'auto', 'location' or 'refresh'
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$code HTTP Response status code
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">redirect</span><span class="hljs-params">($uri = <span class="hljs-string">''</span>, $method = <span class="hljs-string">'auto'</span>, $code = NULL)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! preg_match(<span class="hljs-string">'#^(\w+:)?//#i'</span>, $uri))
		{
			$uri = site_url($uri);
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>IIS environment likely? Use 'refresh' for better compatibility</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> ($method === <span class="hljs-string">'auto'</span> &amp;&amp; <span class="hljs-keyword">isset</span>($_SERVER[<span class="hljs-string">'SERVER_SOFTWARE'</span>]) &amp;&amp; strpos($_SERVER[<span class="hljs-string">'SERVER_SOFTWARE'</span>], <span class="hljs-string">'Microsoft-IIS'</span>) !== <span class="hljs-keyword">FALSE</span>)
		{
			$method = <span class="hljs-string">'refresh'</span>;
		}
		<span class="hljs-keyword">elseif</span> ($method !== <span class="hljs-string">'refresh'</span> &amp;&amp; (<span class="hljs-keyword">empty</span>($code) <span class="hljs-keyword">OR</span> ! is_numeric($code)))
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>($_SERVER[<span class="hljs-string">'SERVER_PROTOCOL'</span>], $_SERVER[<span class="hljs-string">'REQUEST_METHOD'</span>]) &amp;&amp; $_SERVER[<span class="hljs-string">'SERVER_PROTOCOL'</span>] === <span class="hljs-string">'HTTP/1.1'</span>)
			{
				$code = ($_SERVER[<span class="hljs-string">'REQUEST_METHOD'</span>] !== <span class="hljs-string">'GET'</span>)
					? <span class="hljs-number">303</span>	<span class="hljs-comment">// reference: http://en.wikipedia.org/wiki/Post/Redirect/Get</span>
					: <span class="hljs-number">307</span>;
			}
			<span class="hljs-keyword">else</span>
			{
				$code = <span class="hljs-number">302</span>;
			}
		}

		<span class="hljs-keyword">switch</span> ($method)
		{
			<span class="hljs-keyword">case</span> <span class="hljs-string">'refresh'</span>:
				header(<span class="hljs-string">'Refresh:0;url='</span>.$uri);
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">default</span>:
				header(<span class="hljs-string">'Location: '</span>.$uri, <span class="hljs-keyword">TRUE</span>, $code);
				<span class="hljs-keyword">break</span>;
		}
		<span class="hljs-keyword">exit</span>;
	}
}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
