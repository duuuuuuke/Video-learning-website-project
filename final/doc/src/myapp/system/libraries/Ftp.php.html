<!DOCTYPE html>
<html>
<head>
  <title>Ftp.php</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "src\\myapp\\system\\libraries\\Ftp.php";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>Ftp.php</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="php"><span class="hljs-meta">&lt;?php</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>CodeIgniter</p>
</div>
<div class="body">
<p>An open source application development framework for PHP</p>
<p>This content is released under the MIT License (MIT)</p>
<p>Copyright (c) 2014 - 2019, British Columbia Institute of Technology</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</p>
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">defined(<span class="hljs-string">'BASEPATH'</span>) <span class="hljs-keyword">OR</span> <span class="hljs-keyword">exit</span>(<span class="hljs-string">'No direct script access allowed'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>FTP Class</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CI_FTP</span> </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>FTP Server hostname</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $hostname = <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<div class="dox">
<div class="summary">
<p>FTP Username</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $username = <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<div class="dox">
<div class="summary">
<p>FTP Password</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $password = <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
<p>FTP Server port</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $port = <span class="hljs-number">21</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<div class="dox">
<div class="summary">
<p>Passive mode flag</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $passive = <span class="hljs-keyword">TRUE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<div class="dox">
<div class="summary">
<p>Debug flag</p>
</div>
<div class="body">
<p>Specifies whether to display error messages.</p>
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $debug = <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
<p>Connection ID</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $conn_id;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<div class="dox">
<div class="summary">
<p>Constructor</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$config
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">($config = array<span class="hljs-params">()</span>)</span>
	</span>{
		<span class="hljs-keyword">empty</span>($config) <span class="hljs-keyword">OR</span> <span class="hljs-keyword">$this</span>-&gt;initialize($config);
		log_message(<span class="hljs-string">'info'</span>, <span class="hljs-string">'FTP Class Initialized'</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<div class="dox">
<div class="summary">
<p>Initialize preferences</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$config
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span><span class="hljs-params">($config = array<span class="hljs-params">()</span>)</span>
	</span>{
		<span class="hljs-keyword">foreach</span> ($config <span class="hljs-keyword">as</span> $key =&gt; $val)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;$key))
			{
				<span class="hljs-keyword">$this</span>-&gt;$key = $val;
			}
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<p>Prep the hostname</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">$this</span>-&gt;hostname = preg_replace(<span class="hljs-string">'|.+?://|'</span>, <span class="hljs-string">''</span>, <span class="hljs-keyword">$this</span>-&gt;hostname);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<div class="dox">
<div class="summary">
<p>FTP Connect</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$config Connection values
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">connect</span><span class="hljs-params">($config = array<span class="hljs-params">()</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> (count($config) &gt; <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;initialize($config);
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">FALSE</span> === (<span class="hljs-keyword">$this</span>-&gt;conn_id = @ftp_connect(<span class="hljs-keyword">$this</span>-&gt;hostname, <span class="hljs-keyword">$this</span>-&gt;port)))
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;_error(<span class="hljs-string">'ftp_unable_to_connect'</span>);
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;_login())
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;_error(<span class="hljs-string">'ftp_unable_to_login'</span>);
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<p>Set passive mode if needed</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;passive === <span class="hljs-keyword">TRUE</span>)
		{
			ftp_pasv(<span class="hljs-keyword">$this</span>-&gt;conn_id, <span class="hljs-keyword">TRUE</span>);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<div class="dox">
<div class="summary">
<p>FTP Login</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_login</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> @ftp_login(<span class="hljs-keyword">$this</span>-&gt;conn_id, <span class="hljs-keyword">$this</span>-&gt;username, <span class="hljs-keyword">$this</span>-&gt;password);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<div class="dox">
<div class="summary">
<p>Validates the connection ID</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_is_conn</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! is_resource(<span class="hljs-keyword">$this</span>-&gt;conn_id))
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;_error(<span class="hljs-string">'ftp_no_connection'</span>);
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<div class="dox">
<div class="summary">
<p>Change directory</p>
</div>
<div class="body">
<p>The second parameter lets us momentarily turn off debugging so that
this function can be used to test for the existence of a folder
without throwing an error. There's no FTP equivalent to is_dir()
so we do it by trying to change to a particular directory.
Internally, this parameter is only used by the &quot;mirror&quot; function below.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$path
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$suppress_debug
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">changedir</span><span class="hljs-params">($path, $suppress_debug = FALSE)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;_is_conn())
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		$result = @ftp_chdir(<span class="hljs-keyword">$this</span>-&gt;conn_id, $path);

		<span class="hljs-keyword">if</span> ($result === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span> &amp;&amp; $suppress_debug === <span class="hljs-keyword">FALSE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;_error(<span class="hljs-string">'ftp_unable_to_changedir'</span>);
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<div class="dox">
<div class="summary">
<p>Create a directory</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$path
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$permissions
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mkdir</span><span class="hljs-params">($path, $permissions = NULL)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($path === <span class="hljs-string">''</span> <span class="hljs-keyword">OR</span> ! <span class="hljs-keyword">$this</span>-&gt;_is_conn())
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		$result = @ftp_mkdir(<span class="hljs-keyword">$this</span>-&gt;conn_id, $path);

		<span class="hljs-keyword">if</span> ($result === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;_error(<span class="hljs-string">'ftp_unable_to_mkdir'</span>);
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<p>Set file permissions if needed</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> ($permissions !== <span class="hljs-keyword">NULL</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;chmod($path, (int) $permissions);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<div class="dox">
<div class="summary">
<p>Upload a file to the server</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$locpath
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$rempath
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$mode
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$permissions
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">upload</span><span class="hljs-params">($locpath, $rempath, $mode = <span class="hljs-string">'auto'</span>, $permissions = NULL)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;_is_conn())
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">if</span> ( ! file_exists($locpath))
		{
			<span class="hljs-keyword">$this</span>-&gt;_error(<span class="hljs-string">'ftp_no_source_file'</span>);
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<p>Set the mode if not specified</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> ($mode === <span class="hljs-string">'auto'</span>)
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<p>Get the file extension so we can set the upload type</p>

        </td>
        <td class="code highlight">
          <pre class="php">			$ext = <span class="hljs-keyword">$this</span>-&gt;_getext($locpath);
			$mode = <span class="hljs-keyword">$this</span>-&gt;_settype($ext);
		}

		$mode = ($mode === <span class="hljs-string">'ascii'</span>) ? FTP_ASCII : FTP_BINARY;

		$result = @ftp_put(<span class="hljs-keyword">$this</span>-&gt;conn_id, $rempath, $locpath, $mode);

		<span class="hljs-keyword">if</span> ($result === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;_error(<span class="hljs-string">'ftp_unable_to_upload'</span>);
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<p>Set file permissions if needed</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> ($permissions !== <span class="hljs-keyword">NULL</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;chmod($rempath, (int) $permissions);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<div class="dox">
<div class="summary">
<p>Download a file from a remote server to the local server</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$rempath
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$locpath
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$mode
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">download</span><span class="hljs-params">($rempath, $locpath, $mode = <span class="hljs-string">'auto'</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;_is_conn())
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>Set the mode if not specified</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> ($mode === <span class="hljs-string">'auto'</span>)
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<p>Get the file extension so we can set the upload type</p>

        </td>
        <td class="code highlight">
          <pre class="php">			$ext = <span class="hljs-keyword">$this</span>-&gt;_getext($rempath);
			$mode = <span class="hljs-keyword">$this</span>-&gt;_settype($ext);
		}

		$mode = ($mode === <span class="hljs-string">'ascii'</span>) ? FTP_ASCII : FTP_BINARY;

		$result = @ftp_get(<span class="hljs-keyword">$this</span>-&gt;conn_id, $locpath, $rempath, $mode);

		<span class="hljs-keyword">if</span> ($result === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;_error(<span class="hljs-string">'ftp_unable_to_download'</span>);
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<div class="dox">
<div class="summary">
<p>Rename (or move) a file</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$old_file
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$new_file
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$move
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">rename</span><span class="hljs-params">($old_file, $new_file, $move = FALSE)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;_is_conn())
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		$result = @ftp_rename(<span class="hljs-keyword">$this</span>-&gt;conn_id, $old_file, $new_file);

		<span class="hljs-keyword">if</span> ($result === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;_error(<span class="hljs-string">'ftp_unable_to_'</span>.($move === <span class="hljs-keyword">FALSE</span> ? <span class="hljs-string">'rename'</span> : <span class="hljs-string">'move'</span>));
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<div class="dox">
<div class="summary">
<p>Move a file</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$old_file
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$new_file
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">move</span><span class="hljs-params">($old_file, $new_file)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;rename($old_file, $new_file, <span class="hljs-keyword">TRUE</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<div class="dox">
<div class="summary">
<p>Rename (or move) a file</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$filepath
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delete_file</span><span class="hljs-params">($filepath)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;_is_conn())
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		$result = @ftp_delete(<span class="hljs-keyword">$this</span>-&gt;conn_id, $filepath);

		<span class="hljs-keyword">if</span> ($result === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;_error(<span class="hljs-string">'ftp_unable_to_delete'</span>);
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45"></a>
</div>
<div class="dox">
<div class="summary">
<p>Delete a folder and recursively delete everything (including sub-folders)
contained within it.</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$filepath
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">delete_dir</span><span class="hljs-params">($filepath)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;_is_conn())
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<p>Add a trailing slash to the file path if needed</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$filepath = preg_replace(<span class="hljs-string">'/(.+?)\/*$/'</span>, <span class="hljs-string">'\\1/'</span>, $filepath);

		$list = <span class="hljs-keyword">$this</span>-&gt;list_files($filepath);
		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">empty</span>($list))
		{
			<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count($list); $i &lt; $c; $i++)
			{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<p>If we can't delete the item it's probably a directory,
so we'll recursively call delete_dir()</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">if</span> ( ! preg_match(<span class="hljs-string">'#/\.\.?$#'</span>, $list[$i]) &amp;&amp; ! @ftp_delete(<span class="hljs-keyword">$this</span>-&gt;conn_id, $list[$i]))
				{
					<span class="hljs-keyword">$this</span>-&gt;delete_dir($filepath.$list[$i]);
				}
			}
		}

		<span class="hljs-keyword">if</span> (@ftp_rmdir(<span class="hljs-keyword">$this</span>-&gt;conn_id, $filepath) === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;_error(<span class="hljs-string">'ftp_unable_to_delete'</span>);
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<div class="dox">
<div class="summary">
<p>Set file permissions</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$path File path
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$perm Permissions
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">chmod</span><span class="hljs-params">($path, $perm)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;_is_conn())
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">if</span> (@ftp_chmod(<span class="hljs-keyword">$this</span>-&gt;conn_id, $perm, $path) === <span class="hljs-keyword">FALSE</span>)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;_error(<span class="hljs-string">'ftp_unable_to_chmod'</span>);
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<div class="dox">
<div class="summary">
<p>FTP List files in the specified directory</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$path
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>array
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">list_files</span><span class="hljs-params">($path = <span class="hljs-string">'.'</span>)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_is_conn()
			? ftp_nlist(<span class="hljs-keyword">$this</span>-&gt;conn_id, $path)
			: <span class="hljs-keyword">FALSE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<div class="dox">
<div class="summary">
<p>Read a directory and recreate it remotely</p>
</div>
<div class="body">
<p>This function recursively reads a folder and everything it contains
(including sub-folders) and creates a mirror via FTP based on it.
Whatever the directory structure of the original file path will be
recreated on the server.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$locpath Path to source with trailing slash
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$rempath Path to destination - include the base folder with trailing slash
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">mirror</span><span class="hljs-params">($locpath, $rempath)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;_is_conn())
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54"></a>
</div>
<p>Open the local file path</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> ($fp = @opendir($locpath))
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55"></a>
</div>
<p>Attempt to open the remote file path and try to create it, if it doesn't exist</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;changedir($rempath, <span class="hljs-keyword">TRUE</span>) &amp;&amp; ( ! <span class="hljs-keyword">$this</span>-&gt;mkdir($rempath) <span class="hljs-keyword">OR</span> ! <span class="hljs-keyword">$this</span>-&gt;changedir($rempath)))
			{
				<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
			}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56"></a>
</div>
<p>Recursively read the local directory</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">while</span> (<span class="hljs-keyword">FALSE</span> !== ($file = readdir($fp)))
			{
				<span class="hljs-keyword">if</span> (is_dir($locpath.$file) &amp;&amp; $file[<span class="hljs-number">0</span>] !== <span class="hljs-string">'.'</span>)
				{
					<span class="hljs-keyword">$this</span>-&gt;mirror($locpath.$file.<span class="hljs-string">'/'</span>, $rempath.$file.<span class="hljs-string">'/'</span>);
				}
				<span class="hljs-keyword">elseif</span> ($file[<span class="hljs-number">0</span>] !== <span class="hljs-string">'.'</span>)
				{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57"></a>
</div>
<p>Get the file extension so we can se the upload type</p>

        </td>
        <td class="code highlight">
          <pre class="php">					$ext = <span class="hljs-keyword">$this</span>-&gt;_getext($file);
					$mode = <span class="hljs-keyword">$this</span>-&gt;_settype($ext);

					<span class="hljs-keyword">$this</span>-&gt;upload($locpath.$file, $rempath.$file, $mode);
				}
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59"></a>
</div>
<div class="dox">
<div class="summary">
<p>Extract the file extension</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$filename
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_getext</span><span class="hljs-params">($filename)</span>
	</span>{
		<span class="hljs-keyword">return</span> (($dot = strrpos($filename, <span class="hljs-string">'.'</span>)) === <span class="hljs-keyword">FALSE</span>)
			? <span class="hljs-string">'txt'</span>
			: substr($filename, $dot + <span class="hljs-number">1</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61"></a>
</div>
<div class="dox">
<div class="summary">
<p>Set the upload type</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$ext Filename extension
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_settype</span><span class="hljs-params">($ext)</span>
	</span>{
		<span class="hljs-keyword">return</span> in_array($ext, <span class="hljs-keyword">array</span>(<span class="hljs-string">'txt'</span>, <span class="hljs-string">'text'</span>, <span class="hljs-string">'php'</span>, <span class="hljs-string">'phps'</span>, <span class="hljs-string">'php4'</span>, <span class="hljs-string">'js'</span>, <span class="hljs-string">'css'</span>, <span class="hljs-string">'htm'</span>, <span class="hljs-string">'html'</span>, <span class="hljs-string">'phtml'</span>, <span class="hljs-string">'shtml'</span>, <span class="hljs-string">'log'</span>, <span class="hljs-string">'xml'</span>), <span class="hljs-keyword">TRUE</span>)
			? <span class="hljs-string">'ascii'</span>
			: <span class="hljs-string">'binary'</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63"></a>
</div>
<div class="dox">
<div class="summary">
<p>Close the connection</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">close</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;_is_conn()
			? @ftp_close(<span class="hljs-keyword">$this</span>-&gt;conn_id)
			: <span class="hljs-keyword">FALSE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65"></a>
</div>
<div class="dox">
<div class="summary">
<p>Display error message</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$line
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">_error</span><span class="hljs-params">($line)</span>
	</span>{
		$CI =&amp; get_instance();
		$CI-&gt;lang-&gt;load(<span class="hljs-string">'ftp'</span>);
		show_error($CI-&gt;lang-&gt;line($line));
	}

}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
