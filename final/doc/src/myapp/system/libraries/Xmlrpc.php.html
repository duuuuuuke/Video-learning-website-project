<!DOCTYPE html>
<html>
<head>
  <title>Xmlrpc.php</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "src\\myapp\\system\\libraries\\Xmlrpc.php";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

      <div class="heading h2">
        <a href="#create-and-set-up-xml-parser">Create and Set Up XML Parser</a>
      </div>

      <div class="heading h2">
        <a href="#begin-return-message-parsing-section">Begin Return Message Parsing section</a>
      </div>

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>Xmlrpc.php</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="php"><span class="hljs-meta">&lt;?php</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>CodeIgniter</p>
</div>
<div class="body">
<p>An open source application development framework for PHP</p>
<p>This content is released under the MIT License (MIT)</p>
<p>Copyright (c) 2014 - 2019, British Columbia Institute of Technology</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</p>
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">defined(<span class="hljs-string">'BASEPATH'</span>) <span class="hljs-keyword">OR</span> <span class="hljs-keyword">exit</span>(<span class="hljs-string">'No direct script access allowed'</span>);

<span class="hljs-keyword">if</span> ( ! function_exists(<span class="hljs-string">'xml_parser_create'</span>))
{
	show_error(<span class="hljs-string">'Your PHP installation does not support XML'</span>);
}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC request handler class</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CI_Xmlrpc</span> </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<div class="dox">
<div class="summary">
<p>Debug flag</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $debug		= <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<div class="dox">
<div class="summary">
<p>I4 data type</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcI4	= <span class="hljs-string">'i4'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
<p>Integer data type</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcInt	= <span class="hljs-string">'int'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<div class="dox">
<div class="summary">
<p>Boolean data type</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcBoolean	= <span class="hljs-string">'boolean'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<div class="dox">
<div class="summary">
<p>Double data type</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcDouble	= <span class="hljs-string">'double'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<div class="dox">
<div class="summary">
<p>String data type</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcString	= <span class="hljs-string">'string'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
<p>DateTime format</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcDateTime	= <span class="hljs-string">'dateTime.iso8601'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<div class="dox">
<div class="summary">
<p>Base64 data type</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcBase64	= <span class="hljs-string">'base64'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<div class="dox">
<div class="summary">
<p>Array data type</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcArray	= <span class="hljs-string">'array'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<div class="dox">
<div class="summary">
<p>Struct data type</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcStruct	= <span class="hljs-string">'struct'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<div class="dox">
<div class="summary">
<p>Data types list</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcTypes	= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<div class="dox">
<div class="summary">
<p>Valid parents list</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $valid_parents	= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<div class="dox">
<div class="summary">
<p>Response error numbers list</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcerr		= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<div class="dox">
<div class="summary">
<p>Response error messages list</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcstr		= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encoding charset</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpc_defencoding	= <span class="hljs-string">'UTF-8'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC client name</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcName		= <span class="hljs-string">'XML-RPC for CodeIgniter'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC version</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcVersion		= <span class="hljs-string">'1.1'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<div class="dox">
<div class="summary">
<p>Start of user errors</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcerruser		= <span class="hljs-number">800</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<div class="dox">
<div class="summary">
<p>Start of XML parse errors</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpcerrxml		= <span class="hljs-number">100</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<div class="dox">
<div class="summary">
<p>Backslash replacement value</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xmlrpc_backslash	= <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC Client object</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $client;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC Method name</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $method;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC Data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $data;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC Message</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $message			= <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<div class="dox">
<div class="summary">
<p>Request error message</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $error			= <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC result object</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $result;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC Response</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $response		= <span class="hljs-keyword">array</span>(); <span class="hljs-comment">// Response from remote server</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<div class="dox">
<div class="summary">
<p>XSS Filter flag</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xss_clean		= <span class="hljs-keyword">TRUE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<div class="dox">
<div class="summary">
<p>Constructor</p>
</div>
<div class="body">
<p>Initializes property default values</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$config
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">($config = array<span class="hljs-params">()</span>)</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;xmlrpc_backslash = chr(<span class="hljs-number">92</span>).chr(<span class="hljs-number">92</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<p>Types for info sent back and forth</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">$this</span>-&gt;xmlrpcTypes = <span class="hljs-keyword">array</span>(
			<span class="hljs-keyword">$this</span>-&gt;xmlrpcI4	 		=&gt; <span class="hljs-string">'1'</span>,
			<span class="hljs-keyword">$this</span>-&gt;xmlrpcInt		=&gt; <span class="hljs-string">'1'</span>,
			<span class="hljs-keyword">$this</span>-&gt;xmlrpcBoolean	=&gt; <span class="hljs-string">'1'</span>,
			<span class="hljs-keyword">$this</span>-&gt;xmlrpcString		=&gt; <span class="hljs-string">'1'</span>,
			<span class="hljs-keyword">$this</span>-&gt;xmlrpcDouble		=&gt; <span class="hljs-string">'1'</span>,
			<span class="hljs-keyword">$this</span>-&gt;xmlrpcDateTime	=&gt; <span class="hljs-string">'1'</span>,
			<span class="hljs-keyword">$this</span>-&gt;xmlrpcBase64		=&gt; <span class="hljs-string">'1'</span>,
			<span class="hljs-keyword">$this</span>-&gt;xmlrpcArray		=&gt; <span class="hljs-string">'2'</span>,
			<span class="hljs-keyword">$this</span>-&gt;xmlrpcStruct		=&gt; <span class="hljs-string">'3'</span>
		);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>Array of Valid Parents for Various XML-RPC elements</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">$this</span>-&gt;valid_parents = <span class="hljs-keyword">array</span>(<span class="hljs-string">'BOOLEAN'</span> =&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'VALUE'</span>),
			<span class="hljs-string">'I4'</span>				=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'VALUE'</span>),
			<span class="hljs-string">'INT'</span>				=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'VALUE'</span>),
			<span class="hljs-string">'STRING'</span>			=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'VALUE'</span>),
			<span class="hljs-string">'DOUBLE'</span>			=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'VALUE'</span>),
			<span class="hljs-string">'DATETIME.ISO8601'</span>	=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'VALUE'</span>),
			<span class="hljs-string">'BASE64'</span>			=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'VALUE'</span>),
			<span class="hljs-string">'ARRAY'</span>			=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'VALUE'</span>),
			<span class="hljs-string">'STRUCT'</span>			=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'VALUE'</span>),
			<span class="hljs-string">'PARAM'</span>			=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'PARAMS'</span>),
			<span class="hljs-string">'METHODNAME'</span>		=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'METHODCALL'</span>),
			<span class="hljs-string">'PARAMS'</span>			=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'METHODCALL'</span>, <span class="hljs-string">'METHODRESPONSE'</span>),
			<span class="hljs-string">'MEMBER'</span>			=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'STRUCT'</span>),
			<span class="hljs-string">'NAME'</span>				=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'MEMBER'</span>),
			<span class="hljs-string">'DATA'</span>				=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'ARRAY'</span>),
			<span class="hljs-string">'FAULT'</span>			=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'METHODRESPONSE'</span>),
			<span class="hljs-string">'VALUE'</span>			=&gt; <span class="hljs-keyword">array</span>(<span class="hljs-string">'MEMBER'</span>, <span class="hljs-string">'DATA'</span>, <span class="hljs-string">'PARAM'</span>, <span class="hljs-string">'FAULT'</span>)
		);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<p>XML-RPC Responses</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'unknown_method'</span>] = <span class="hljs-string">'1'</span>;
		<span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'unknown_method'</span>] = <span class="hljs-string">'This is not a known method for this XML-RPC Server'</span>;
		<span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'invalid_return'</span>] = <span class="hljs-string">'2'</span>;
		<span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'invalid_return'</span>] = <span class="hljs-string">'The XML data received was either invalid or not in the correct form for XML-RPC. Turn on debugging to examine the XML data further.'</span>;
		<span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'incorrect_params'</span>] = <span class="hljs-string">'3'</span>;
		<span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'incorrect_params'</span>] = <span class="hljs-string">'Incorrect parameters were passed to method'</span>;
		<span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'introspect_unknown'</span>] = <span class="hljs-string">'4'</span>;
		<span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'introspect_unknown'</span>] = <span class="hljs-string">'Cannot inspect signature for request: method unknown'</span>;
		<span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'http_error'</span>] = <span class="hljs-string">'5'</span>;
		<span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'http_error'</span>] = <span class="hljs-string">"Did not receive a '200 OK' response from remote server."</span>;
		<span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'no_data'</span>] = <span class="hljs-string">'6'</span>;
		<span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'no_data'</span>] = <span class="hljs-string">'No data received from server.'</span>;

		<span class="hljs-keyword">$this</span>-&gt;initialize($config);

		log_message(<span class="hljs-string">'info'</span>, <span class="hljs-string">'XML-RPC Class Initialized'</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<div class="dox">
<div class="summary">
<p>Initialize</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$config
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span><span class="hljs-params">($config = array<span class="hljs-params">()</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> (count($config) &gt; <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">foreach</span> ($config <span class="hljs-keyword">as</span> $key =&gt; $val)
			{
				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;$key))
				{
					<span class="hljs-keyword">$this</span>-&gt;$key = $val;
				}
			}
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse server URL</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$url
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$port
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$proxy
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$proxy_port
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">server</span><span class="hljs-params">($url, $port = <span class="hljs-number">80</span>, $proxy = FALSE, $proxy_port = <span class="hljs-number">8080</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> (stripos($url, <span class="hljs-string">'http'</span>) !== <span class="hljs-number">0</span>)
		{
			$url = <span class="hljs-string">'http://'</span>.$url;
		}

		$parts = parse_url($url);

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>($parts[<span class="hljs-string">'user'</span>], $parts[<span class="hljs-string">'pass'</span>]))
		{
			$parts[<span class="hljs-string">'host'</span>] = $parts[<span class="hljs-string">'user'</span>].<span class="hljs-string">':'</span>.$parts[<span class="hljs-string">'pass'</span>].<span class="hljs-string">'@'</span>.$parts[<span class="hljs-string">'host'</span>];
		}

		$path = <span class="hljs-keyword">isset</span>($parts[<span class="hljs-string">'path'</span>]) ? $parts[<span class="hljs-string">'path'</span>] : <span class="hljs-string">'/'</span>;

		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">empty</span>($parts[<span class="hljs-string">'query'</span>]))
		{
			$path .= <span class="hljs-string">'?'</span>.$parts[<span class="hljs-string">'query'</span>];
		}

		<span class="hljs-keyword">$this</span>-&gt;client = <span class="hljs-keyword">new</span> XML_RPC_Client($path, $parts[<span class="hljs-string">'host'</span>], $port, $proxy, $proxy_port);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<div class="dox">
<div class="summary">
<p>Set Timeout</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$seconds
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">timeout</span><span class="hljs-params">($seconds = <span class="hljs-number">5</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;client !== <span class="hljs-keyword">NULL</span> &amp;&amp; is_int($seconds))
		{
			<span class="hljs-keyword">$this</span>-&gt;client-&gt;timeout = $seconds;
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45"></a>
</div>
<div class="dox">
<div class="summary">
<p>Set Methods</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$function Method name
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">method</span><span class="hljs-params">($function)</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;method = $function;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<div class="dox">
<div class="summary">
<p>Take Array of Data and Create Objects</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$incoming
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">request</span><span class="hljs-params">($incoming)</span>
	</span>{
		<span class="hljs-keyword">if</span> ( ! is_array($incoming))
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<p>Send Error</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">$this</span>-&gt;data = <span class="hljs-keyword">array</span>();

		<span class="hljs-keyword">foreach</span> ($incoming <span class="hljs-keyword">as</span> $key =&gt; $value)
		{
			<span class="hljs-keyword">$this</span>-&gt;data[$key] = <span class="hljs-keyword">$this</span>-&gt;values_parsing($value);
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<div class="dox">
<div class="summary">
<p>Set Debug</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
<span>$flag
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">set_debug</span><span class="hljs-params">($flag = TRUE)</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;debug = ($flag === <span class="hljs-keyword">TRUE</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-51" id="section-51"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-52" id="section-52"></a>
</div>
<div class="dox">
<div class="summary">
<p>Values Parsing</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$value
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>object
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">values_parsing</span><span class="hljs-params">($value)</span>
	</span>{
		<span class="hljs-keyword">if</span> (is_array($value) &amp;&amp; array_key_exists(<span class="hljs-number">0</span>, $value))
		{
			<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">isset</span>($value[<span class="hljs-number">1</span>], <span class="hljs-keyword">$this</span>-&gt;xmlrpcTypes[$value[<span class="hljs-number">1</span>]]))
			{
				$temp = <span class="hljs-keyword">new</span> XML_RPC_Values($value[<span class="hljs-number">0</span>], (is_array($value[<span class="hljs-number">0</span>]) ? <span class="hljs-string">'array'</span> : <span class="hljs-string">'string'</span>));
			}
			<span class="hljs-keyword">else</span>
			{
				<span class="hljs-keyword">if</span> (is_array($value[<span class="hljs-number">0</span>]) &amp;&amp; ($value[<span class="hljs-number">1</span>] === <span class="hljs-string">'struct'</span> <span class="hljs-keyword">OR</span> $value[<span class="hljs-number">1</span>] === <span class="hljs-string">'array'</span>))
				{
					<span class="hljs-keyword">foreach</span> (array_keys($value[<span class="hljs-number">0</span>]) <span class="hljs-keyword">as</span> $k)
					{
						$value[<span class="hljs-number">0</span>][$k] = <span class="hljs-keyword">$this</span>-&gt;values_parsing($value[<span class="hljs-number">0</span>][$k]);
					}
				}

				$temp = <span class="hljs-keyword">new</span> XML_RPC_Values($value[<span class="hljs-number">0</span>], $value[<span class="hljs-number">1</span>]);
			}
		}
		<span class="hljs-keyword">else</span>
		{
			$temp = <span class="hljs-keyword">new</span> XML_RPC_Values($value, <span class="hljs-string">'string'</span>);
		}

		<span class="hljs-keyword">return</span> $temp;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-53" id="section-53"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-54" id="section-54"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sends XML-RPC Request</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>bool
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">send_request</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;message = <span class="hljs-keyword">new</span> XML_RPC_Message(<span class="hljs-keyword">$this</span>-&gt;method, <span class="hljs-keyword">$this</span>-&gt;data);
		<span class="hljs-keyword">$this</span>-&gt;message-&gt;debug = <span class="hljs-keyword">$this</span>-&gt;debug;

		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">$this</span>-&gt;result = <span class="hljs-keyword">$this</span>-&gt;client-&gt;send(<span class="hljs-keyword">$this</span>-&gt;message) <span class="hljs-keyword">OR</span> ! is_object(<span class="hljs-keyword">$this</span>-&gt;result-&gt;val))
		{
			<span class="hljs-keyword">$this</span>-&gt;error = <span class="hljs-keyword">$this</span>-&gt;result-&gt;errstr;
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">FALSE</span>;
		}

		<span class="hljs-keyword">$this</span>-&gt;response = <span class="hljs-keyword">$this</span>-&gt;result-&gt;decode();
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">TRUE</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-55" id="section-55"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-56" id="section-56"></a>
</div>
<div class="dox">
<div class="summary">
<p>Returns Error</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display_error</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;error;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-57" id="section-57"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-58" id="section-58"></a>
</div>
<div class="dox">
<div class="summary">
<p>Returns Remote Server Response</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">display_response</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;response;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-59" id="section-59"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-60" id="section-60"></a>
</div>
<div class="dox">
<div class="summary">
<p>Sends an Error Message for Server Request</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$number
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$message
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>object
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">send_error_message</span><span class="hljs-params">($number, $message)</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XML_RPC_Response(<span class="hljs-number">0</span>, $number, $message);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-61" id="section-61"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-62" id="section-62"></a>
</div>
<div class="dox">
<div class="summary">
<p>Send Response for Server Request</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$response
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>object
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">send_response</span><span class="hljs-params">($response)</span>
	</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-63" id="section-63"></a>
</div>
<p>$response should be array of values, which will be parsed
based on their data and type into a valid group of XML-RPC values</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XML_RPC_Response(<span class="hljs-keyword">$this</span>-&gt;values_parsing($response));
	}

} <span class="hljs-comment">// END XML_RPC Class</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-64" id="section-64"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC Client class</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XML_RPC_Client</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CI_Xmlrpc</span>
</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-65" id="section-65"></a>
</div>
<div class="dox">
<div class="summary">
<p>Path</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $path			= <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-66" id="section-66"></a>
</div>
<div class="dox">
<div class="summary">
<p>Server hostname</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $server			= <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-67" id="section-67"></a>
</div>
<div class="dox">
<div class="summary">
<p>Server port</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $port			= <span class="hljs-number">80</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-68" id="section-68"></a>
</div>
<div class="dox">
<div class="summary">
<p>Server username</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $username;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-69" id="section-69"></a>
</div>
<div class="dox">
<div class="summary">
<p>Server password</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $password;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-70" id="section-70"></a>
</div>
<div class="dox">
<div class="summary">
<p>Proxy hostname</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $proxy			= <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-71" id="section-71"></a>
</div>
<div class="dox">
<div class="summary">
<p>Proxy port</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $proxy_port		= <span class="hljs-number">8080</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-72" id="section-72"></a>
</div>
<div class="dox">
<div class="summary">
<p>Error number</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $errno			= <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-73" id="section-73"></a>
</div>
<div class="dox">
<div class="summary">
<p>Error message</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $errstring		= <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-74" id="section-74"></a>
</div>
<div class="dox">
<div class="summary">
<p>Timeout in seconds</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $timeout		= <span class="hljs-number">5</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-75" id="section-75"></a>
</div>
<div class="dox">
<div class="summary">
<p>No Multicall flag</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $no_multicall	= <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-76" id="section-76"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-77" id="section-77"></a>
</div>
<div class="dox">
<div class="summary">
<p>Constructor</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$path
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">object</span>
<span>$server
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$port
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$proxy
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$proxy_port
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">($path, $server, $port = <span class="hljs-number">80</span>, $proxy = FALSE, $proxy_port = <span class="hljs-number">8080</span>)</span>
	</span>{
		<span class="hljs-keyword">parent</span>::__construct();

		$url = parse_url(<span class="hljs-string">'http://'</span>.$server);

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>($url[<span class="hljs-string">'user'</span>], $url[<span class="hljs-string">'pass'</span>]))
		{
			<span class="hljs-keyword">$this</span>-&gt;username = $url[<span class="hljs-string">'user'</span>];
			<span class="hljs-keyword">$this</span>-&gt;password = $url[<span class="hljs-string">'pass'</span>];
		}

		<span class="hljs-keyword">$this</span>-&gt;port = $port;
		<span class="hljs-keyword">$this</span>-&gt;server = $url[<span class="hljs-string">'host'</span>];
		<span class="hljs-keyword">$this</span>-&gt;path = $path;
		<span class="hljs-keyword">$this</span>-&gt;proxy = $proxy;
		<span class="hljs-keyword">$this</span>-&gt;proxy_port = $proxy_port;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-78" id="section-78"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-79" id="section-79"></a>
</div>
<div class="dox">
<div class="summary">
<p>Send message</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$msg
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>object
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">send</span><span class="hljs-params">($msg)</span>
	</span>{
		<span class="hljs-keyword">if</span> (is_array($msg))
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-80" id="section-80"></a>
</div>
<p>Multi-call disabled</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XML_RPC_Response(<span class="hljs-number">0</span>, <span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'multicall_recursion'</span>], <span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'multicall_recursion'</span>]);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;sendPayload($msg);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-81" id="section-81"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-82" id="section-82"></a>
</div>
<div class="dox">
<div class="summary">
<p>Send payload</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">object</span>
<span>$msg
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>object
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">sendPayload</span><span class="hljs-params">($msg)</span>
	</span>{
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;proxy === <span class="hljs-keyword">FALSE</span>)
		{
			$server = <span class="hljs-keyword">$this</span>-&gt;server;
			$port = <span class="hljs-keyword">$this</span>-&gt;port;
		}
		<span class="hljs-keyword">else</span>
		{
			$server = <span class="hljs-keyword">$this</span>-&gt;proxy;
			$port = <span class="hljs-keyword">$this</span>-&gt;proxy_port;
		}

		$fp = @fsockopen($server, $port, <span class="hljs-keyword">$this</span>-&gt;errno, <span class="hljs-keyword">$this</span>-&gt;errstring, <span class="hljs-keyword">$this</span>-&gt;timeout);

		<span class="hljs-keyword">if</span> ( ! is_resource($fp))
		{
			error_log(<span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'http_error'</span>]);
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XML_RPC_Response(<span class="hljs-number">0</span>, <span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'http_error'</span>], <span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'http_error'</span>]);
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>($msg-&gt;payload))
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-83" id="section-83"></a>
</div>
<p>$msg = XML_RPC_Messages</p>

        </td>
        <td class="code highlight">
          <pre class="php">			$msg-&gt;createPayload();
		}

		$r = <span class="hljs-string">"\r\n"</span>;
		$op = <span class="hljs-string">'POST '</span>.<span class="hljs-keyword">$this</span>-&gt;path.<span class="hljs-string">' HTTP/1.0'</span>.$r
			.<span class="hljs-string">'Host: '</span>.<span class="hljs-keyword">$this</span>-&gt;server.$r
			.<span class="hljs-string">'Content-Type: text/xml'</span>.$r
			.(<span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;username, <span class="hljs-keyword">$this</span>-&gt;password) ? <span class="hljs-string">'Authorization: Basic '</span>.base64_encode(<span class="hljs-keyword">$this</span>-&gt;username.<span class="hljs-string">':'</span>.<span class="hljs-keyword">$this</span>-&gt;password).$r : <span class="hljs-string">''</span>)
			.<span class="hljs-string">'User-Agent: '</span>.<span class="hljs-keyword">$this</span>-&gt;xmlrpcName.$r
			.<span class="hljs-string">'Content-Length: '</span>.strlen($msg-&gt;payload).$r.$r
			.$msg-&gt;payload;

		stream_set_timeout($fp, <span class="hljs-keyword">$this</span>-&gt;timeout); <span class="hljs-comment">// set timeout for subsequent operations</span>

		<span class="hljs-keyword">for</span> ($written = $timestamp = <span class="hljs-number">0</span>, $length = strlen($op); $written &lt; $length; $written += $result)
		{
			<span class="hljs-keyword">if</span> (($result = fwrite($fp, substr($op, $written))) === <span class="hljs-keyword">FALSE</span>)
			{
				<span class="hljs-keyword">break</span>;
			}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-84" id="section-84"></a>
</div>
<p>See https://bugs.php.net/bug.php?id=39598 and http://php.net/manual/en/function.fwrite.php#96951</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">elseif</span> ($result === <span class="hljs-number">0</span>)
			{
				<span class="hljs-keyword">if</span> ($timestamp === <span class="hljs-number">0</span>)
				{
					$timestamp = time();
				}
				<span class="hljs-keyword">elseif</span> ($timestamp &lt; (time() - <span class="hljs-keyword">$this</span>-&gt;timeout))
				{
					$result = <span class="hljs-keyword">FALSE</span>;
					<span class="hljs-keyword">break</span>;
				}
			}
			<span class="hljs-keyword">else</span>
			{
				$timestamp = <span class="hljs-number">0</span>;
			}
		}

		<span class="hljs-keyword">if</span> ($result === <span class="hljs-keyword">FALSE</span>)
		{
			error_log(<span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'http_error'</span>]);
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XML_RPC_Response(<span class="hljs-number">0</span>, <span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'http_error'</span>], <span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'http_error'</span>]);
		}

		$resp = $msg-&gt;parseResponse($fp);
		fclose($fp);
		<span class="hljs-keyword">return</span> $resp;
	}

} <span class="hljs-comment">// END XML_RPC_Client Class</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-85" id="section-85"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC Response class</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XML_RPC_Response</span>
</span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-86" id="section-86"></a>
</div>
<div class="dox">
<div class="summary">
<p>Value</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $val		= <span class="hljs-number">0</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-87" id="section-87"></a>
</div>
<div class="dox">
<div class="summary">
<p>Error number</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $errno		= <span class="hljs-number">0</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-88" id="section-88"></a>
</div>
<div class="dox">
<div class="summary">
<p>Error message</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $errstr		= <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-89" id="section-89"></a>
</div>
<div class="dox">
<div class="summary">
<p>Headers list</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $headers		= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-90" id="section-90"></a>
</div>
<div class="dox">
<div class="summary">
<p>XSS Filter flag</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xss_clean	= <span class="hljs-keyword">TRUE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-91" id="section-91"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-92" id="section-92"></a>
</div>
<div class="dox">
<div class="summary">
<p>Constructor</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$val
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>$code
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$fstr
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">($val, $code = <span class="hljs-number">0</span>, $fstr = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($code !== <span class="hljs-number">0</span>)
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-93" id="section-93"></a>
</div>
<p>error</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">$this</span>-&gt;errno = $code;
			<span class="hljs-keyword">$this</span>-&gt;errstr = htmlspecialchars($fstr,
							(is_php(<span class="hljs-string">'5.4'</span>) ? ENT_XML1 | ENT_NOQUOTES : ENT_NOQUOTES),
							<span class="hljs-string">'UTF-8'</span>);
		}
		<span class="hljs-keyword">elseif</span> ( ! is_object($val))
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-94" id="section-94"></a>
</div>
<p>programmer error, not an object</p>

        </td>
        <td class="code highlight">
          <pre class="php">			error_log(<span class="hljs-string">"Invalid type '"</span>.gettype($val).<span class="hljs-string">"' (value: "</span>.$val.<span class="hljs-string">') passed to XML_RPC_Response. Defaulting to empty value.'</span>);
			<span class="hljs-keyword">$this</span>-&gt;val = <span class="hljs-keyword">new</span> XML_RPC_Values();
		}
		<span class="hljs-keyword">else</span>
		{
			<span class="hljs-keyword">$this</span>-&gt;val = $val;
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-95" id="section-95"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-96" id="section-96"></a>
</div>
<div class="dox">
<div class="summary">
<p>Fault code</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>int
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">faultCode</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;errno;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-97" id="section-97"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-98" id="section-98"></a>
</div>
<div class="dox">
<div class="summary">
<p>Fault string</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">faultString</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;errstr;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-99" id="section-99"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-100" id="section-100"></a>
</div>
<div class="dox">
<div class="summary">
<p>Value</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>mixed
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">value</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;val;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-101" id="section-101"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-102" id="section-102"></a>
</div>
<div class="dox">
<div class="summary">
<p>Prepare response</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string xml
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">prepare_response</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;methodResponse&gt;\n"</span>
			.(<span class="hljs-keyword">$this</span>-&gt;errno
				? <span class="hljs-string">'&lt;fault&gt;
	&lt;value&gt;
		&lt;struct&gt;
			&lt;member&gt;
				&lt;name&gt;faultCode&lt;/name&gt;
				&lt;value&gt;&lt;int&gt;'</span>.<span class="hljs-keyword">$this</span>-&gt;errno.<span class="hljs-string">'&lt;/int&gt;&lt;/value&gt;
			&lt;/member&gt;
			&lt;member&gt;
				&lt;name&gt;faultString&lt;/name&gt;
				&lt;value&gt;&lt;string&gt;'</span>.<span class="hljs-keyword">$this</span>-&gt;errstr.<span class="hljs-string">'&lt;/string&gt;&lt;/value&gt;
			&lt;/member&gt;
		&lt;/struct&gt;
	&lt;/value&gt;
&lt;/fault&gt;'</span>
				: <span class="hljs-string">"&lt;params&gt;\n&lt;param&gt;\n"</span>.<span class="hljs-keyword">$this</span>-&gt;val-&gt;serialize_class().<span class="hljs-string">"&lt;/param&gt;\n&lt;/params&gt;"</span>)
			.<span class="hljs-string">"\n&lt;/methodResponse&gt;"</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-103" id="section-103"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-104" id="section-104"></a>
</div>
<div class="dox">
<div class="summary">
<p>Decode</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$array
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>array
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decode</span><span class="hljs-params">($array = NULL)</span>
	</span>{
		$CI =&amp; get_instance();

		<span class="hljs-keyword">if</span> (is_array($array))
		{
			<span class="hljs-keyword">foreach</span> ($array <span class="hljs-keyword">as</span> $key =&gt; &amp;$value)
			{
				<span class="hljs-keyword">if</span> (is_array($value))
				{
					$array[$key] = <span class="hljs-keyword">$this</span>-&gt;decode($value);
				}
				<span class="hljs-keyword">elseif</span> (<span class="hljs-keyword">$this</span>-&gt;xss_clean)
				{
					$array[$key] = $CI-&gt;security-&gt;xss_clean($value);
				}
			}

			<span class="hljs-keyword">return</span> $array;
		}

		$result = <span class="hljs-keyword">$this</span>-&gt;xmlrpc_decoder(<span class="hljs-keyword">$this</span>-&gt;val);

		<span class="hljs-keyword">if</span> (is_array($result))
		{
			$result = <span class="hljs-keyword">$this</span>-&gt;decode($result);
		}
		<span class="hljs-keyword">elseif</span> (<span class="hljs-keyword">$this</span>-&gt;xss_clean)
		{
			$result = $CI-&gt;security-&gt;xss_clean($result);
		}

		<span class="hljs-keyword">return</span> $result;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-105" id="section-105"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-106" id="section-106"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC Object to PHP Types</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>array
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">xmlrpc_decoder</span><span class="hljs-params">($xmlrpc_val)</span>
	</span>{
		$kind = $xmlrpc_val-&gt;kindOf();

		<span class="hljs-keyword">if</span> ($kind === <span class="hljs-string">'scalar'</span>)
		{
			<span class="hljs-keyword">return</span> $xmlrpc_val-&gt;scalarval();
		}
		<span class="hljs-keyword">elseif</span> ($kind === <span class="hljs-string">'array'</span>)
		{
			reset($xmlrpc_val-&gt;me);
			$b = current($xmlrpc_val-&gt;me);
			$arr = <span class="hljs-keyword">array</span>();

			<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $size = count($b); $i &lt; $size; $i++)
			{
				$arr[] = <span class="hljs-keyword">$this</span>-&gt;xmlrpc_decoder($xmlrpc_val-&gt;me[<span class="hljs-string">'array'</span>][$i]);
			}
			<span class="hljs-keyword">return</span> $arr;
		}
		<span class="hljs-keyword">elseif</span> ($kind === <span class="hljs-string">'struct'</span>)
		{
			reset($xmlrpc_val-&gt;me[<span class="hljs-string">'struct'</span>]);
			$arr = <span class="hljs-keyword">array</span>();

			<span class="hljs-keyword">foreach</span> ($xmlrpc_val-&gt;me[<span class="hljs-string">'struct'</span>] <span class="hljs-keyword">as</span> $key =&gt; &amp;$value)
			{
				$arr[$key] = <span class="hljs-keyword">$this</span>-&gt;xmlrpc_decoder($value);
			}

			<span class="hljs-keyword">return</span> $arr;
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-107" id="section-107"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-108" id="section-108"></a>
</div>
<div class="dox">
<div class="summary">
<p>ISO-8601 time to server or UTC time</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>int unix timestamp
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">iso8601_decode</span><span class="hljs-params">($time, $utc = FALSE)</span>
	</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-109" id="section-109"></a>
</div>
<p>Return a time in the localtime, or UTC</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$t = <span class="hljs-number">0</span>;
		<span class="hljs-keyword">if</span> (preg_match(<span class="hljs-string">'/([0-9]{4})([0-9]{2})([0-9]{2})T([0-9]{2}):([0-9]{2}):([0-9]{2})/'</span>, $time, $regs))
		{
			$fnc = ($utc === <span class="hljs-keyword">TRUE</span>) ? <span class="hljs-string">'gmmktime'</span> : <span class="hljs-string">'mktime'</span>;
			$t = $fnc($regs[<span class="hljs-number">4</span>], $regs[<span class="hljs-number">5</span>], $regs[<span class="hljs-number">6</span>], $regs[<span class="hljs-number">2</span>], $regs[<span class="hljs-number">3</span>], $regs[<span class="hljs-number">1</span>]);
		}
		<span class="hljs-keyword">return</span> $t;
	}

} <span class="hljs-comment">// END XML_RPC_Response Class</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-110" id="section-110"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC Message class</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XML_RPC_Message</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CI_Xmlrpc</span>
</span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-111" id="section-111"></a>
</div>
<div class="dox">
<div class="summary">
<p>Payload</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $payload;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-112" id="section-112"></a>
</div>
<div class="dox">
<div class="summary">
<p>Method name</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $method_name;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-113" id="section-113"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parameter list</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $params		= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-114" id="section-114"></a>
</div>
<div class="dox">
<div class="summary">
<p>XH?</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $xh		= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-115" id="section-115"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-116" id="section-116"></a>
</div>
<div class="dox">
<div class="summary">
<p>Constructor</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$method
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$pars
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">($method, $pars = FALSE)</span>
	</span>{
		<span class="hljs-keyword">parent</span>::__construct();

		<span class="hljs-keyword">$this</span>-&gt;method_name = $method;
		<span class="hljs-keyword">if</span> (is_array($pars) &amp;&amp; count($pars) &gt; <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count($pars); $i &lt; $c; $i++)
			{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-117" id="section-117"></a>
</div>
<p>$pars[$i] = XML_RPC_Values</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">$this</span>-&gt;params[] = $pars[$i];
			}
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-118" id="section-118"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-119" id="section-119"></a>
</div>
<div class="dox">
<div class="summary">
<p>Create Payload to Send</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">createPayload</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;payload = <span class="hljs-string">'&lt;?xml version="1.0"?'</span>.<span class="hljs-string">"&gt;\r\n&lt;methodCall&gt;\r\n"</span>
				.<span class="hljs-string">'&lt;methodName&gt;'</span>.<span class="hljs-keyword">$this</span>-&gt;method_name.<span class="hljs-string">"&lt;/methodName&gt;\r\n"</span>
				.<span class="hljs-string">"&lt;params&gt;\r\n"</span>;

		<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count(<span class="hljs-keyword">$this</span>-&gt;params); $i &lt; $c; $i++)
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-120" id="section-120"></a>
</div>
<p>$p = XML_RPC_Values</p>

        </td>
        <td class="code highlight">
          <pre class="php">			$p = <span class="hljs-keyword">$this</span>-&gt;params[$i];
			<span class="hljs-keyword">$this</span>-&gt;payload .= <span class="hljs-string">"&lt;param&gt;\r\n"</span>.$p-&gt;serialize_class().<span class="hljs-string">"&lt;/param&gt;\r\n"</span>;
		}

		<span class="hljs-keyword">$this</span>-&gt;payload .= <span class="hljs-string">"&lt;/params&gt;\r\n&lt;/methodCall&gt;\r\n"</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-121" id="section-121"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-122" id="section-122"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse External XML-RPC Server's Response</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">resource</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>object
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parseResponse</span><span class="hljs-params">($fp)</span>
	</span>{
		$data = <span class="hljs-string">''</span>;

		<span class="hljs-keyword">while</span> ($datum = fread($fp, <span class="hljs-number">4096</span>))
		{
			$data .= $datum;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-123" id="section-123"></a>
</div>
<p>Display HTTP content for debugging</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
		{
			<span class="hljs-keyword">echo</span> <span class="hljs-string">"&lt;pre&gt;---DATA---\n"</span>.htmlspecialchars($data).<span class="hljs-string">"\n---END DATA---\n\n&lt;/pre&gt;"</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-124" id="section-124"></a>
</div>
<p>Check for data</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> ($data === <span class="hljs-string">''</span>)
		{
			error_log(<span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'no_data'</span>]);
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XML_RPC_Response(<span class="hljs-number">0</span>, <span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'no_data'</span>], <span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'no_data'</span>]);
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-125" id="section-125"></a>
</div>
<p>Check for HTTP 200 Response</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (strpos($data, <span class="hljs-string">'HTTP'</span>) === <span class="hljs-number">0</span> &amp;&amp; ! preg_match(<span class="hljs-string">'/^HTTP\/[0-9\.]+ 200 /'</span>, $data))
		{
			$errstr = substr($data, <span class="hljs-number">0</span>, strpos($data, <span class="hljs-string">"\n"</span>)<span class="hljs-number">-1</span>);
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XML_RPC_Response(<span class="hljs-number">0</span>, <span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'http_error'</span>], <span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'http_error'</span>].<span class="hljs-string">' ('</span>.$errstr.<span class="hljs-string">')'</span>);
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <hr>
<div class="pilwrap" id="create-and-set-up-xml-parser">
  <h2>
    <a href="#create-and-set-up-xml-parser" name="create-and-set-up-xml-parser" class="pilcrow"></a>
Create and Set Up XML Parser
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">
		$parser = xml_parser_create(<span class="hljs-keyword">$this</span>-&gt;xmlrpc_defencoding);
		$pname = (string) $parser;
		<span class="hljs-keyword">$this</span>-&gt;xh[$pname] = <span class="hljs-keyword">array</span>(
			<span class="hljs-string">'isf'</span>		=&gt; <span class="hljs-number">0</span>,
			<span class="hljs-string">'ac'</span>		=&gt; <span class="hljs-string">''</span>,
			<span class="hljs-string">'headers'</span>	=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'stack'</span>		=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'valuestack'</span>	=&gt; <span class="hljs-keyword">array</span>(),
			<span class="hljs-string">'isf_reason'</span>	=&gt; <span class="hljs-number">0</span>
		);

		xml_set_object($parser, <span class="hljs-keyword">$this</span>);
		xml_parser_set_option($parser, XML_OPTION_CASE_FOLDING, <span class="hljs-keyword">TRUE</span>);
		xml_set_element_handler($parser, <span class="hljs-string">'open_tag'</span>, <span class="hljs-string">'closing_tag'</span>);
		xml_set_character_data_handler($parser, <span class="hljs-string">'character_data'</span>);
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-127" id="section-127"></a>
</div>
<p>xml_set_default_handler($parser, 'default_handler');</p>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-128" id="section-128"></a>
</div>
<p>Get headers</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$lines = explode(<span class="hljs-string">"\r\n"</span>, $data);
		<span class="hljs-keyword">while</span> (($line = array_shift($lines)))
		{
			<span class="hljs-keyword">if</span> (strlen($line) &lt; <span class="hljs-number">1</span>)
			{
				<span class="hljs-keyword">break</span>;
			}
			<span class="hljs-keyword">$this</span>-&gt;xh[$pname][<span class="hljs-string">'headers'</span>][] = $line;
		}
		$data = implode(<span class="hljs-string">"\r\n"</span>, $lines);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-129" id="section-129"></a>
</div>
<p>Parse XML data</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> ( ! xml_parse($parser, $data, <span class="hljs-keyword">TRUE</span>))
		{
			$errstr = sprintf(<span class="hljs-string">'XML error: %s at line %d'</span>,
						xml_error_string(xml_get_error_code($parser)),
						xml_get_current_line_number($parser));

			$r = <span class="hljs-keyword">new</span> XML_RPC_Response(<span class="hljs-number">0</span>, <span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'invalid_return'</span>], <span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'invalid_return'</span>]);
			xml_parser_free($parser);
			<span class="hljs-keyword">return</span> $r;
		}
		xml_parser_free($parser);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-130" id="section-130"></a>
</div>
<p>Got ourselves some badness, it seems</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;xh[$pname][<span class="hljs-string">'isf'</span>] &gt; <span class="hljs-number">1</span>)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
			{
				<span class="hljs-keyword">echo</span> <span class="hljs-string">"---Invalid Return---\n"</span>.<span class="hljs-keyword">$this</span>-&gt;xh[$pname][<span class="hljs-string">'isf_reason'</span>].<span class="hljs-string">"---Invalid Return---\n\n"</span>;
			}

			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XML_RPC_Response(<span class="hljs-number">0</span>, <span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'invalid_return'</span>], <span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'invalid_return'</span>].<span class="hljs-string">' '</span>.<span class="hljs-keyword">$this</span>-&gt;xh[$pname][<span class="hljs-string">'isf_reason'</span>]);
		}
		<span class="hljs-keyword">elseif</span> ( ! is_object(<span class="hljs-keyword">$this</span>-&gt;xh[$pname][<span class="hljs-string">'value'</span>]))
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XML_RPC_Response(<span class="hljs-number">0</span>, <span class="hljs-keyword">$this</span>-&gt;xmlrpcerr[<span class="hljs-string">'invalid_return'</span>], <span class="hljs-keyword">$this</span>-&gt;xmlrpcstr[<span class="hljs-string">'invalid_return'</span>].<span class="hljs-string">' '</span>.<span class="hljs-keyword">$this</span>-&gt;xh[$pname][<span class="hljs-string">'isf_reason'</span>]);
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-131" id="section-131"></a>
</div>
<p>Display XML content for debugging</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;debug === <span class="hljs-keyword">TRUE</span>)
		{
			<span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;pre&gt;'</span>;

			<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;xh[$pname][<span class="hljs-string">'headers'</span>]) &gt; <span class="hljs-number">0</span>)
			{
				<span class="hljs-keyword">echo</span> <span class="hljs-string">"---HEADERS---\n"</span>;
				<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">$this</span>-&gt;xh[$pname][<span class="hljs-string">'headers'</span>] <span class="hljs-keyword">as</span> $header)
				{
					<span class="hljs-keyword">echo</span> $header.<span class="hljs-string">"\n"</span>;
				}
				<span class="hljs-keyword">echo</span> <span class="hljs-string">"---END HEADERS---\n\n"</span>;
			}

			<span class="hljs-keyword">echo</span> <span class="hljs-string">"---DATA---\n"</span>.htmlspecialchars($data).<span class="hljs-string">"\n---END DATA---\n\n---PARSED---\n"</span>;
			var_dump(<span class="hljs-keyword">$this</span>-&gt;xh[$pname][<span class="hljs-string">'value'</span>]);
			<span class="hljs-keyword">echo</span> <span class="hljs-string">"\n---END PARSED---&lt;/pre&gt;"</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-132" id="section-132"></a>
</div>
<p>Send response</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$v = <span class="hljs-keyword">$this</span>-&gt;xh[$pname][<span class="hljs-string">'value'</span>];
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;xh[$pname][<span class="hljs-string">'isf'</span>])
		{
			$errno_v = $v-&gt;me[<span class="hljs-string">'struct'</span>][<span class="hljs-string">'faultCode'</span>];
			$errstr_v = $v-&gt;me[<span class="hljs-string">'struct'</span>][<span class="hljs-string">'faultString'</span>];
			$errno = $errno_v-&gt;scalarval();

			<span class="hljs-keyword">if</span> ($errno === <span class="hljs-number">0</span>)
			{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-133" id="section-133"></a>
</div>
<p>FAULT returned, errno needs to reflect that</p>

        </td>
        <td class="code highlight">
          <pre class="php">				$errno = <span class="hljs-number">-1</span>;
			}

			$r = <span class="hljs-keyword">new</span> XML_RPC_Response($v, $errno, $errstr_v-&gt;scalarval());
		}
		<span class="hljs-keyword">else</span>
		{
			$r = <span class="hljs-keyword">new</span> XML_RPC_Response($v);
		}

		$r-&gt;headers = <span class="hljs-keyword">$this</span>-&gt;xh[$pname][<span class="hljs-string">'headers'</span>];
		<span class="hljs-keyword">return</span> $r;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-134" id="section-134"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <hr>
<div class="pilwrap" id="begin-return-message-parsing-section">
  <h2>
    <a href="#begin-return-message-parsing-section" name="begin-return-message-parsing-section" class="pilcrow"></a>
Begin Return Message Parsing section
  </h2>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-136" id="section-136"></a>
</div>
<p>quick explanation of components:
ac - used to accumulate values
isf - used to indicate a fault
lv - used to indicate &quot;looking for a value&quot;: implements
	the logic to allow values with no types to be strings
params - used to store parameters in method calls
method - used to store method name
stack - array with parent tree of the xml element,
		 used to validate the nesting of elements</p>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-137" id="section-137"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-138" id="section-138"></a>
</div>
<div class="dox">
<div class="summary">
<p>Start Element Handler</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">open_tag</span><span class="hljs-params">($the_parser, $name)</span>
	</span>{
		$the_parser = (string) $the_parser;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-139" id="section-139"></a>
</div>
<p>If invalid nesting, then return</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'isf'</span>] &gt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-140" id="section-140"></a>
</div>
<p>Evaluate and check for correct nesting of XML elements</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'stack'</span>]) === <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">if</span> ($name !== <span class="hljs-string">'METHODRESPONSE'</span> &amp;&amp; $name !== <span class="hljs-string">'METHODCALL'</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'isf'</span>] = <span class="hljs-number">2</span>;
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'isf_reason'</span>] = <span class="hljs-string">'Top level XML-RPC element is missing'</span>;
				<span class="hljs-keyword">return</span>;
			}
		}
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-141" id="section-141"></a>
</div>
<p>not top level element: see if parent is OK</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">elseif</span> ( ! in_array(<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'stack'</span>][<span class="hljs-number">0</span>], <span class="hljs-keyword">$this</span>-&gt;valid_parents[$name], <span class="hljs-keyword">TRUE</span>))
		{
			<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'isf'</span>] = <span class="hljs-number">2</span>;
			<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'isf_reason'</span>] = <span class="hljs-string">'XML-RPC element '</span>.$name.<span class="hljs-string">' cannot be child of '</span>.<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'stack'</span>][<span class="hljs-number">0</span>];
			<span class="hljs-keyword">return</span>;
		}

		<span class="hljs-keyword">switch</span> ($name)
		{
			<span class="hljs-keyword">case</span> <span class="hljs-string">'STRUCT'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'ARRAY'</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-142" id="section-142"></a>
</div>
<p>Creates array for child elements</p>

        </td>
        <td class="code highlight">
          <pre class="php">				$cur_val = <span class="hljs-keyword">array</span>(<span class="hljs-string">'value'</span> =&gt; <span class="hljs-keyword">array</span>(), <span class="hljs-string">'type'</span> =&gt; $name);
				array_unshift(<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'valuestack'</span>], $cur_val);
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'METHODNAME'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'NAME'</span>:
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>] = <span class="hljs-string">''</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'FAULT'</span>:
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'isf'</span>] = <span class="hljs-number">1</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'PARAM'</span>:
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>] = <span class="hljs-keyword">NULL</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'VALUE'</span>:
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'vt'</span>] = <span class="hljs-string">'value'</span>;
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>] = <span class="hljs-string">''</span>;
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'lv'</span>] = <span class="hljs-number">1</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'I4'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'INT'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'STRING'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'BOOLEAN'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'DOUBLE'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'DATETIME.ISO8601'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'BASE64'</span>:
				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'vt'</span>] !== <span class="hljs-string">'value'</span>)
				{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-143" id="section-143"></a>
</div>
<p>two data elements inside a value: an error occurred!</p>

        </td>
        <td class="code highlight">
          <pre class="php">					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'isf'</span>] = <span class="hljs-number">2</span>;
					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'isf_reason'</span>] = <span class="hljs-string">'There is a '</span>.$name.<span class="hljs-string">' element following a '</span>
										.<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'vt'</span>].<span class="hljs-string">' element inside a single value'</span>;
					<span class="hljs-keyword">return</span>;
				}

				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>] = <span class="hljs-string">''</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'MEMBER'</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-144" id="section-144"></a>
</div>
<p>Set name of <member> to nothing to prevent errors later if no <name> is found</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'valuestack'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'name'</span>] = <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-145" id="section-145"></a>
</div>
<p>Set NULL value to check to see if value passed for this param/member</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>] = <span class="hljs-keyword">NULL</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'DATA'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'METHODCALL'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'METHODRESPONSE'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'PARAMS'</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-146" id="section-146"></a>
</div>
<p>valid elements that add little to processing</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">default</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-147" id="section-147"></a>
</div>
<p>/ An Invalid Element is Found, so we have trouble</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'isf'</span>] = <span class="hljs-number">2</span>;
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'isf_reason'</span>] = <span class="hljs-string">'Invalid XML-RPC element found: '</span>.$name;
				<span class="hljs-keyword">break</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-148" id="section-148"></a>
</div>
<p>Add current element name to stack, to allow validation of nesting</p>

        </td>
        <td class="code highlight">
          <pre class="php">		array_unshift(<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'stack'</span>], $name);

		$name === <span class="hljs-string">'VALUE'</span> <span class="hljs-keyword">OR</span> <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'lv'</span>] = <span class="hljs-number">0</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-149" id="section-149"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-150" id="section-150"></a>
</div>
<div class="dox">
<div class="summary">
<p>End Element Handler</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">closing_tag</span><span class="hljs-params">($the_parser, $name)</span>
	</span>{
		$the_parser = (string) $the_parser;

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'isf'</span>] &gt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-151" id="section-151"></a>
</div>
<p>Remove current element from stack and set variable
NOTE: If the XML validates, then we do not have to worry about
the opening and closing of elements. Nesting is checked on the opening
tag so we be safe there as well.</p>

        </td>
        <td class="code highlight">
          <pre class="php">
		$curr_elem = array_shift(<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'stack'</span>]);

		<span class="hljs-keyword">switch</span> ($name)
		{
			<span class="hljs-keyword">case</span> <span class="hljs-string">'STRUCT'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'ARRAY'</span>:
				$cur_val = array_shift(<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'valuestack'</span>]);
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>] = <span class="hljs-keyword">isset</span>($cur_val[<span class="hljs-string">'values'</span>]) ? $cur_val[<span class="hljs-string">'values'</span>] : <span class="hljs-keyword">array</span>();
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'vt'</span>]	= strtolower($name);
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'NAME'</span>:
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'valuestack'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'name'</span>] = <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>];
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'BOOLEAN'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'I4'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'INT'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'STRING'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'DOUBLE'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'DATETIME.ISO8601'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'BASE64'</span>:
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'vt'</span>] = strtolower($name);

				<span class="hljs-keyword">if</span> ($name === <span class="hljs-string">'STRING'</span>)
				{
					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>] = <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>];
				}
				<span class="hljs-keyword">elseif</span> ($name === <span class="hljs-string">'DATETIME.ISO8601'</span>)
				{
					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'vt'</span>]	= <span class="hljs-keyword">$this</span>-&gt;xmlrpcDateTime;
					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>] = <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>];
				}
				<span class="hljs-keyword">elseif</span> ($name === <span class="hljs-string">'BASE64'</span>)
				{
					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>] = base64_decode(<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>]);
				}
				<span class="hljs-keyword">elseif</span> ($name === <span class="hljs-string">'BOOLEAN'</span>)
				{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-152" id="section-152"></a>
</div>
<p>Translated BOOLEAN values to TRUE AND FALSE</p>

        </td>
        <td class="code highlight">
          <pre class="php">					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>] = (bool) <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>];
				}
				<span class="hljs-keyword">elseif</span> ($name==<span class="hljs-string">'DOUBLE'</span>)
				{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-153" id="section-153"></a>
</div>
<p>we have a DOUBLE
we must check that only 0123456789-.<space> are characters here</p>

        </td>
        <td class="code highlight">
          <pre class="php">					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>] = preg_match(<span class="hljs-string">'/^[+-]?[eE0-9\t \.]+$/'</span>, <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>])
										? (float) <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>]
										: <span class="hljs-string">'ERROR_NON_NUMERIC_FOUND'</span>;
				}
				<span class="hljs-keyword">else</span>
				{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-154" id="section-154"></a>
</div>
<p>we have an I4/INT
we must check that only 0123456789-<space> are characters here</p>

        </td>
        <td class="code highlight">
          <pre class="php">					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>] = preg_match(<span class="hljs-string">'/^[+-]?[0-9\t ]+$/'</span>, <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>])
										? (int) <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>]
										: <span class="hljs-string">'ERROR_NON_NUMERIC_FOUND'</span>;
				}
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>] = <span class="hljs-string">''</span>;
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'lv'</span>] = <span class="hljs-number">3</span>; <span class="hljs-comment">// indicate we've found a value</span>
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'VALUE'</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-155" id="section-155"></a>
</div>
<p>This if() detects if no scalar was inside <VALUE></VALUE></p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'vt'</span>] == <span class="hljs-string">'value'</span>)
				{
					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>]	= <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>];
					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'vt'</span>]	= <span class="hljs-keyword">$this</span>-&gt;xmlrpcString;
				}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-156" id="section-156"></a>
</div>
<p>build the XML-RPC value out of the data received, and substitute it</p>

        </td>
        <td class="code highlight">
          <pre class="php">				$temp = <span class="hljs-keyword">new</span> XML_RPC_Values(<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>], <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'vt'</span>]);

				<span class="hljs-keyword">if</span> (count(<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'valuestack'</span>]) &amp;&amp; <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'valuestack'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'type'</span>] === <span class="hljs-string">'ARRAY'</span>)
				{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-157" id="section-157"></a>
</div>
<p>Array</p>

        </td>
        <td class="code highlight">
          <pre class="php">					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'valuestack'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'values'</span>][] = $temp;
				}
				<span class="hljs-keyword">else</span>
				{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-158" id="section-158"></a>
</div>
<p>Struct</p>

        </td>
        <td class="code highlight">
          <pre class="php">					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>] = $temp;
				}
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'MEMBER'</span>:
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>] = <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-159" id="section-159"></a>
</div>
<p>If value add to array in the stack for the last element built</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>])
				{
					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'valuestack'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'values'</span>][<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'valuestack'</span>][<span class="hljs-number">0</span>][<span class="hljs-string">'name'</span>]] = <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>];
				}
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'DATA'</span>:
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>] = <span class="hljs-string">''</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'PARAM'</span>:
				<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>])
				{
					<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'params'</span>][] = <span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'value'</span>];
				}
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'METHODNAME'</span>:
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'method'</span>] = ltrim(<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>]);
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-string">'PARAMS'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'FAULT'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'METHODCALL'</span>:
			<span class="hljs-keyword">case</span> <span class="hljs-string">'METHORESPONSE'</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-160" id="section-160"></a>
</div>
<p>We're all good kids with nuthin' to do</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">default</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-161" id="section-161"></a>
</div>
<p>End of an Invalid Element. Taken care of during the opening tag though</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">break</span>;
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-162" id="section-162"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-163" id="section-163"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse character data</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">character_data</span><span class="hljs-params">($the_parser, $data)</span>
	</span>{
		$the_parser = (string) $the_parser;

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'isf'</span>] &gt; <span class="hljs-number">1</span>) <span class="hljs-keyword">return</span>; <span class="hljs-comment">// XML Fault found already</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-164" id="section-164"></a>
</div>
<p>If a value has not been found</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'lv'</span>] !== <span class="hljs-number">3</span>)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'lv'</span>] === <span class="hljs-number">1</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'lv'</span>] = <span class="hljs-number">2</span>; <span class="hljs-comment">// Found a value</span>
			}

			<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>]))
			{
				<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>] = <span class="hljs-string">''</span>;
			}

			<span class="hljs-keyword">$this</span>-&gt;xh[$the_parser][<span class="hljs-string">'ac'</span>] .= $data;
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-165" id="section-165"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-166" id="section-166"></a>
</div>
<div class="dox">
<div class="summary">
<p>Add parameter</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addParam</span><span class="hljs-params">($par)</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;params[] = $par;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-167" id="section-167"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-168" id="section-168"></a>
</div>
<div class="dox">
<div class="summary">
<p>Output parameters</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$array
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>array
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">output_parameters</span><span class="hljs-params">(array $array = array<span class="hljs-params">()</span>)</span>
	</span>{
		$CI =&amp; get_instance();

		<span class="hljs-keyword">if</span> ( ! <span class="hljs-keyword">empty</span>($array))
		{
			<span class="hljs-keyword">foreach</span> ($array <span class="hljs-keyword">as</span> $key =&gt; &amp;$value)
			{
				<span class="hljs-keyword">if</span> (is_array($value))
				{
					$array[$key] = <span class="hljs-keyword">$this</span>-&gt;output_parameters($value);
				}
				<span class="hljs-keyword">elseif</span> ($key !== <span class="hljs-string">'bits'</span> &amp;&amp; <span class="hljs-keyword">$this</span>-&gt;xss_clean)
				{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-169" id="section-169"></a>
</div>
<p>'bits' is for the MetaWeblog API image bits
@todo - this needs to be made more general purpose</p>

        </td>
        <td class="code highlight">
          <pre class="php">					$array[$key] = $CI-&gt;security-&gt;xss_clean($value);
				}
			}

			<span class="hljs-keyword">return</span> $array;
		}

		$parameters = <span class="hljs-keyword">array</span>();

		<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count(<span class="hljs-keyword">$this</span>-&gt;params); $i &lt; $c; $i++)
		{
			$a_param = <span class="hljs-keyword">$this</span>-&gt;decode_message(<span class="hljs-keyword">$this</span>-&gt;params[$i]);

			<span class="hljs-keyword">if</span> (is_array($a_param))
			{
				$parameters[] = <span class="hljs-keyword">$this</span>-&gt;output_parameters($a_param);
			}
			<span class="hljs-keyword">else</span>
			{
				$parameters[] = (<span class="hljs-keyword">$this</span>-&gt;xss_clean) ? $CI-&gt;security-&gt;xss_clean($a_param) : $a_param;
			}
		}

		<span class="hljs-keyword">return</span> $parameters;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-170" id="section-170"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-171" id="section-171"></a>
</div>
<div class="dox">
<div class="summary">
<p>Decode message</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>mixed
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">decode_message</span><span class="hljs-params">($param)</span>
	</span>{
		$kind = $param-&gt;kindOf();

		<span class="hljs-keyword">if</span> ($kind === <span class="hljs-string">'scalar'</span>)
		{
			<span class="hljs-keyword">return</span> $param-&gt;scalarval();
		}
		<span class="hljs-keyword">elseif</span> ($kind === <span class="hljs-string">'array'</span>)
		{
			reset($param-&gt;me);
			$b = current($param-&gt;me);
			$arr = <span class="hljs-keyword">array</span>();

			<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count($b); $i &lt; $c; $i++)
			{
				$arr[] = <span class="hljs-keyword">$this</span>-&gt;decode_message($param-&gt;me[<span class="hljs-string">'array'</span>][$i]);
			}

			<span class="hljs-keyword">return</span> $arr;
		}
		<span class="hljs-keyword">elseif</span> ($kind === <span class="hljs-string">'struct'</span>)
		{
			reset($param-&gt;me[<span class="hljs-string">'struct'</span>]);
			$arr = <span class="hljs-keyword">array</span>();

			<span class="hljs-keyword">foreach</span> ($param-&gt;me[<span class="hljs-string">'struct'</span>] <span class="hljs-keyword">as</span> $key =&gt; &amp;$value)
			{
				$arr[$key] = <span class="hljs-keyword">$this</span>-&gt;decode_message($value);
			}

			<span class="hljs-keyword">return</span> $arr;
		}
	}

} <span class="hljs-comment">// END XML_RPC_Message Class</span>

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-172" id="section-172"></a>
</div>
<div class="dox">
<div class="summary">
<p>XML-RPC Values class</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">XML_RPC_Values</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">CI_Xmlrpc</span>
</span>{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-173" id="section-173"></a>
</div>
<div class="dox">
<div class="summary">
<p>Value data</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $me	= <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-174" id="section-174"></a>
</div>
<div class="dox">
<div class="summary">
<p>Value type</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $mytype	= <span class="hljs-number">0</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-175" id="section-175"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-176" id="section-176"></a>
</div>
<div class="dox">
<div class="summary">
<p>Constructor</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
<span>$val
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
<span>$type
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">($val = <span class="hljs-number">-1</span>, $type = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">parent</span>::__construct();

		<span class="hljs-keyword">if</span> ($val !== <span class="hljs-number">-1</span> <span class="hljs-keyword">OR</span> $type !== <span class="hljs-string">''</span>)
		{
			$type = $type === <span class="hljs-string">''</span> ? <span class="hljs-string">'string'</span> : $type;

			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;xmlrpcTypes[$type] == <span class="hljs-number">1</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;addScalar($val, $type);
			}
			<span class="hljs-keyword">elseif</span> (<span class="hljs-keyword">$this</span>-&gt;xmlrpcTypes[$type] == <span class="hljs-number">2</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;addArray($val);
			}
			<span class="hljs-keyword">elseif</span> (<span class="hljs-keyword">$this</span>-&gt;xmlrpcTypes[$type] == <span class="hljs-number">3</span>)
			{
				<span class="hljs-keyword">$this</span>-&gt;addStruct($val);
			}
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-177" id="section-177"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-178" id="section-178"></a>
</div>
<div class="dox">
<div class="summary">
<p>Add scalar value</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">scalar</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>int
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addScalar</span><span class="hljs-params">($val, $type = <span class="hljs-string">'string'</span>)</span>
	</span>{
		$typeof = <span class="hljs-keyword">$this</span>-&gt;xmlrpcTypes[$type];

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;mytype === <span class="hljs-number">1</span>)
		{
			<span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;strong&gt;XML_RPC_Values&lt;/strong&gt;: scalar can have only one value&lt;br /&gt;'</span>;
			<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
		}

		<span class="hljs-keyword">if</span> ($typeof != <span class="hljs-number">1</span>)
		{
			<span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;strong&gt;XML_RPC_Values&lt;/strong&gt;: not a scalar type (${typeof})&lt;br /&gt;'</span>;
			<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
		}

		<span class="hljs-keyword">if</span> ($type === <span class="hljs-keyword">$this</span>-&gt;xmlrpcBoolean)
		{
			$val = (int) (strcasecmp($val, <span class="hljs-string">'true'</span>) === <span class="hljs-number">0</span> <span class="hljs-keyword">OR</span> $val === <span class="hljs-number">1</span> <span class="hljs-keyword">OR</span> ($val === <span class="hljs-keyword">TRUE</span> &amp;&amp; strcasecmp($val, <span class="hljs-string">'false'</span>)));
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;mytype === <span class="hljs-number">2</span>)
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-179" id="section-179"></a>
</div>
<p>adding to an array here</p>

        </td>
        <td class="code highlight">
          <pre class="php">			$ar = <span class="hljs-keyword">$this</span>-&gt;me[<span class="hljs-string">'array'</span>];
			$ar[] = <span class="hljs-keyword">new</span> XML_RPC_Values($val, $type);
			<span class="hljs-keyword">$this</span>-&gt;me[<span class="hljs-string">'array'</span>] = $ar;
		}
		<span class="hljs-keyword">else</span>
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-180" id="section-180"></a>
</div>
<p>a scalar, so set the value and remember we're scalar</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">$this</span>-&gt;me[$type] = $val;
			<span class="hljs-keyword">$this</span>-&gt;mytype = $typeof;
		}

		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-181" id="section-181"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-182" id="section-182"></a>
</div>
<div class="dox">
<div class="summary">
<p>Add array value</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>int
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addArray</span><span class="hljs-params">($vals)</span>
	</span>{
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;mytype !== <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;strong&gt;XML_RPC_Values&lt;/strong&gt;: already initialized as a ['</span>.<span class="hljs-keyword">$this</span>-&gt;kindOf().<span class="hljs-string">']&lt;br /&gt;'</span>;
			<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
		}

		<span class="hljs-keyword">$this</span>-&gt;mytype = <span class="hljs-keyword">$this</span>-&gt;xmlrpcTypes[<span class="hljs-string">'array'</span>];
		<span class="hljs-keyword">$this</span>-&gt;me[<span class="hljs-string">'array'</span>] = $vals;
		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-183" id="section-183"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-184" id="section-184"></a>
</div>
<div class="dox">
<div class="summary">
<p>Add struct value</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>int
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">addStruct</span><span class="hljs-params">($vals)</span>
	</span>{
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;mytype !== <span class="hljs-number">0</span>)
		{
			<span class="hljs-keyword">echo</span> <span class="hljs-string">'&lt;strong&gt;XML_RPC_Values&lt;/strong&gt;: already initialized as a ['</span>.<span class="hljs-keyword">$this</span>-&gt;kindOf().<span class="hljs-string">']&lt;br /&gt;'</span>;
			<span class="hljs-keyword">return</span> <span class="hljs-number">0</span>;
		}
		<span class="hljs-keyword">$this</span>-&gt;mytype = <span class="hljs-keyword">$this</span>-&gt;xmlrpcTypes[<span class="hljs-string">'struct'</span>];
		<span class="hljs-keyword">$this</span>-&gt;me[<span class="hljs-string">'struct'</span>] = $vals;
		<span class="hljs-keyword">return</span> <span class="hljs-number">1</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-185" id="section-185"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-186" id="section-186"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get value type</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">kindOf</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">switch</span> (<span class="hljs-keyword">$this</span>-&gt;mytype)
		{
			<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>: <span class="hljs-keyword">return</span> <span class="hljs-string">'struct'</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>: <span class="hljs-keyword">return</span> <span class="hljs-string">'array'</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>: <span class="hljs-keyword">return</span> <span class="hljs-string">'scalar'</span>;
			<span class="hljs-keyword">default</span>: <span class="hljs-keyword">return</span> <span class="hljs-string">'undef'</span>;
		}
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-187" id="section-187"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-188" id="section-188"></a>
</div>
<div class="dox">
<div class="summary">
<p>Serialize data</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">mixed</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializedata</span><span class="hljs-params">($typ, $val)</span>
	</span>{
		$rs = <span class="hljs-string">''</span>;

		<span class="hljs-keyword">switch</span> (<span class="hljs-keyword">$this</span>-&gt;xmlrpcTypes[$typ])
		{
			<span class="hljs-keyword">case</span> <span class="hljs-number">3</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-189" id="section-189"></a>
</div>
<p>struct</p>

        </td>
        <td class="code highlight">
          <pre class="php">				$rs .= <span class="hljs-string">"&lt;struct&gt;\n"</span>;
				reset($val);
				<span class="hljs-keyword">foreach</span> ($val <span class="hljs-keyword">as</span> $key2 =&gt; &amp;$val2)
				{
					$rs .= <span class="hljs-string">"&lt;member&gt;\n&lt;name&gt;{$key2}&lt;/name&gt;\n"</span>.<span class="hljs-keyword">$this</span>-&gt;serializeval($val2).<span class="hljs-string">"&lt;/member&gt;\n"</span>;
				}
				$rs .= <span class="hljs-string">'&lt;/struct&gt;'</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-number">2</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-190" id="section-190"></a>
</div>
<p>array</p>

        </td>
        <td class="code highlight">
          <pre class="php">				$rs .= <span class="hljs-string">"&lt;array&gt;\n&lt;data&gt;\n"</span>;
				<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count($val); $i &lt; $c; $i++)
				{
					$rs .= <span class="hljs-keyword">$this</span>-&gt;serializeval($val[$i]);
				}
				$rs .= <span class="hljs-string">"&lt;/data&gt;\n&lt;/array&gt;\n"</span>;
				<span class="hljs-keyword">break</span>;
			<span class="hljs-keyword">case</span> <span class="hljs-number">1</span>:
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-191" id="section-191"></a>
</div>
<p>others</p>

        </td>
        <td class="code highlight">
          <pre class="php">				<span class="hljs-keyword">switch</span> ($typ)
				{
					<span class="hljs-keyword">case</span> <span class="hljs-keyword">$this</span>-&gt;xmlrpcBase64:
						$rs .= <span class="hljs-string">'&lt;'</span>.$typ.<span class="hljs-string">'&gt;'</span>.base64_encode( (string) $val).<span class="hljs-string">'&lt;/'</span>.$typ.<span class="hljs-string">"&gt;\n"</span>;
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-keyword">$this</span>-&gt;xmlrpcBoolean:
						$rs .= <span class="hljs-string">'&lt;'</span>.$typ.<span class="hljs-string">'&gt;'</span>.( (bool) $val ? <span class="hljs-string">'1'</span> : <span class="hljs-string">'0'</span>).<span class="hljs-string">'&lt;/'</span>.$typ.<span class="hljs-string">"&gt;\n"</span>;
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">case</span> <span class="hljs-keyword">$this</span>-&gt;xmlrpcString:
						$rs .= <span class="hljs-string">'&lt;'</span>.$typ.<span class="hljs-string">'&gt;'</span>.htmlspecialchars( (string) $val).<span class="hljs-string">'&lt;/'</span>.$typ.<span class="hljs-string">"&gt;\n"</span>;
						<span class="hljs-keyword">break</span>;
					<span class="hljs-keyword">default</span>:
						$rs .= <span class="hljs-string">'&lt;'</span>.$typ.<span class="hljs-string">'&gt;'</span>.$val.<span class="hljs-string">'&lt;/'</span>.$typ.<span class="hljs-string">"&gt;\n"</span>;
						<span class="hljs-keyword">break</span>;
				}
			<span class="hljs-keyword">default</span>:
				<span class="hljs-keyword">break</span>;
		}

		<span class="hljs-keyword">return</span> $rs;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-192" id="section-192"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-193" id="section-193"></a>
</div>
<div class="dox">
<div class="summary">
<p>Serialize class</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serialize_class</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>-&gt;serializeval(<span class="hljs-keyword">$this</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-194" id="section-194"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-195" id="section-195"></a>
</div>
<div class="dox">
<div class="summary">
<p>Serialize value</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">object</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">serializeval</span><span class="hljs-params">($o)</span>
	</span>{
		$array = $o-&gt;me;
		<span class="hljs-keyword">list</span>($value, $type) = <span class="hljs-keyword">array</span>(reset($array), key($array));
		<span class="hljs-keyword">return</span> <span class="hljs-string">"&lt;value&gt;\n"</span>.<span class="hljs-keyword">$this</span>-&gt;serializedata($type, $value).<span class="hljs-string">"&lt;/value&gt;\n"</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-196" id="section-196"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-197" id="section-197"></a>
</div>
<div class="dox">
<div class="summary">
<p>Scalar value</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>mixed
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">scalarval</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> reset(<span class="hljs-keyword">$this</span>-&gt;me);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-198" id="section-198"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-199" id="section-199"></a>
</div>
<div class="dox">
<div class="summary">
<p>Encode time in ISO-8601 form.
Useful for sending time in XML-RPC</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>unix timestamp
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">bool</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">iso8601_encode</span><span class="hljs-params">($time, $utc = FALSE)</span>
	</span>{
		<span class="hljs-keyword">return</span> ($utc) ? strftime(<span class="hljs-string">'%Y%m%dT%H:%i:%s'</span>, $time) : gmstrftime(<span class="hljs-string">'%Y%m%dT%H:%i:%s'</span>, $time);
	}

} <span class="hljs-comment">// END XML_RPC_Values Class</span>

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
