<!DOCTYPE html>
<html>
<head>
  <title>Calendar.php</title>
  <meta http-equiv="content-type" content="text/html; charset=UTF-8">
  <link rel="stylesheet" media="all" href="../../../../doc-style.css" />
  <script src="../../../../doc-filelist.js"></script>
  <script>
    var relativeDir = "../../../../";
    var thisFile = "src\\myapp\\system\\libraries\\Calendar.php";
    var defaultSidebar = true;
  </script>
  <script src="../../../../doc-script.js"></script>

</head>
<body>
  <div id="sidebar_wrapper">
    <div id="sidebar_switch">
      <span class="tree">Files</span>
      <span class="headings">Headings</span>
    </div>
    <div id="tree"></div>
    <div id="headings">

    </div>
  </div>
  <div id="sidebar-toggle"></div>
  <div id="container">
    <div class="background highlight"></div>
<table cellpadding="0" cellspacing="0">
  <tbody>
    
      <tr>
        <td class="docs">
          <h1>Calendar.php</h1>
        </td>
        <td class="code highlight"></td>
      </tr>
    
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-1" id="section-1"></a>
</div>

        </td>
        <td class="code highlight">
          <pre class="php"><span class="hljs-meta">&lt;?php</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-2" id="section-2"></a>
</div>
<div class="dox">
<div class="summary">
<p>CodeIgniter</p>
</div>
<div class="body">
<p>An open source application development framework for PHP</p>
<p>This content is released under the MIT License (MIT)</p>
<p>Copyright (c) 2014 - 2019, British Columbia Institute of Technology</p>
<p>Permission is hereby granted, free of charge, to any person obtaining a copy
of this software and associated documentation files (the &quot;Software&quot;), to deal
in the Software without restriction, including without limitation the rights
to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
copies of the Software, and to permit persons to whom the Software is
furnished to do so, subject to the following conditions:</p>
<p>The above copyright notice and this permission notice shall be included in
all copies or substantial portions of the Software.</p>
<p>THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN
THE SOFTWARE.</p>
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">defined(<span class="hljs-string">'BASEPATH'</span>) <span class="hljs-keyword">OR</span> <span class="hljs-keyword">exit</span>(<span class="hljs-string">'No direct script access allowed'</span>);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-3" id="section-3"></a>
</div>
<div class="dox">
<div class="summary">
<p>CodeIgniter Calendar Class</p>
</div>
<div class="body">
<p>This class enables the creation of calendars</p>
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php"><span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">CI_Calendar</span> </span>{

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-4" id="section-4"></a>
</div>
<div class="dox">
<div class="summary">
<p>Calendar layout template</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $template = <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-5" id="section-5"></a>
</div>
<div class="dox">
<div class="summary">
<p>Replacements array for template</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $replacements = <span class="hljs-keyword">array</span>();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-6" id="section-6"></a>
</div>
<div class="dox">
<div class="summary">
<p>Day of the week to start the calendar on</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $start_day = <span class="hljs-string">'sunday'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-7" id="section-7"></a>
</div>
<div class="dox">
<div class="summary">
<p>How to display months</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $month_type = <span class="hljs-string">'long'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-8" id="section-8"></a>
</div>
<div class="dox">
<div class="summary">
<p>How to display names of days</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $day_type = <span class="hljs-string">'abr'</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-9" id="section-9"></a>
</div>
<div class="dox">
<div class="summary">
<p>Whether to show next/prev month links</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $show_next_prev = <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-10" id="section-10"></a>
</div>
<div class="dox">
<div class="summary">
<p>Url base to use for next/prev month links</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $next_prev_url = <span class="hljs-string">''</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-11" id="section-11"></a>
</div>
<div class="dox">
<div class="summary">
<p>Show days of other months</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> $show_other_days = <span class="hljs-keyword">FALSE</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-12" id="section-12"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-13" id="section-13"></a>
</div>
<div class="dox">
<div class="summary">
<p>CI Singleton</p>
</div>
<div class="body">
</div>
<div class="details">
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">protected</span> $CI;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-14" id="section-14"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-15" id="section-15"></a>
</div>
<div class="dox">
<div class="summary">
<p>Class constructor</p>
</div>
<div class="body">
<p>Loads the calendar language file and sets the default time reference.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>$config Calendar options
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>void
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">__construct</span><span class="hljs-params">($config = array<span class="hljs-params">()</span>)</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;CI =&amp; get_instance();
		<span class="hljs-keyword">$this</span>-&gt;CI-&gt;lang-&gt;load(<span class="hljs-string">'calendar'</span>);

		<span class="hljs-keyword">empty</span>($config) <span class="hljs-keyword">OR</span> <span class="hljs-keyword">$this</span>-&gt;initialize($config);

		log_message(<span class="hljs-string">'info'</span>, <span class="hljs-string">'Calendar Class Initialized'</span>);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-16" id="section-16"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-17" id="section-17"></a>
</div>
<div class="dox">
<div class="summary">
<p>Initialize the user preferences</p>
</div>
<div class="body">
<p>Accepts an associative array as input, containing display preferences</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>config preferences
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_Calendar
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">initialize</span><span class="hljs-params">($config = array<span class="hljs-params">()</span>)</span>
	</span>{
		<span class="hljs-keyword">foreach</span> ($config <span class="hljs-keyword">as</span> $key =&gt; $val)
		{
			<span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>(<span class="hljs-keyword">$this</span>-&gt;$key))
			{
				<span class="hljs-keyword">$this</span>-&gt;$key = $val;
			}
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-18" id="section-18"></a>
</div>
<p>Set the next_prev_url to the controller if required but not defined</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;show_next_prev === <span class="hljs-keyword">TRUE</span> &amp;&amp; <span class="hljs-keyword">empty</span>(<span class="hljs-keyword">$this</span>-&gt;next_prev_url))
		{
			<span class="hljs-keyword">$this</span>-&gt;next_prev_url = <span class="hljs-keyword">$this</span>-&gt;CI-&gt;config-&gt;site_url(<span class="hljs-keyword">$this</span>-&gt;CI-&gt;router-&gt;class.<span class="hljs-string">'/'</span>.<span class="hljs-keyword">$this</span>-&gt;CI-&gt;router-&gt;method);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-19" id="section-19"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-20" id="section-20"></a>
</div>
<div class="dox">
<div class="summary">
<p>Generate the calendar</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>the year
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>the month
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">array</span>
<span>the data to be shown in the calendar cells
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">generate</span><span class="hljs-params">($year = <span class="hljs-string">''</span>, $month = <span class="hljs-string">''</span>, $data = array<span class="hljs-params">()</span>)</span>
	</span>{
		$local_time = time();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-21" id="section-21"></a>
</div>
<p>Set and validate the supplied month/year</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>($year))
		{
			$year = date(<span class="hljs-string">'Y'</span>, $local_time);
		}
		<span class="hljs-keyword">elseif</span> (strlen($year) === <span class="hljs-number">1</span>)
		{
			$year = <span class="hljs-string">'200'</span>.$year;
		}
		<span class="hljs-keyword">elseif</span> (strlen($year) === <span class="hljs-number">2</span>)
		{
			$year = <span class="hljs-string">'20'</span>.$year;
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>($month))
		{
			$month = date(<span class="hljs-string">'m'</span>, $local_time);
		}
		<span class="hljs-keyword">elseif</span> (strlen($month) === <span class="hljs-number">1</span>)
		{
			$month = <span class="hljs-string">'0'</span>.$month;
		}

		$adjusted_date = <span class="hljs-keyword">$this</span>-&gt;adjust_date($month, $year);

		$month	= $adjusted_date[<span class="hljs-string">'month'</span>];
		$year	= $adjusted_date[<span class="hljs-string">'year'</span>];

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-22" id="section-22"></a>
</div>
<p>Determine the total days in the month</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$total_days = <span class="hljs-keyword">$this</span>-&gt;get_total_days($month, $year);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-23" id="section-23"></a>
</div>
<p>Set the starting day of the week</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$start_days	= <span class="hljs-keyword">array</span>(<span class="hljs-string">'sunday'</span> =&gt; <span class="hljs-number">0</span>, <span class="hljs-string">'monday'</span> =&gt; <span class="hljs-number">1</span>, <span class="hljs-string">'tuesday'</span> =&gt; <span class="hljs-number">2</span>, <span class="hljs-string">'wednesday'</span> =&gt; <span class="hljs-number">3</span>, <span class="hljs-string">'thursday'</span> =&gt; <span class="hljs-number">4</span>, <span class="hljs-string">'friday'</span> =&gt; <span class="hljs-number">5</span>, <span class="hljs-string">'saturday'</span> =&gt; <span class="hljs-number">6</span>);
		$start_day	= <span class="hljs-keyword">isset</span>($start_days[<span class="hljs-keyword">$this</span>-&gt;start_day]) ? $start_days[<span class="hljs-keyword">$this</span>-&gt;start_day] : <span class="hljs-number">0</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-24" id="section-24"></a>
</div>
<p>Set the starting day number</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$local_date = mktime(<span class="hljs-number">12</span>, <span class="hljs-number">0</span>, <span class="hljs-number">0</span>, $month, <span class="hljs-number">1</span>, $year);
		$date = getdate($local_date);
		$day  = $start_day + <span class="hljs-number">1</span> - $date[<span class="hljs-string">'wday'</span>];

		<span class="hljs-keyword">while</span> ($day &gt; <span class="hljs-number">1</span>)
		{
			$day -= <span class="hljs-number">7</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-25" id="section-25"></a>
</div>
<p>Set the current month/year/day
We use this to determine the &quot;today&quot; date</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$cur_year	= date(<span class="hljs-string">'Y'</span>, $local_time);
		$cur_month	= date(<span class="hljs-string">'m'</span>, $local_time);
		$cur_day	= date(<span class="hljs-string">'j'</span>, $local_time);

		$is_current_month = ($cur_year == $year &amp;&amp; $cur_month == $month);

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-26" id="section-26"></a>
</div>
<p>Generate the template data array</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">$this</span>-&gt;parse_template();

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-27" id="section-27"></a>
</div>
<p>Begin building the calendar output</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$out = <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'table_open'</span>].<span class="hljs-string">"\n\n"</span>.<span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'heading_row_start'</span>].<span class="hljs-string">"\n"</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-28" id="section-28"></a>
</div>
<p>&quot;previous&quot; month link</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;show_next_prev === <span class="hljs-keyword">TRUE</span>)
		{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-29" id="section-29"></a>
</div>
<p>Add a trailing slash to the URL if needed</p>

        </td>
        <td class="code highlight">
          <pre class="php">			<span class="hljs-keyword">$this</span>-&gt;next_prev_url = preg_replace(<span class="hljs-string">'/(.+?)\/*$/'</span>, <span class="hljs-string">'\\1/'</span>, <span class="hljs-keyword">$this</span>-&gt;next_prev_url);

			$adjusted_date = <span class="hljs-keyword">$this</span>-&gt;adjust_date($month - <span class="hljs-number">1</span>, $year);
			$out .= str_replace(<span class="hljs-string">'{previous_url}'</span>, <span class="hljs-keyword">$this</span>-&gt;next_prev_url.$adjusted_date[<span class="hljs-string">'year'</span>].<span class="hljs-string">'/'</span>.$adjusted_date[<span class="hljs-string">'month'</span>], <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'heading_previous_cell'</span>]).<span class="hljs-string">"\n"</span>;
		}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-30" id="section-30"></a>
</div>
<p>Heading containing the month/year</p>

        </td>
        <td class="code highlight">
          <pre class="php">		$colspan = (<span class="hljs-keyword">$this</span>-&gt;show_next_prev === <span class="hljs-keyword">TRUE</span>) ? <span class="hljs-number">5</span> : <span class="hljs-number">7</span>;

		<span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'heading_title_cell'</span>] = str_replace(<span class="hljs-string">'{colspan}'</span>, $colspan,
								str_replace(<span class="hljs-string">'{heading}'</span>, <span class="hljs-keyword">$this</span>-&gt;get_month_name($month).<span class="hljs-string">'&amp;nbsp;'</span>.$year, <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'heading_title_cell'</span>]));

		$out .= <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'heading_title_cell'</span>].<span class="hljs-string">"\n"</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-31" id="section-31"></a>
</div>
<p>&quot;next&quot; month link</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;show_next_prev === <span class="hljs-keyword">TRUE</span>)
		{
			$adjusted_date = <span class="hljs-keyword">$this</span>-&gt;adjust_date($month + <span class="hljs-number">1</span>, $year);
			$out .= str_replace(<span class="hljs-string">'{next_url}'</span>, <span class="hljs-keyword">$this</span>-&gt;next_prev_url.$adjusted_date[<span class="hljs-string">'year'</span>].<span class="hljs-string">'/'</span>.$adjusted_date[<span class="hljs-string">'month'</span>], <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'heading_next_cell'</span>]);
		}

		$out .= <span class="hljs-string">"\n"</span>.<span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'heading_row_end'</span>].<span class="hljs-string">"\n\n"</span>
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-32" id="section-32"></a>
</div>
<p>Write the cells containing the days of the week</p>

        </td>
        <td class="code highlight">
          <pre class="php">			.<span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'week_row_start'</span>].<span class="hljs-string">"\n"</span>;

		$day_names = <span class="hljs-keyword">$this</span>-&gt;get_day_names();

		<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>; $i &lt; <span class="hljs-number">7</span>; $i ++)
		{
			$out .= str_replace(<span class="hljs-string">'{week_day}'</span>, $day_names[($start_day + $i) %<span class="hljs-number">7</span>], <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'week_day_cell'</span>]);
		}

		$out .= <span class="hljs-string">"\n"</span>.<span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'week_row_end'</span>].<span class="hljs-string">"\n"</span>;

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-33" id="section-33"></a>
</div>
<p>Build the main body of the calendar</p>

        </td>
        <td class="code highlight">
          <pre class="php">		<span class="hljs-keyword">while</span> ($day &lt;= $total_days)
		{
			$out .= <span class="hljs-string">"\n"</span>.<span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_row_start'</span>].<span class="hljs-string">"\n"</span>;

			<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>; $i &lt; <span class="hljs-number">7</span>; $i++)
			{
				<span class="hljs-keyword">if</span> ($day &gt; <span class="hljs-number">0</span> &amp;&amp; $day &lt;= $total_days)
				{
					$out .= ($is_current_month === <span class="hljs-keyword">TRUE</span> &amp;&amp; $day == $cur_day) ? <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_start_today'</span>] : <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_start'</span>];

					<span class="hljs-keyword">if</span> (<span class="hljs-keyword">isset</span>($data[$day]))
					{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-34" id="section-34"></a>
</div>
<p>Cells with content</p>

        </td>
        <td class="code highlight">
          <pre class="php">						$temp = ($is_current_month === <span class="hljs-keyword">TRUE</span> &amp;&amp; $day == $cur_day) ?
								<span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_content_today'</span>] : <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_content'</span>];
						$out .= str_replace(<span class="hljs-keyword">array</span>(<span class="hljs-string">'{content}'</span>, <span class="hljs-string">'{day}'</span>), <span class="hljs-keyword">array</span>($data[$day], $day), $temp);
					}
					<span class="hljs-keyword">else</span>
					{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-35" id="section-35"></a>
</div>
<p>Cells with no content</p>

        </td>
        <td class="code highlight">
          <pre class="php">						$temp = ($is_current_month === <span class="hljs-keyword">TRUE</span> &amp;&amp; $day == $cur_day) ?
								<span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_no_content_today'</span>] : <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_no_content'</span>];
						$out .= str_replace(<span class="hljs-string">'{day}'</span>, $day, $temp);
					}

					$out .= ($is_current_month === <span class="hljs-keyword">TRUE</span> &amp;&amp; $day == $cur_day) ? <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_end_today'</span>] : <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_end'</span>];
				}
				<span class="hljs-keyword">elseif</span> (<span class="hljs-keyword">$this</span>-&gt;show_other_days === <span class="hljs-keyword">TRUE</span>)
				{
					$out .= <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_start_other'</span>];

					<span class="hljs-keyword">if</span> ($day &lt;= <span class="hljs-number">0</span>)
					{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-36" id="section-36"></a>
</div>
<p>Day of previous month</p>

        </td>
        <td class="code highlight">
          <pre class="php">						$prev_month = <span class="hljs-keyword">$this</span>-&gt;adjust_date($month - <span class="hljs-number">1</span>, $year);
						$prev_month_days = <span class="hljs-keyword">$this</span>-&gt;get_total_days($prev_month[<span class="hljs-string">'month'</span>], $prev_month[<span class="hljs-string">'year'</span>]);
						$out .= str_replace(<span class="hljs-string">'{day}'</span>, $prev_month_days + $day, <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_other'</span>]);
					}
					<span class="hljs-keyword">else</span>
					{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-37" id="section-37"></a>
</div>
<p>Day of next month</p>

        </td>
        <td class="code highlight">
          <pre class="php">						$out .= str_replace(<span class="hljs-string">'{day}'</span>, $day - $total_days, <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_other'</span>]);
					}

					$out .= <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_end_other'</span>];
				}
				<span class="hljs-keyword">else</span>
				{
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-38" id="section-38"></a>
</div>
<p>Blank cells</p>

        </td>
        <td class="code highlight">
          <pre class="php">					$out .= <span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_start'</span>].<span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_blank'</span>].<span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_cell_end'</span>];
				}

				$day++;
			}

			$out .= <span class="hljs-string">"\n"</span>.<span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'cal_row_end'</span>].<span class="hljs-string">"\n"</span>;
		}

		<span class="hljs-keyword">return</span> $out .= <span class="hljs-string">"\n"</span>.<span class="hljs-keyword">$this</span>-&gt;replacements[<span class="hljs-string">'table_close'</span>];
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-39" id="section-39"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-40" id="section-40"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get Month Name</p>
</div>
<div class="body">
<p>Generates a textual month name based on the numeric
month provided.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>the month
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>string
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_month_name</span><span class="hljs-params">($month)</span>
	</span>{
		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;month_type === <span class="hljs-string">'short'</span>)
		{
			$month_names = <span class="hljs-keyword">array</span>(<span class="hljs-string">'01'</span> =&gt; <span class="hljs-string">'cal_jan'</span>, <span class="hljs-string">'02'</span> =&gt; <span class="hljs-string">'cal_feb'</span>, <span class="hljs-string">'03'</span> =&gt; <span class="hljs-string">'cal_mar'</span>, <span class="hljs-string">'04'</span> =&gt; <span class="hljs-string">'cal_apr'</span>, <span class="hljs-string">'05'</span> =&gt; <span class="hljs-string">'cal_may'</span>, <span class="hljs-string">'06'</span> =&gt; <span class="hljs-string">'cal_jun'</span>, <span class="hljs-string">'07'</span> =&gt; <span class="hljs-string">'cal_jul'</span>, <span class="hljs-string">'08'</span> =&gt; <span class="hljs-string">'cal_aug'</span>, <span class="hljs-string">'09'</span> =&gt; <span class="hljs-string">'cal_sep'</span>, <span class="hljs-string">'10'</span> =&gt; <span class="hljs-string">'cal_oct'</span>, <span class="hljs-string">'11'</span> =&gt; <span class="hljs-string">'cal_nov'</span>, <span class="hljs-string">'12'</span> =&gt; <span class="hljs-string">'cal_dec'</span>);
		}
		<span class="hljs-keyword">else</span>
		{
			$month_names = <span class="hljs-keyword">array</span>(<span class="hljs-string">'01'</span> =&gt; <span class="hljs-string">'cal_january'</span>, <span class="hljs-string">'02'</span> =&gt; <span class="hljs-string">'cal_february'</span>, <span class="hljs-string">'03'</span> =&gt; <span class="hljs-string">'cal_march'</span>, <span class="hljs-string">'04'</span> =&gt; <span class="hljs-string">'cal_april'</span>, <span class="hljs-string">'05'</span> =&gt; <span class="hljs-string">'cal_mayl'</span>, <span class="hljs-string">'06'</span> =&gt; <span class="hljs-string">'cal_june'</span>, <span class="hljs-string">'07'</span> =&gt; <span class="hljs-string">'cal_july'</span>, <span class="hljs-string">'08'</span> =&gt; <span class="hljs-string">'cal_august'</span>, <span class="hljs-string">'09'</span> =&gt; <span class="hljs-string">'cal_september'</span>, <span class="hljs-string">'10'</span> =&gt; <span class="hljs-string">'cal_october'</span>, <span class="hljs-string">'11'</span> =&gt; <span class="hljs-string">'cal_november'</span>, <span class="hljs-string">'12'</span> =&gt; <span class="hljs-string">'cal_december'</span>);
		}

		<span class="hljs-keyword">return</span> (<span class="hljs-keyword">$this</span>-&gt;CI-&gt;lang-&gt;line($month_names[$month]) === <span class="hljs-keyword">FALSE</span>)
			? ucfirst(substr($month_names[$month], <span class="hljs-number">4</span>))
			: <span class="hljs-keyword">$this</span>-&gt;CI-&gt;lang-&gt;line($month_names[$month]);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-41" id="section-41"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-42" id="section-42"></a>
</div>
<div class="dox">
<div class="summary">
<p>Get Day Names</p>
</div>
<div class="body">
<p>Returns an array of day names (Sunday, Monday, etc.) based
on the type. Options: long, short, abr</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">string</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>array
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_day_names</span><span class="hljs-params">($day_type = <span class="hljs-string">''</span>)</span>
	</span>{
		<span class="hljs-keyword">if</span> ($day_type !== <span class="hljs-string">''</span>)
		{
			<span class="hljs-keyword">$this</span>-&gt;day_type = $day_type;
		}

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">$this</span>-&gt;day_type === <span class="hljs-string">'long'</span>)
		{
			$day_names = <span class="hljs-keyword">array</span>(<span class="hljs-string">'sunday'</span>, <span class="hljs-string">'monday'</span>, <span class="hljs-string">'tuesday'</span>, <span class="hljs-string">'wednesday'</span>, <span class="hljs-string">'thursday'</span>, <span class="hljs-string">'friday'</span>, <span class="hljs-string">'saturday'</span>);
		}
		<span class="hljs-keyword">elseif</span> (<span class="hljs-keyword">$this</span>-&gt;day_type === <span class="hljs-string">'short'</span>)
		{
			$day_names = <span class="hljs-keyword">array</span>(<span class="hljs-string">'sun'</span>, <span class="hljs-string">'mon'</span>, <span class="hljs-string">'tue'</span>, <span class="hljs-string">'wed'</span>, <span class="hljs-string">'thu'</span>, <span class="hljs-string">'fri'</span>, <span class="hljs-string">'sat'</span>);
		}
		<span class="hljs-keyword">else</span>
		{
			$day_names = <span class="hljs-keyword">array</span>(<span class="hljs-string">'su'</span>, <span class="hljs-string">'mo'</span>, <span class="hljs-string">'tu'</span>, <span class="hljs-string">'we'</span>, <span class="hljs-string">'th'</span>, <span class="hljs-string">'fr'</span>, <span class="hljs-string">'sa'</span>);
		}

		$days = <span class="hljs-keyword">array</span>();
		<span class="hljs-keyword">for</span> ($i = <span class="hljs-number">0</span>, $c = count($day_names); $i &lt; $c; $i++)
		{
			$days[] = (<span class="hljs-keyword">$this</span>-&gt;CI-&gt;lang-&gt;line(<span class="hljs-string">'cal_'</span>.$day_names[$i]) === <span class="hljs-keyword">FALSE</span>) ? ucfirst($day_names[$i]) : <span class="hljs-keyword">$this</span>-&gt;CI-&gt;lang-&gt;line(<span class="hljs-string">'cal_'</span>.$day_names[$i]);
		}

		<span class="hljs-keyword">return</span> $days;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-43" id="section-43"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-44" id="section-44"></a>
</div>
<div class="dox">
<div class="summary">
<p>Adjust Date</p>
</div>
<div class="body">
<p>This function makes sure that we have a valid month/year.
For example, if you submit 13 as the month, the year will
increment and the month will become January.</p>
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>the month
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>the year
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>array
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">adjust_date</span><span class="hljs-params">($month, $year)</span>
	</span>{
		$date = <span class="hljs-keyword">array</span>();

		$date[<span class="hljs-string">'month'</span>]	= $month;
		$date[<span class="hljs-string">'year'</span>]	= $year;

		<span class="hljs-keyword">while</span> ($date[<span class="hljs-string">'month'</span>] &gt; <span class="hljs-number">12</span>)
		{
			$date[<span class="hljs-string">'month'</span>] -= <span class="hljs-number">12</span>;
			$date[<span class="hljs-string">'year'</span>]++;
		}

		<span class="hljs-keyword">while</span> ($date[<span class="hljs-string">'month'</span>] &lt;= <span class="hljs-number">0</span>)
		{
			$date[<span class="hljs-string">'month'</span>] += <span class="hljs-number">12</span>;
			$date[<span class="hljs-string">'year'</span>]--;
		}

		<span class="hljs-keyword">if</span> (strlen($date[<span class="hljs-string">'month'</span>]) === <span class="hljs-number">1</span>)
		{
			$date[<span class="hljs-string">'month'</span>] = <span class="hljs-string">'0'</span>.$date[<span class="hljs-string">'month'</span>];
		}

		<span class="hljs-keyword">return</span> $date;
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-45" id="section-45"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-46" id="section-46"></a>
</div>
<div class="dox">
<div class="summary">
<p>Total days in a given month</p>
</div>
<div class="body">
</div>
<div class="details">
<div class="dox_tag_title">Params</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>the month
</span>
</div>
<div class="dox_tag_detail">
<span class="dox_tag_name">int</span>
<span>the year
</span>
</div>
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>int
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">get_total_days</span><span class="hljs-params">($month, $year)</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;CI-&gt;load-&gt;helper(<span class="hljs-string">'date'</span>);
		<span class="hljs-keyword">return</span> days_in_month($month, $year);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-47" id="section-47"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-48" id="section-48"></a>
</div>
<div class="dox">
<div class="summary">
<p>Set Default Template Data</p>
</div>
<div class="body">
<p>This is used in the event that the user has not created their own template</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>array
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">default_template</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">return</span> <span class="hljs-keyword">array</span>(
			<span class="hljs-string">'table_open'</span>				=&gt; <span class="hljs-string">'&lt;table border="0" cellpadding="4" cellspacing="0"&gt;'</span>,
			<span class="hljs-string">'heading_row_start'</span>			=&gt; <span class="hljs-string">'&lt;tr&gt;'</span>,
			<span class="hljs-string">'heading_previous_cell'</span>		=&gt; <span class="hljs-string">'&lt;th&gt;&lt;a href="{previous_url}"&gt;&amp;lt;&amp;lt;&lt;/a&gt;&lt;/th&gt;'</span>,
			<span class="hljs-string">'heading_title_cell'</span>		=&gt; <span class="hljs-string">'&lt;th colspan="{colspan}"&gt;{heading}&lt;/th&gt;'</span>,
			<span class="hljs-string">'heading_next_cell'</span>			=&gt; <span class="hljs-string">'&lt;th&gt;&lt;a href="{next_url}"&gt;&amp;gt;&amp;gt;&lt;/a&gt;&lt;/th&gt;'</span>,
			<span class="hljs-string">'heading_row_end'</span>			=&gt; <span class="hljs-string">'&lt;/tr&gt;'</span>,
			<span class="hljs-string">'week_row_start'</span>			=&gt; <span class="hljs-string">'&lt;tr&gt;'</span>,
			<span class="hljs-string">'week_day_cell'</span>				=&gt; <span class="hljs-string">'&lt;td&gt;{week_day}&lt;/td&gt;'</span>,
			<span class="hljs-string">'week_row_end'</span>				=&gt; <span class="hljs-string">'&lt;/tr&gt;'</span>,
			<span class="hljs-string">'cal_row_start'</span>				=&gt; <span class="hljs-string">'&lt;tr&gt;'</span>,
			<span class="hljs-string">'cal_cell_start'</span>			=&gt; <span class="hljs-string">'&lt;td&gt;'</span>,
			<span class="hljs-string">'cal_cell_start_today'</span>		=&gt; <span class="hljs-string">'&lt;td&gt;'</span>,
			<span class="hljs-string">'cal_cell_start_other'</span>		=&gt; <span class="hljs-string">'&lt;td style="color: #666;"&gt;'</span>,
			<span class="hljs-string">'cal_cell_content'</span>			=&gt; <span class="hljs-string">'&lt;a href="{content}"&gt;{day}&lt;/a&gt;'</span>,
			<span class="hljs-string">'cal_cell_content_today'</span>	=&gt; <span class="hljs-string">'&lt;a href="{content}"&gt;&lt;strong&gt;{day}&lt;/strong&gt;&lt;/a&gt;'</span>,
			<span class="hljs-string">'cal_cell_no_content'</span>		=&gt; <span class="hljs-string">'{day}'</span>,
			<span class="hljs-string">'cal_cell_no_content_today'</span>	=&gt; <span class="hljs-string">'&lt;strong&gt;{day}&lt;/strong&gt;'</span>,
			<span class="hljs-string">'cal_cell_blank'</span>			=&gt; <span class="hljs-string">'&amp;nbsp;'</span>,
			<span class="hljs-string">'cal_cell_other'</span>			=&gt; <span class="hljs-string">'{day}'</span>,
			<span class="hljs-string">'cal_cell_end'</span>				=&gt; <span class="hljs-string">'&lt;/td&gt;'</span>,
			<span class="hljs-string">'cal_cell_end_today'</span>		=&gt; <span class="hljs-string">'&lt;/td&gt;'</span>,
			<span class="hljs-string">'cal_cell_end_other'</span>		=&gt; <span class="hljs-string">'&lt;/td&gt;'</span>,
			<span class="hljs-string">'cal_row_end'</span>				=&gt; <span class="hljs-string">'&lt;/tr&gt;'</span>,
			<span class="hljs-string">'table_close'</span>				=&gt; <span class="hljs-string">'&lt;/table&gt;'</span>
		);
	}

</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-49" id="section-49"></a>
</div>
<hr>

        </td>
        <td class="code highlight">
          <pre class="php">
</pre>
        </td>
      </tr>
    
      <tr>
        <td class="docs">
          <div class="pilwrap">
  <a class="pilcrow" href="#section-50" id="section-50"></a>
</div>
<div class="dox">
<div class="summary">
<p>Parse Template</p>
</div>
<div class="body">
<p>Harvests the data within the template {pseudo-variables}
used to display the calendar</p>
</div>
<div class="details">
<div class="dox_tag_title">Returns</div>
<div class="dox_tag_detail">
<span class="dox_tag_name"></span>
<span>CI_Calendar
</span>
</div>
</div>
</div>

        </td>
        <td class="code highlight">
          <pre class="php">	<span class="hljs-keyword">public</span> <span class="hljs-function"><span class="hljs-keyword">function</span> <span class="hljs-title">parse_template</span><span class="hljs-params">()</span>
	</span>{
		<span class="hljs-keyword">$this</span>-&gt;replacements = <span class="hljs-keyword">$this</span>-&gt;default_template();

		<span class="hljs-keyword">if</span> (<span class="hljs-keyword">empty</span>(<span class="hljs-keyword">$this</span>-&gt;template))
		{
			<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
		}

		<span class="hljs-keyword">if</span> (is_string(<span class="hljs-keyword">$this</span>-&gt;template))
		{
			$today = <span class="hljs-keyword">array</span>(<span class="hljs-string">'cal_cell_start_today'</span>, <span class="hljs-string">'cal_cell_content_today'</span>, <span class="hljs-string">'cal_cell_no_content_today'</span>, <span class="hljs-string">'cal_cell_end_today'</span>);

			<span class="hljs-keyword">foreach</span> (<span class="hljs-keyword">array</span>(<span class="hljs-string">'table_open'</span>, <span class="hljs-string">'table_close'</span>, <span class="hljs-string">'heading_row_start'</span>, <span class="hljs-string">'heading_previous_cell'</span>, <span class="hljs-string">'heading_title_cell'</span>, <span class="hljs-string">'heading_next_cell'</span>, <span class="hljs-string">'heading_row_end'</span>, <span class="hljs-string">'week_row_start'</span>, <span class="hljs-string">'week_day_cell'</span>, <span class="hljs-string">'week_row_end'</span>, <span class="hljs-string">'cal_row_start'</span>, <span class="hljs-string">'cal_cell_start'</span>, <span class="hljs-string">'cal_cell_content'</span>, <span class="hljs-string">'cal_cell_no_content'</span>, <span class="hljs-string">'cal_cell_blank'</span>, <span class="hljs-string">'cal_cell_end'</span>, <span class="hljs-string">'cal_row_end'</span>, <span class="hljs-string">'cal_cell_start_today'</span>, <span class="hljs-string">'cal_cell_content_today'</span>, <span class="hljs-string">'cal_cell_no_content_today'</span>, <span class="hljs-string">'cal_cell_end_today'</span>, <span class="hljs-string">'cal_cell_start_other'</span>, <span class="hljs-string">'cal_cell_other'</span>, <span class="hljs-string">'cal_cell_end_other'</span>) <span class="hljs-keyword">as</span> $val)
			{
				<span class="hljs-keyword">if</span> (preg_match(<span class="hljs-string">'/\{'</span>.$val.<span class="hljs-string">'\}(.*?)\{\/'</span>.$val.<span class="hljs-string">'\}/si'</span>, <span class="hljs-keyword">$this</span>-&gt;template, $match))
				{
					<span class="hljs-keyword">$this</span>-&gt;replacements[$val] = $match[<span class="hljs-number">1</span>];
				}
				<span class="hljs-keyword">elseif</span> (in_array($val, $today, <span class="hljs-keyword">TRUE</span>))
				{
					<span class="hljs-keyword">$this</span>-&gt;replacements[$val] = <span class="hljs-keyword">$this</span>-&gt;replacements[substr($val, <span class="hljs-number">0</span>, <span class="hljs-number">-6</span>)];
				}
			}
		}
		<span class="hljs-keyword">elseif</span> (is_array(<span class="hljs-keyword">$this</span>-&gt;template))
		{
			<span class="hljs-keyword">$this</span>-&gt;replacements = array_merge(<span class="hljs-keyword">$this</span>-&gt;replacements, <span class="hljs-keyword">$this</span>-&gt;template);
		}

		<span class="hljs-keyword">return</span> <span class="hljs-keyword">$this</span>;
	}

}

</pre>
        </td>
      </tr>
    
  </tbody>
</table>

  </div>
</body>
</html>
